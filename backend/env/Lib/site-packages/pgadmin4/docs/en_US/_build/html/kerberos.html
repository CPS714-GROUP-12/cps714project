


<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Enabling Kerberos Authentication &#8212; pgAdmin 4 6.15 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/style.css" />
    
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    
    <script src="_static/sidebar.js"></script>
    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Enabling OAUTH2 Authentication" href="oauth2.html" />
    <link rel="prev" title="Enabling LDAP Authentication" href="ldap.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="oauth2.html" title="Enabling OAUTH2 Authentication"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ldap.html" title="Enabling LDAP Authentication"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pgAdmin 4 6.15 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="getting_started.html" accesskey="U">Getting Started</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Enabling Kerberos Authentication</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="enabling-kerberos-authentication">
<span id="kerberos"></span><h1><span class="target" id="index-0"></span>Enabling Kerberos Authentication<a class="headerlink" href="#enabling-kerberos-authentication" title="Permalink to this heading">¶</a></h1>
<p><strong>Prerequisite:</strong> Kerberos understanding and setup</p>
<p>Reference: <a class="reference external" href="https://web.mit.edu/kerberos/">https://web.mit.edu/kerberos/</a></p>
<p>To configure Kerberos authentication, you must setup your Kerberos Server and
obtain a ticket on the client using <em>kinit</em>.</p>
<p>Note: Active Directory users with Kerberos support do not require kinit.</p>
<p>To enable Kerberos authentication for pgAdmin, you must configure the
Kerberos settings in <em>config_local.py</em> or <em>config_system.py</em>
(see the <a class="reference internal" href="config_py.html#config-py"><span class="std std-ref">config.py</span></a> documentation) on the
system where pgAdmin is installed in Server mode. You can copy these settings
from <em>config.py</em> file and modify the values for the following parameters.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Parameter</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>AUTHENTICATION_SOURCES</p></td>
<td><p>The default value for this parameter is <em>internal</em>.
To enable Kerberos authentication, you must include <em>kerberos</em> in the
list of values for this parameter. you can modify the value as follows:</p>
<ul class="simple">
<li><p>[‘kerberos’]: pgAdmin will use only Kerberos authentication.</p></li>
<li><p>[‘kerberos’, ‘internal’]: pgAdmin will first try to authenticate the user
through kerberos. If that authentication fails, then it will return back
to the login dialog where you need to provide internal pgAdmin user
credentials for authentication.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p>KERBEROS_AUTO_CREATE_USER</p></td>
<td><p>Set the value to <em>True</em> if you want to
automatically create a pgAdmin user corresponding to a successfully
authenticated Kerberos user. Please note that password is not stored in the
pgAdmin database.</p></td>
</tr>
<tr class="row-even"><td><p>KRB_APP_HOST_NAME</p></td>
<td><p>Specify the name of <em>pgAdmin webserver hostname</em>.
Please note that if it is not set, it will take the value of
<em>default_server</em> parameter.</p></td>
</tr>
</tbody>
</table>
<section id="keytab-file-for-http-service">
<h2>Keytab file for HTTP Service<a class="headerlink" href="#keytab-file-for-http-service" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>Generate the <em>Keytab</em> file for the HTTP service principal HTTP/&lt;host-name&gt;&#64;realm,
and copy it to the <em>pgAdmin</em> webserver machine. Ensure that the operating system
user owning the <em>pgAdmin</em> webserver is the owner of this file and should be
accessible by that user.</p></li>
<li><p>Please note that either you should set <em>default_keytab_name</em> parameter in
<em>krb5.conf</em> file or the environment variable <em>KRB5_KTNAME</em>. If not set then
explicitly set <em>KRB_KTNAME</em> to the location of your <em>Keytab</em> file in the
<em>config_local.py</em> or <em>config_system.py</em> file.</p></li>
</ul>
</section>
<section id="apache-httpd-configuration">
<h2>Apache HTTPD Configuration<a class="headerlink" href="#apache-httpd-configuration" title="Permalink to this heading">¶</a></h2>
<p>If the <em>pgAdmin</em> server is under the Apache Server, then you need to add the
following parameters in <em>Directory</em> directive of
<a class="reference internal" href="server_deployment.html#server-deployment"><span class="std std-ref">Apache HTTPD Configuration</span></a>:</p>
<blockquote>
<div><ul class="simple">
<li><p>WSGIScriptReloading On</p></li>
<li><p>WSGIPassAuthorization On</p></li>
</ul>
</div></blockquote>
</section>
<section id="browser-settings-to-configure-kerberos-authentication">
<h2>Browser settings to configure Kerberos Authentication<a class="headerlink" href="#browser-settings-to-configure-kerberos-authentication" title="Permalink to this heading">¶</a></h2>
<p>You need to configure the browser settings on the client machine to use
Kerberos authentication via <em>SPNEGO</em>.</p>
<ul>
<li><p>For Mozilla Firefox</p>
<ul class="simple">
<li><p>Open the low level Firefox configuration page by entering <em>about:config</em> in
the address bar.</p></li>
<li><p>In the Search text box, enter: <em>network.negotiate-auth.trusted-uris</em></p></li>
<li><p>Double-click the <em>network.negotiate-auth.trusted-uris</em> preference and enter
the hostname or the domain of the web server that is protected by Kerberos
HTTP SPNEGO. Separate multiple domains and hostnames with a comma.</p></li>
<li><p>Click OK.</p></li>
</ul>
</li>
<li><p>For Google Chrome</p>
<ul>
<li><p>On Windows:</p>
<ul class="simple">
<li><p>Open the Control Panel to access the Internet Options dialog.</p></li>
<li><p>Select the Security tab.</p></li>
<li><p>Select the Local Intranet zone and click the Sites button.</p></li>
<li><p>Make sure that the first two options, <em>Include all local (intranet) sites
not listed in other zones</em> and <em>Include all sites that bypass the proxy
server</em> are checked.</p></li>
<li><p>Click Advanced and add the names of the domains that are protected by
Kerberos HTTP SPNEGO, one at a time, to the list of websites. For example,
myhost.example.com. Click Close.</p></li>
<li><p>Click OK to save your configuration changes.</p></li>
</ul>
</li>
<li><p>On Linux or macOS:</p>
<ul class="simple">
<li><p>Add the <em>–auth-server-whitelist</em> parameter to the google-chrome command.
For example, to run Chrome from a Linux prompt, run the google-chrome
command as follows:</p></li>
</ul>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>google-chrome --auth-server-whitelist = &quot;hostname/domain&quot;
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
<section id="postgresql-server-settings-to-configure-kerberos-authentication">
<h2>PostgreSQL Server settings to configure Kerberos Authentication<a class="headerlink" href="#postgresql-server-settings-to-configure-kerberos-authentication" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p>To connect the PostgreSQL server with Kerberos authentication, GSSAPI support
has to be enabled when PostgreSQL is built and the necessary
<a class="reference external" href="https://www.postgresql.org/docs/current/gssapi-auth.html">configuration</a>
has to be in place.</p></li>
<li><p>In pgAdmin you need to enable Kerberos authentication for the PostgreSQL
server by setting “Kerberos authentication” flag to True in the Server dialog.
Once it is enabled, pgAdmin will not prompt for a password and will try to
connect to the PostgreSQL server using Kerberos.</p></li>
<li><p>Note that, you have to login into pgAdmin with Kerberos authentication to
then connect to PostgreSQL using Kerberos.</p></li>
</ul>
</section>
<section id="master-password">
<h2>Master Password<a class="headerlink" href="#master-password" title="Permalink to this heading">¶</a></h2>
<p>In the multi user mode, pgAdmin uses user’s login password to encrypt/decrypt the PostgreSQL server password.
In the Kerberos authentication, the pgAdmin user does not have the password, so we need an encryption key to store
the PostgreSQL server password for the servers which are not configured to use the Kerberos authentication.
To accomplish this, set the configuration parameter MASTER_PASSWORD to <em>True</em>, so upon setting the master password,
it will be used as an encryption key while storing the password. If it is False, the server password can not be stored.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Enabling Kerberos Authentication</a><ul>
<li><a class="reference internal" href="#keytab-file-for-http-service">Keytab file for HTTP Service</a></li>
<li><a class="reference internal" href="#apache-httpd-configuration">Apache HTTPD Configuration</a></li>
<li><a class="reference internal" href="#browser-settings-to-configure-kerberos-authentication">Browser settings to configure Kerberos Authentication</a></li>
<li><a class="reference internal" href="#postgresql-server-settings-to-configure-kerberos-authentication">PostgreSQL Server settings to configure Kerberos Authentication</a></li>
<li><a class="reference internal" href="#master-password">Master Password</a></li>
</ul>
</li>
</ul>

  </div>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="getting_started.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="login.html">Login Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="mfa.html">Enabling two-factor authentication (2FA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_management.html">User Management Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="change_ownership.html">Change Ownership Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="change_user_password.html">Change User Password Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="restore_locked_user.html">Lock/Restore Account</a></li>
<li class="toctree-l2"><a class="reference internal" href="ldap.html">Enabling LDAP Authentication</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Enabling Kerberos Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="oauth2.html">Enabling OAUTH2 Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="webserver.html">Enabling Webserver Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="user_interface.html">User Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="menu_bar.html">Menu Bar</a></li>
<li class="toctree-l2"><a class="reference internal" href="toolbar.html">Toolbar</a></li>
<li class="toctree-l2"><a class="reference internal" href="tabbed_browser.html">Tabbed Browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="tree_control.html">Tree Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="preferences.html">Preferences Dialog</a></li>
<li class="toctree-l2"><a class="reference internal" href="keyboard_shortcuts.html">Keyboard Shortcuts:</a></li>
<li class="toctree-l2"><a class="reference internal" href="search_objects.html">Search objects</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="connecting.html">Connecting To A Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_cluster_objects.html">Managing Cluster Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="managing_database_objects.html">Managing Database Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="modifying_tables.html">Creating or Modifying a Table</a></li>
<li class="toctree-l1"><a class="reference internal" href="management_basics.html">Management Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="backup_and_restore.html">Backup and Restore</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer_tools.html">Developer Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="pgagent.html">pgAgent</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributions.html">pgAdmin Project Contributions</a></li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="licence.html">Licence</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
<div id="sidebarbutton" title="Collapse sidebar">
<span>«</span>
</div>

      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="oauth2.html" title="Enabling OAUTH2 Authentication"
             >next</a> |</li>
        <li class="right" >
          <a href="ldap.html" title="Enabling LDAP Authentication"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">pgAdmin 4 6.15 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="getting_started.html" >Getting Started</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Enabling Kerberos Authentication</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        <div class="related" role="navigation" aria-label="related navigation">
          <ul>
              <li class="left" style="margin-left: 10px">&#169; Copyright (C) 2013 - 2022, The pgAdmin Development Team.</li>
            <li class="right" style="margin-right: 10px"><a href="genindex.html" title="General Index" accesskey="I">index</a></li>
            <li class="right" ><a href="oauth2.html" title="Enabling OAUTH2 Authentication" accesskey="N">next</a> |</li>
            <li class="right" ><a href="ldap.html" title="Enabling LDAP Authentication" accesskey="P">previous</a> |</li>
          </ul>
        </div>
    </div>
  </body>
</html>