{
  "add_trigger": [
    {
      "name": "Add trigger Node",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "BEFORE",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_insert": true
      },
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Create after fires event trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "AFTER",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_update": true
      },
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Check if it throws an error when trigger is created with 'fires after event' and truncate",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "AFTER",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_truncate": true
      },
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Check if it throws an error when no event is selected while creating a trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "AFTER",
        "columns": [],
        "tfunction": "PLACE_HOLDER"
      },
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Error while adding a trigger using wrong table",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "wrong_table_id": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "BEFORE",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_insert": true
      },
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 410
      }
    },
    {
      "name": "Error while adding a trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "error_creating_trigger": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "BEFORE",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_insert": true
      },
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(False, 'Mocked Internal Server Error ')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Error while while fetching the trigger id using trigger name",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "internal_server_error": true,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "BEFORE",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_insert": true
      },
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(True, True),(False, 'Mocked Internal Server Error ')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Exception while adding a trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "test_data": {
        "name": "PLACE_HOLDER",
        "is_row_trigger": true,
        "fires": "BEFORE",
        "columns": [],
        "tfunction": "PLACE_HOLDER",
        "evnt_insert": true
      },
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(False, 'Mocked Internal Server Error ')"
      },
      "expected_data": {
        "status_code": 500
      }
    }
  ],
  "get_trigger": [
    {
      "name": "Get a trigger URL",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Get a trigger URL using wrong trigger id",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "incorrect_trigger_id": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 410
      }
    },
    {
      "name": "Get a trigger properties under table nodes",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "table_nodes": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Error while fetching a trigger properties under table nodes",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "table_nodes": true,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Get a trigger Node",
      "url": "/browser/trigger/nodes/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Get a trigger Node using wrong trigger id",
      "url": "/browser/trigger/nodes/",
      "is_positive_test": true,
      "incorrect_trigger_id": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 410
      }
    },
    {
      "name": "Get a trigger Node dependants",
      "url": "/browser/trigger/dependent/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Get a trigger Node dependency",
      "url": "/browser/trigger/dependency/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Error while fetching the trigger under the table nodes using wrong table id",
      "url": "/browser/trigger/nodes/",
      "is_positive_test": false,
      "mocking_required": true,
      "dummy_dict": {
        "rows": [
          {
            "schema": "test_schema_88886",
            "table": "table_trigger_94da770"
          }
        ]
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_2darray",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500,
        "message": "Internal Server Error"
      }
    },
    {
      "name": "Get all the trigger under the table nodes",
      "url": "/browser/trigger/nodes/",
      "is_positive_test": true,
      "mocking_required": false,
      "table_nodes": true,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Get all the trigger under the table nodes using wrong table id",
      "url": "/browser/trigger/nodes/",
      "is_positive_test": true,
      "incorrect_table_id": true,
      "table_nodes": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Error while fetching all the trigger under the table nodes using wrong table id",
      "url": "/browser/trigger/nodes/",
      "is_positive_test": false,
      "table_nodes": true,
      "mocking_required": true,
      "dummy_dict": {
        "rows": [
          {
            "schema": "test_schema_88886",
            "table": "table_trigger_94da770"
          }
        ]
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_2darray",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500,
        "message": "Server error"
      }
    },
    {
      "name": "Get a trigger SQL using wrong trigger id",
      "url": "/browser/trigger/sql/",
      "is_positive_test": true,
      "incorrect_trigger_id": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 410
      }
    },
    {
      "name": "Fetch MSQL of trigger",
      "url": "/browser/trigger/msql/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Fetch msql of trigger using wrong trigger id",
      "url": "/browser/trigger/msql/",
      "is_positive_test": false,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.browser.server_groups.servers.databases.schemas.tables.triggers.utils.get_sql",
        "return_value": "('', 'Mocked response')"
      },
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Error while generating  msql of trigger",
      "url": "/browser/trigger/msql/",
      "is_positive_test": false,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Get the modified SQL by passing an argument",
      "url": "/browser/trigger/msql/",
      "is_positive_test": true,
      "mocking_required": false,
      "pass_argument": true,
      "mock_data": {
      },
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Get a list of available trigger function",
      "url": "/browser/trigger/get_triggerfunctions/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Error while fetching a list of available trigger function",
      "url": "/browser/trigger/get_triggerfunctions/",
      "is_positive_test": false,
      "mocking_required": true,
      "dummy_dict": {
        "rows": [
          {
            "schema": "test_schema_88886",
            "table": "table_trigger_94da770"
          }
        ]
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_2darray",
        "return_value": "(True, True),(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500,
        "message": "Server error"
      }
    },
    {
      "name": "Exception while fetching a list of available trigger function",
      "url": "/browser/trigger/get_triggerfunctions/",
      "is_positive_test": false,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_2darray",
        "return_value": "(True, True),(True, True)"
      },
      "expected_data": {
        "status_code": 500,
        "message": "Server error"
      }
    }
  ],
  "delete_trigger": [
    {
      "name": "Delete a trigger URL",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Error while fetching a trigger to delete",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Error while deleting the trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Error while fetching a trigger to delete",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "mocking_required": true,
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "(True, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "trigger not found while deleting a trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "invalid_trigger_id": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    }
  ],
  "update_trigger": [
    {
      "name": "update a trigger URL",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "test_data": {
        "description": "This is test comment."
      },
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Enable Always compound trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "test_data": {
        "is_enable_trigger": "A"
      },
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Enable Replica compound trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "test_data": {
        "is_enable_trigger": "R"
      },
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Disable compound trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "test_data": {
        "is_enable_trigger": "D"
      },
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Enable a trigger",
      "url": "/browser/trigger/enable/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "test_data": {
        "is_enable_trigger": "O"
      },
      "expected_data": {
        "status_code": 200
      }
    },
    {
      "name": "Enable a trigger using wrong trigger id",
      "url": "/browser/trigger/enable/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "wrong_trigger_id": true,
      "test_data": {
        "is_enable_trigger": "O"
      },
      "expected_data": {
        "status_code": 410
      }
    },
    {
      "name": "Error while fetching a trigger to enable/disable",
      "url": "/browser/trigger/enable/",
      "is_positive_test": false,
      "mocking_required": true,
      "test_data": {
        "is_enable_trigger": "O"
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Error while enabling a trigger",
      "url": "/browser/trigger/enable/",
      "is_positive_test": false,
      "mocking_required": true,
      "test_data": {
        "is_enable_trigger": "O"
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Exception while enabling a trigger",
      "url": "/browser/trigger/enable/",
      "is_positive_test": false,
      "mocking_required": true,
      "test_data": {
        "is_enable_trigger": "O"
      },
      "dummy_dict": {
        "rows": [
          1
        ]
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "PLACE_HOLDER"
      },
      "expected_data": {
        "status_code": 500,
        "message": ""
      }
    },
    {
      "name": "Error while fetching a trigger to update",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "mocking_required": true,
      "test_data": {
        "description": "This is test comment."
      },
      "dummy_dict": {
        "rows": [
          {
            "oid": 60299,
            "name": "test_trigger_update_0680105",
            "xmin": "11787",
            "is_enable_trigger": "O",
            "tgrelid": 60289,
            "tgname": "test_trigger_update_0680105",
            "tgfoid": 60298,
            "tgtype": 7,
            "tgenabled": "O",
            "tgisinternal": false,
            "tgconstrrelid": 0,
            "tgconstrindid": 0,
            "tgconstraint": 0,
            "tgdeferrable": false,
            "tginitdeferred": false,
            "tgnargs": 0,
            "tgattr": "",
            "tgargs": "",
            "tgqual": "",
            "tgoldtable": "",
            "tgnewtable": "",
            "relname": "table_trigger_2cadf23",
            "parentistable": true,
            "nspname": "test_schema_b0a5c",
            "description": "",
            "lanname": "plpgsql",
            "prosrc": " BEGIN NULL; END; ",
            "tfunction": "test_schema_b0a5c.trigger_func_add_3d79e4e",
            "whenclause": "",
            "custom_tgargs": [],
            "is_sys_trigger": false,
            "is_constraint_trigger": false,
            "tgoldtable-2": "",
            "tgnewtable-2": ""
          }
        ]
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_dict",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500,
        "message": "Error while fetching a trigger to update"
      }
    },
    {
      "name": "Error while updating the trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "mocking_required": true,
      "test_data": {
        "description": "This is test comment."
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    },
    {
      "name": "Error while updating the new trigger id in browser tree",
      "url": "/browser/trigger/obj/",
      "is_positive_test": false,
      "mocking_required": true,
      "new_trigger_id": true,
      "test_data": {
        "description": "This is test comment."
      },
      "mock_data": {
        "function_name": "pgadmin.utils.driver.psycopg2.connection.Connection.execute_scalar",
        "return_value": "(True, True),(False, 'Mocked Internal Server Error')"
      },
      "expected_data": {
        "status_code": 500
      }
    }
  ],
  "delete_multiple_trigger": [
    {
      "name": "Delete multiple trigger",
      "url": "/browser/trigger/obj/",
      "is_positive_test": true,
      "mocking_required": false,
      "mock_data": {},
      "expected_data": {
        "status_code": 200
      }
    }
  ]
}
