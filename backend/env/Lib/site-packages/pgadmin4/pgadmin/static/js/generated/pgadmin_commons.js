"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[196],{34439:(e,t,n)=>{var i,a;n(82772),n(69826);var r,o=n(73819),s=(r=n(96486))&&r.__esModule?r:{default:r};i=[n(91669),n(55112),n(61329),n(67507)],void 0===(a=function(e,t,n){var i=t.Browser=t.Browser||{};return i.Collection||(i.Collection=function(){},s.default.extend(i.Collection,s.default.clone(i.Node),{Init:function(){this.node_initialized||(this.node_initialized=!0,t.Browser.add_menus([{name:"refresh",node:this.type,module:this,applies:["object","context"],callback:"refresh",priority:2,label:e("Refresh"),icon:"fa fa-sync-alt"}]),t.unsupported_nodes&&-1==s.default.indexOf(t.unsupported_nodes,this.type)&&("database"==this.type&&this.allowConn||"database"!=this.type)&&(t.Browser.add_menus([{name:"show_query_tool",node:this.type,module:this,applies:["context"],callback:"show_query_tool",priority:998,label:e("Query Tool"),icon:"pg-font-icon icon-query_tool"}]),t.Browser.add_menus([{name:"search_objects",node:this.type,module:this,applies:["context"],callback:"show_search_objects",priority:997,label:e("Search Objects..."),icon:"fa fa-search"}]),t.enable_psql&&t.Browser.add_menus([{name:"show_psql_tool",node:this.type,module:this,applies:["context"],callback:"show_psql_tool",priority:998,label:e("PSQL Tool"),icon:"fas fa-terminal"}])))},hasId:!1,is_collection:!0,collection_node:!0,hasCollectiveStatistics:!0,canDrop:!0,canDropCascade:!0,selectParentNodeOnDelete:!1,showProperties:function(e,t,n){var a=n.$container.find(".obj_properties").first();(0,o.getPanelView)(i.tree,a[0],i,n._type)},generate_url:function(e,a){var r={properties:"obj",children:"nodes",drop:"obj"},o=this,s=i.tree.getTreeNodeHierarchy(e),l=a in r?r[a]:a;return n.generate_url(t.Browser.URL,s,l,o.node,(function(e,t){return t!=o.type}))},show_query_tool:function(){t.Tools.SQLEditor&&t.Tools.SQLEditor.showQueryTool("",t.Browser.tree.selected())},show_search_objects:function(){t.Tools.SearchObjects&&t.Tools.SearchObjects.show_search_objects("",t.Browser.tree.selected())},show_psql_tool:function(e){var t=e||{},n=i.tree,a=t.item||n.selected(),r=a?n.itemData(a):void 0;i.psql.psql_tool(r,a,!0)}})),i.Collection}.apply(t,i))||(e.exports=a)},92356:(e,t,n)=>{var i,a;n(82526),n(41817),n(32165),n(78783),n(47042),n(91038),n(79753),n(41539),n(66992),n(33948),n(68309),n(5212),n(39714),n(83710),n(5735),n(83753),n(34553),n(32564),n(69826),n(40561),n(47941);var r,o=(r=n(96486))&&r.__esModule?r:{default:r};function s(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}i=[n(55112),n(19755),n(72316),n(44092)],a=function(e,t,n,i){var a=e.Browser=e.Browser||{};return a.DataModel=n.Model.extend({on_server:!1,parse:function(e){var t=this;e&&o.default.isObject(e)&&"node"in e&&e.node&&(t.tnode=o.default.extend({},e.node),delete e.node);return function i(r){r&&o.default.isArray(r)&&o.default.each(r,(function(r){var s,l;switch(r.type){case"collection":s=t.get(r.id),l=e[r.id],o.default.isArray(l)||o.default.isObject(l)?s&&s instanceof n.Collection?s.reset(l,{silent:!0,parse:!0,on_server:!0}):(s=new a.Node.Collection(l,{model:o.default.isString(r.model)&&r.model in a.Nodes?a.Nodes[r.model].model:r.model,top:t.top||t,handler:t,parse:!0,silent:!0,attrName:r.id}),t.set(r.id,s,{silent:!0,parse:!0,on_server:!0})):s=null,t.set(r.id,s,{silent:!0}),e[r.id]=s;break;case"model":s=t.get(r.id),l=e[r.id],o.default.isUndefined(l)||o.default.isNull(l)?s=null:(s&&s instanceof n.Model||(s=o.default.isString(r.model)&&r.model in a.Nodes[r.model]?new a.Nodes[r.model].Model(s,{silent:!0,top:t.top||t,handler:t,attrName:r.id}):new r.model(s,{silent:!0,top:t.top||t,handler:t,attrName:r.id})),s.set(l,{parse:!0,silent:!0})),e[r.id]=s;break;case"nested":i(r.schema)}}))}(t.schema),e},isNew:function(){return this.has(this.idAttribute)?!this.has(this.idAttribute):!this.on_server},primary_key:function(){if(this.keys&&o.default.isArray(this.keys)){var e={},t=this;return o.default.each(t.keys,(function(n){e[n]=t.attributes[n]})),JSON.stringify(e)}return this.cid},initialize:function(e,t){var i,r=this;r._previous_key_values={},!o.default.isUndefined(t)&&"on_server"in t&&t.on_server&&(r.on_server=!0),n.Model.prototype.initialize.apply(r,arguments),(o.default.isUndefined(t)||o.default.isNull(t))&&(t=e||{}),r.sessAttrs={},r.fieldData={},r.origSessAttrs={},r.objects=[],r.arrays=[],r.attrName=t.attrName,r.top=t.top||r.collection&&r.collection.top||r.collection||r,r.handler=t.handler||r.collection&&r.collection.handler,r.trackChanges=!1,r.errorModel=new n.Model,r.node_info=t.node_info;var s=function e(t){t&&o.default.isArray(t)&&o.default.each(t,(function(t){switch(t.type){case"int":case"numeric":r.fieldData[t.id]={id:t.id,label:t.label,type:t.type,min:o.default.isUndefined(t.min)?void 0:t.min,max:o.default.isUndefined(t.max)?void 0:t.max};break;default:r.fieldData[t.id]={id:t.id,label:t.label,type:t.type}}switch(t.type){case"array":r.arrays.push(t.id);break;case"collection":if(!((i=r.get(t.id))&&i instanceof a.Node.Collection))if(o.default.isString(t.model)&&t.model in a.Nodes){var s=a.Nodes[t.model];i=new s.Collection(i,{model:s.model,top:r.top||r,handler:r,attrName:t.id})}else i=new a.Node.Collection(i,{model:t.model,top:r.top||r,handler:r,attrName:t.id});i.name=t.id,r.objects.push(t.id),r.set(t.id,i,{silent:!0});break;case"model":(i=r.get(t.id))&&i instanceof n.Model||(i=o.default.isString(t.model)&&t.model in a.Nodes[t.model]?new a.Nodes[t.model].Model(i,{top:r.top||r,handler:r,attrName:t.id}):new t.model(i,{top:r.top||r,handler:r,attrName:t.id})),i.name=t.id,r.objects.push(t.id),r.set(t.id,i,{silent:!0});break;case"nested":e(t.schema);break;default:return}}))};return s(r.schema),r.handler&&r.handler.trackChanges&&r.startNewSession(),"keys"in r&&o.default.isArray(r.keys)&&o.default.each(r.keys,(function(e){r.on("change:"+e,(function(t){r._previous_key_values[e]=t.previous(e)}))})),r},reset:function(e){var t,i=!(!e||!e.reindex);if(e&&e.stop&&this.stopSession(),i){for(var r in this.objects)(t=this.get(r))&&(t instanceof a.DataModel?t.reset(e):t instanceof n.Model?t.clear(e):t instanceof a.DataCollection?t.reset([],e):t instanceof n.Collection&&(t.each((function(i){i instanceof n.DataModel&&(t.reset(),t.clear(e))})),n.Collection.prototype.reset.call(t,[],e)));n.Collection.prototype.reset.apply(this,arguments)}},sessChanged:function(){var e=this;return o.default.size(e.sessAttrs)>0||o.default.some(e.objects,(function(t){var n=e.get(t);return!o.default.isNull(n)&&!o.default.isUndefined(n)&&n.sessChanged()}))},sessValid:function(){var e=this;return(!("default_validate"in e)||"function"!=typeof e.default_validate||!o.default.isString(e.default_validate()))&&!("validate"in e&&o.default.isFunction(e.validate)&&o.default.isString(e.validate.apply(e)))},set:function(e,t,i){var a=o.default.isObject(e)?t:i;this._changing=!0,this._previousAttributes=o.default.clone(this.attributes),this.changed={};var r=n.Model.prototype.set.call(this,e,t,i);if(this._changing=!1,a&&a.internal||!this.trackChanges)return!0;if(null!=e&&r){var s,l={},c=this,u=function(e,t){if(!(t in c.objects)){l[t]=e;var n=c.origSessAttrs[t]&&e;o.default.isEqual(c.origSessAttrs[t],e)||null===c.origSessAttrs[t]&&""===e||n&&o.default.isEqual(c.origSessAttrs[t].toString(),e.toString())?delete c.sessAttrs[t]:c.sessAttrs[t]=e}};return"object"===d(e)?o.default.each(e,u):u(t,e),c.trigger("pgadmin-session:set",c,l),a&&a.silent||c.trigger("change",c,a),"default_validate"in c&&"function"==typeof c.default_validate&&(s=c.default_validate()),"validate"in c&&"function"==typeof c.validate&&(s||(s=c.validate(o.default.keys(l)))),0==o.default.size(c.errorModel.attributes)?c.collection||c.handler?(c.collection||c.handler).trigger("pgadmin-session:model:valid",c,c.collection||c.handler):c.trigger("pgadmin-session:valid",c.sessChanged(),c):(s=s||o.default.values(c.errorModel.attributes)[0],c.collection||c.handler?(c.collection||c.handler).trigger("pgadmin-session:model:invalid",s,c,c.collection||c.handler):c.trigger("pgadmin-session:invalid",s,c)),r}return r},toJSON:function(e,t){var i,a=this,r=a.isNew();return!(e=void 0!==e&&e)||r?i=n.Model.prototype.toJSON.call(this,arguments):((i={})[a.idAttribute||"_id"]=a.get(a.idAttribute||"_id"),i=o.default.extend(i,a.sessAttrs)),o.default.each(a.objects,(function(n){var o=a.get(n);e?i[n]instanceof Array?i[n]=JSON.stringify(i[n]):o&&o.sessChanged&&o.sessChanged()||r?(i[n]=o&&o.toJSON(!r),o&&t&&"GET"==t&&(i[n]=JSON.stringify(i[n]))):delete i[n]:i[n]instanceof Array||(i[n]=o&&o.toJSON())})),e&&o.default.each(a.arrays,(function(e){i[e]&&i[e]instanceof Array&&(i[e]=JSON.stringify(i[e]))})),i},startNewSession:function(){var e=this;e.trackChanges&&(e.trigger("pgadmin-session:stop",e),e.off("pgadmin-session:model:invalid",e.onChildInvalid),e.off("pgadmin-session:model:valid",e.onChildValid),e.off("pgadmin-session:changed",e.onChildChanged),e.off("pgadmin-session:added",e.onChildChanged),e.off("pgadmin-session:removed",e.onChildChanged)),e.trackChanges=!0,e.sessAttrs={},e.origSessAttrs=o.default.clone(e.attributes),o.default.each(e.objects,(function(t){var n=e.get(t);o.default.isUndefined(n)||o.default.isNull(n)||(delete e.origSessAttrs[t],n&&"startNewSession"in n&&o.default.isFunction(n.startNewSession)&&n.startNewSession())})),e.trigger("pgadmin-session:start",e),e.on("pgadmin-session:model:invalid",e.onChildInvalid),e.on("pgadmin-session:collection:changed",e.onChildCollectionChanged),e.on("pgadmin-session:model-msg:changed",e.onModelChangedMsg),e.on("pgadmin-session:model:valid",e.onChildValid),e.on("pgadmin-session:changed",e.onChildChanged),e.on("pgadmin-session:added",e.onChildChanged),e.on("pgadmin-session:removed",e.onChildChanged)},onChildInvalid:function(e,t){var n=this;if(n.trackChanges&&t){var i=t.attrName;if(!i){var a=t.primary_key&&"function"==typeof t.primary_key,r=a?t.primary_key():t.cid,s=a?function(e){var t=n.get("k");return!(!t||t.primary_key()!==r)&&(i=e,!0)}:function(e){return n.get(e).cid===r&&(i=e,!0)};o.default.findIndex(n.objects,s)}i&&(n.errorModel.set(i,e),n.handler?n.handler.trigger("pgadmin-session:model:invalid",e,n,n.handler):n.trigger("pgadmin-session:invalid",e,n))}return this},onChildValid:function(e){var t=this;if(t.trackChanges&&e){var i=e.attrName;if(!i){var a=e.primary_key&&"function"==typeof e.primary_key,r=a?e.primary_key():e.cid,s=a?function(e){var n=t.get("k");return!(!n||n.primary_key()!==r)&&(i=e,!0)}:function(e){var n=t.get("k");return!(!n||n.cid!==r)&&(i=e,!0)};o.default.findIndex(t.objects,s)}var l=null,d=function(e,t){return"default_validate"in e&&"function"==typeof e.default_validate&&(l=e.default_validate(),o.default.isString(l))?l:"validate"in e&&"function"==typeof e.validate?l=e.validate(t):null};if(e instanceof n.Collection){for(var c in e.models)if(d(e.models[c]))break}else e instanceof n.Model&&d(e);i&&t.errorModel.has(i)&&(l?t.errorModel.set(i,l):t.errorModel.unset(i)),0!=o.default.size(t.errorModel.attributes)||d(t,i&&[i])?(l=l||o.default.values(t.errorModel.attributes)[0],t.handler?(t.handler.trigger("pgadmin-session:model:invalid",l,t,t.handler),t.handler.trigger("pgadmin-session:collection:changed",t,t.handler)):(t.trigger("pgadmin-session:invalid",l,t),t.trigger("pgadmin-session:collection:changed",t))):t.handler?(t.handler.trigger("pgadmin-session:model:valid",t,t.handler),t.handler.trigger("pgadmin-session:collection:changed",t,t.handler)):(t.trigger("pgadmin-session:valid",t.sessChanged(),t),t.trigger("pgadmin-session:collection:changed",t.sessChanged(),t))}},onChildCollectionChanged:function(e,i){var a=this,r=this;setTimeout((function(){var e,l,d,c,u=null,p=r.collection||i;if(p){var f=p.attrName||p.name,h=t(".show.active div."+f);t(h).find(".error-in-grid").removeClass("error-in-grid");e:if(p instanceof n.Collection)for(var m in p.models){var g,v=p.models[m],b=s(v.objects);try{for(b.s();!(g=b.n()).done;){var y=g.value,_=v.attributes[y];if(_&&_.models.length>0)for(var w in _.models)if(d=_.models[w],c=void 0,"default_validate"in d&&"function"==typeof d.default_validate&&(u=d.default_validate(),o.default.isString(u))?u:"validate"in d&&"function"==typeof d.validate&&(u=d.validate(c))){e=_.models[w],l=v.parentTr;break e}}}catch(e){b.e(e)}finally{b.f()}}}return u&&e&&(u=u||o.default.values(e.errorModel.attributes)[0],e.trigger("pgadmin-session:model:invalid",u,e),t(l).addClass("error-in-grid")),a}),120)},onChildChanged:function(e){var t=this;t.trackChanges&&t.collection&&t.collection.trigger("change",t),t.trigger("pgadmin-session:collection:changed",t,e)},stopSession:function(){var e=this;e.trackChanges&&(e.off("pgadmin-session:model:invalid",e.onChildInvalid),e.off("pgadmin-session:model:valid",e.onChildValid),e.off("pgadmin-session:changed",e.onChildChanged),e.off("pgadmin-session:added",e.onChildChanged),e.off("pgadmin-session:removed",e.onChildChanged),e.off("pgadmin-session:collection:changed",e.onChildCollectionChanged)),e.trackChanges=!1,e.sessAttrs={},e.origSessAttrs={},o.default.each(e.objects,(function(t){var n=e.get(t);o.default.isUndefined(n)||o.default.isNull(n)||(e.origSessAttrs[t]=null,delete e.origSessAttrs[t],n&&"stopSession"in n&&o.default.isFunction(n.stopSession)&&n.stopSession())})),e.trigger("pgadmin-session:stop")},default_validate:function(){for(var e,t,n,i,a=0,r=o.default.keys(this.attributes),s=r.length;a<s;a++)if(n=this.attributes[r[a]],t=this.fieldData[r[a]],e=null,o.default.isUndefined(n)||o.default.isNull(n)||""===String(n))t&&this.errorModel.unset(t.id);else{if(!t)continue;if(!(i=t.type||void 0))continue;switch(i){case"int":e=this.integer_validate(n,t);break;case"numeric":e=this.number_validate(n,t)}if(e)return this.errorModel.set(t.id,e),e;this.errorModel.unset(t.id)}return null},check_min_max:function(t,n){var a=n.label,r=n.min,s=n.max;return!o.default.isUndefined(r)&&t<r?i.sprintf(e.Browser.messages.MUST_GR_EQ,a,r):!o.default.isUndefined(s)&&t>s?i.sprintf(e.Browser.messages.MUST_LESS_EQ,a,s):null},number_validate:function(t,n){return/^-?\d+(\.?\d*)$/.test(t)?this.check_min_max(t,n):i.sprintf(e.Browser.messages.MUST_BE_NUM,n.label)},integer_validate:function(t,n){return/^-?\d*$/.test(t)?this.check_min_max(t,n):i.sprintf(e.Browser.messages.MUST_BE_INT,n.label)}}),a.DataCollection=n.Collection.extend({initialize:function(e,t){var n=this;return t=t||{},n.sessAttrs={changed:[],added:[],deleted:[],invalid:[]},n.top=t.top||n,n.attrName=t.attrName,n.handler=t.handler,n.trackChanges=!1,n.on("add",n.onModelAdd),n.on("remove",n.onModelRemove),n.on("change",n.onModelChange),n.handler&&n.handler.trackChanges&&n.startNewSession(),n},startNewSession:function(){var e,t=this;t.trackChanges&&(t.trigger("pgadmin-session:stop",t),t.off("pgadmin-session:model:invalid",t.onModelInvalid),t.off("pgadmin-session:model:valid",t.onModelValid)),t.trackChanges=!0,t.sessAttrs={changed:[],added:[],deleted:[],invalid:[]},o.default.each(t.models,(function(n){"startNewSession"in n&&o.default.isFunction(n.startNewSession)&&n.startNewSession(),"default_validate"in n&&"function"==typeof n.default_validate&&(e=n.default_validate()),(o.default.isString(e)||"validate"in n&&"function"==typeof n.validate&&(e=n.validate()))&&(t.sessAttrs.invalid[n.cid]=e)})),t.trigger("pgadmin-session:start",t),t.on("pgadmin-session:model:invalid",t.onModelInvalid),t.on("pgadmin-session:model:valid",t.onModelValid)},onModelInvalid:function(e,t){var n=this,i=n.sessAttrs.invalid;return n.trackChanges&&(i[t.cid]=e,n.handler?n.handler.trigger("pgadmin-session:model:invalid",e,n,n.handler):n.trigger("pgadmin-session:invalid",e,n)),!0},onModelValid:function(e){var t=this,n=t.sessAttrs.invalid;if(t.trackChanges){var i=t.checkDuplicateWithModel(e);i&&e.cid in n&&delete n[e.cid],i&&this.triggerValidationEvent.apply(this)}return!0},stopSession:function(){var e=this;e.trackChanges=!1,e.sessAttrs={changed:[],added:[],deleted:[],invalid:[]},o.default.each(e.models,(function(e){"stopSession"in e&&o.default.isFunction(e.stopSession)&&e.stopSession()}))},sessChanged:function(){return this.sessAttrs.changed.length>0||this.sessAttrs.added.length>0||this.sessAttrs.deleted.length>0},toJSON:function(e){var t=this;if(e=void 0!==e&&e){var i={added:[]};return o.default.each(this.sessAttrs.added,(function(e){i.added.push(e.toJSON())})),0==i.added.length&&delete i.added,i.changed=[],o.default.each(t.sessAttrs.changed,(function(e){i.changed.push(e.toJSON(!0))})),0==i.changed.length&&delete i.changed,i.deleted=[],o.default.each(t.sessAttrs.deleted,(function(e){i.deleted.push(e.toJSON())})),0==i.deleted.length&&delete i.deleted,0==o.default.size(i)?null:i}return n.Collection.prototype.toJSON.call(t)},reset:function(e,t){t&&t.stop&&this.stopSession(),this.each((function(e){e&&(e instanceof a.DataModel?e.reset(t):e.clear(t))})),n.Collection.prototype.reset.apply(this,arguments)},objFindInSession:function(e,t){var n=e.primary_key&&"function"==typeof e.primary_key,i=n?e.primary_key():e.cid,a=n?function(e){return e.primary_key()===i}:function(e){return e.cid===i};return o.default.findIndex(this.sessAttrs[t],a)},onModelAdd:function(e){if(this.trackChanges){var t,n=this,i=n.objFindInSession(e,"deleted");if(i>=0){var a=n.sessAttrs.deleted[i];e.origSessAttrs=o.default.clone(a.origSessAttrs),e.attributes=o.default.extend(e.attributes,a.attributes),e.sessAttrs=o.default.clone(a.sessAttrs),n.sessAttrs.deleted.splice(i,1),"sessChanged"in e&&!e.sessChanged()||n.sessAttrs.changed.push(e),(n.handler||n).trigger("pgadmin-session:added",n,e),"default_validate"in e&&"function"==typeof e.default_validate&&(t=e.default_validate()),(o.default.isString(t)||"validate"in e&&"function"==typeof e.validate&&(t=e.validate()))&&(n.sessAttrs.invalid[e.cid]=t)}else"default_validate"in e&&"function"==typeof e.default_validate&&(t=e.default_validate()),(o.default.isString(t)||"validate"in e&&"function"==typeof e.validate&&(t=e.validate()))&&(n.sessAttrs.invalid[e.cid]=t),n.sessAttrs.added.push(e),(n.handler||n).trigger("pgadmin-session:added",n,e);this.triggerValidationEvent.apply(this),n.trigger("pgadmin-session:collection:changed",n)}return!0},onModelRemove:function(e){if(this.trackChanges){e.errorModel.clear();var t=this,n=t.sessAttrs.invalid,i=o.default.clone(e),a=t.objFindInSession(e,"added");e.cid in n&&delete n[e.cid],a>=0?(t.sessAttrs.added.splice(a,1),(t.handler||t).trigger("pgadmin-session:removed",t,i),t.checkDuplicateWithModel(i),this.triggerValidationEvent.apply(this)):((a=t.objFindInSession(e,"changed"))>=0?(t.sessAttrs.changed.splice(a,1),(t.handler||t).trigger("pgadmin-session:removed",t,i)):(t.handler||t).trigger("pgadmin-session:removed",t,i),e.set(e.origSessAttrs,{silent:!0}),t.sessAttrs.deleted.push(e),t.checkDuplicateWithModel(e),this.triggerValidationEvent.apply(this))}return!0},triggerValidationEvent:function(){var e=this,t=null,n=e.sessAttrs.invalid,i=[];for(var a in n){if(t=n[a])break;i.push(a)}for(var r in i)delete n[i[r]];t?e.handler?e.handler.trigger("pgadmin-session:model:invalid",t,e,e.handler):e.trigger("pgadmin-session:invalid",t,e):e.handler?e.handler.trigger("pgadmin-session:model:valid",e,e.handler):e.trigger("pgadmin-session:valid",e.sessChanged(),e)},onModelChange:function(e){var t=this;if(this.trackChanges&&e instanceof a.Node.Model){var n=t.objFindInSession(e,"added");n>=0?(t.handler||t).trigger("pgadmin-session:changed",t,e):(n=t.objFindInSession(e,"changed"),"sessChanged"in e?n>=0?(e.sessChanged()||t.sessAttrs.changed.splice(n,1),(t.handler||t).trigger("pgadmin-session:changed",t,e)):e.sessChanged()&&(t.sessAttrs.changed.push(e),(t.handler||t).trigger("pgadmin-session:changed",t,e)):((t.handler||t).trigger("pgadmin-session:changed",t,e),n<0&&t.sessAttrs.changed.push(e)))}return!0},checkDuplicateWithModel:function(e){if(!("keys"in e)||o.default.isEmpty(e.keys))return!0;var t=this,n={},i={};o.default.each(e.keys,(function(t){n[t]=e.get(t),t in e._previous_key_values?i[t]=e._previous_key_values[t]:i[t]=e.previous(t)})),e._previous_key_values={};var a=t.where(i);if(1==a.length){var r=a[0];t.clearInvalidSessionIfModelValid(r)}var s=t.where(n);if(0==s.length)t.clearInvalidSessionIfModelValid(e);else{if(1!=s.length){var l="Duplicate rows.";return setTimeout((function(){o.default.each(s,(function(e){t.trigger("pgadmin-session:model:invalid",l,e,t.handler),e.trigger("pgadmin-session:model:duplicate",e,l)}))}),10),!1}t.clearInvalidSessionIfModelValid(e),t.clearInvalidSessionIfModelValid(s[0])}return!0},clearInvalidSessionIfModelValid:function(e){var t=e.errorModel.attributes,n=this.sessAttrs.invalid;e.trigger("pgadmin-session:model:unique",e),0==o.default.size(t)?delete n[e.cid]:n[e.cid]=t[Object.keys(t)[0]]}}),a.Events=o.default.extend({},n.Events),a}.apply(t,i),void 0===a||(e.exports=a)},89021:(e,t,n)=>{var i,a,r=s(n(55958)),o=s(n(96486));function s(e){return e&&e.__esModule?e:{default:e}}i=[n(91669),n(55112)],void 0===(a=function(e,t){return t.Browser=t.Browser||{},o.default.extend(t.Browser,{report_error:function(t,n,i,a){t=o.default.escape(t),n=o.default.escape(n),i=o.default.escape(i);var s='<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"><div class="panel panel-default"><div class="panel-heading" role="tab" id="headingOne"><h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">'+e("Error message")+'</a></h4></div><div id="collapseOne" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingOne"><div class="panel-body" style="overflow: auto;">'+n+"</div></div></div>";null!=i&&""!=i&&(s+='<div class="panel panel-default"><div class="panel-heading" role="tab" id="headingTwo"><h4 class="panel-title"><a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">'+e("Additional info")+'</a></h4></div><div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo"><div class="panel-body" style="overflow: auto;">'+i+"</div></div></div></div>"),s+="</div>",r.default.alert(o.default.unescape(t),s,(function(){a&&a()}))}}),t.Browser.report_error}.apply(t,i))||(e.exports=a)},14497:(e,t,n)=>{var i,a;n(68309),n(32564),n(24812);var r,o=(r=n(96486))&&r.__esModule?r:{default:r};i=[n(55112),n(19755),n(35816)],void 0===(a=function(e,t){var n=e.Browser=e.Browser||{},i=window.wcDocker,a=window.wcIFrame;return e.Browser.Frame=function(e){o.default.extend(this,o.default.pick(e,["name","title","width","height","showTitle","isCloseable","isPrivate","url","icon","onCreate","isLayoutMember","isRenamable"]))},o.default.extend(e.Browser.Frame.prototype,{name:"",title:"",width:300,height:600,showTitle:!0,isClosable:!0,isRenamable:!1,isPrivate:!1,isLayoutMember:!1,url:"",icon:"",panel:null,frame:null,onCreate:null,load:function(e){var r=this;r.panel||e.registerPanelType(this.name,{title:r.title,isPrivate:r.isPrivate,isLayoutMember:r.isLayoutMember,onCreate:function(e){var s;t(e).data("pgAdminName",r.name),e.initSize(r.width,r.height),null===(s=e.showTitle)||void 0===s||s||e.title(!1),e.icon(r.icon),e.closeable(!!r.isCloseable),e.renamable(r.isRenamable);var l=t('<div style="position:absolute;top:0 !important;width:100%;height:100%;display:table;z-index:0;">');e.layout().addItem(l),r.panel=e;var d=new a(l,e);t(e).data("frameInitialized",!1),t(e).data("embeddedFrame",d),""!=r.url&&"about:blank"!=r.url?setTimeout((function(){d.openURL(r.url),t(e).data("frameInitialized",!0),n.Events.trigger("pgadmin-browser:frame:urlloaded:"+r.name,d,r.url,self)}),50):(d.openURL("about:blank"),t(e).data("frameInitialized",!0),n.Events.trigger("pgadmin-browser:frame:urlloaded:"+r.name,d,r.url,self)),r.events&&o.default.isObject(r.events)&&o.default.each(r.events,(function(t,n){t&&o.default.isFunction(t)&&e.on(n,t)})),o.default.each([i.EVENT.UPDATED,i.EVENT.VISIBILITY_CHANGED,i.EVENT.BEGIN_DOCK,i.EVENT.END_DOCK,i.EVENT.GAIN_FOCUS,i.EVENT.LOST_FOCUS,i.EVENT.CLOSED,i.EVENT.BUTTON,i.EVENT.ATTACHED,i.EVENT.DETACHED,i.EVENT.MOVE_STARTED,i.EVENT.MOVE_ENDED,i.EVENT.MOVED,i.EVENT.RESIZE_STARTED,i.EVENT.RESIZE_ENDED,i.EVENT.RESIZED,i.EVENT.SCROLLED],(function(t){e.on(t,r.eventFunc.bind(e,t))})),r.onCreate&&o.default.isFunction(r.onCreate)&&r.onCreate.apply(r,[e,d])}})},eventFunc:function(e){var i=t(this).data("pgAdminName");try{n.Events.trigger("pgadmin-browser:frame",e,this,arguments),n.Events.trigger("pgadmin-browser:frame:"+e,this,arguments),i&&(n.Events.trigger("pgadmin-browser:frame-"+i,e,this,arguments),n.Events.trigger("pgadmin-browser:frame-"+i+":"+e,this,arguments))}catch(e){console.warn(e.stack||e)}}}),e.Browser.Frame}.apply(t,i))||(e.exports=a)},62723:(e,t,n)=>{var i,a;n(82526),n(41817),n(41539),n(32165),n(78783),n(66992),n(33948),n(24812),n(68309),n(69826),n(82772),n(69600),n(2707);var r,o=(r=n(96486))&&r.__esModule?r:{default:r};function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}i=[n(55112),n(19755),n(44092),n(91669)],void 0===(a=function(e,t,n,i){e.Browser=e.Browser||{};var a=e.Browser.MenuItem=function(e){o.default.extend(this,{url:"#",target:"_self",enable:!0},o.default.pick(e,["name","label","priority","module","callback","data","enable","category","target","url","node","checked","below","menu_items"]))};o.default.extend(e.Browser.MenuItem.prototype,{$el:null,generate:function(e,t){return this.create_el(e,t),this.context={name:this.label,disabled:this.is_disabled,callback:this.context_menu_callback.bind(this,t)},this.$el},create_el:function(n,i){if(this.menu_items){o.default.each(this.menu_items,(function(e){e.generate(n,i)}));var a=e.Browser.MenuGroup({label:this.label,id:this.name},this.menu_items);this.$el=a.$el}else{var r=null;null!=this.data&&null!=this.data.data_disabled&&(r=this.data.data_disabled);var s=t("<a></a>",{id:this.name,href:this.url,target:this.target,"data-toggle":"pg-menu",role:"menuitem","data-disabled":r}).data("pgMenu",{module:this.module||e.Browser,cb:this.callback,data:this.data}).addClass("dropdown-item");this.is_disabled=this.disabled(n,i),this.icon?s.append(t("<i></i>",{class:this.icon})):o.default.isUndefined(this.checked)||s.append(t("<i></i>",{class:"fa fa-check "+(this.checked?"":"visibility-hidden")})),s.addClass(this.is_disabled?" disabled":"");var l=t('<span data-test="menu-item-text"></span>').text("  "+this.label);s.append(l);var d=t("<li/>").append(s);o.default.isUndefined(this.below)||!0!==this.below||d.append('<li class="dropdown-divider"></li>'),this.$el=d}},update:function(e,t){this.$el&&!this.$el.find(".dropdown-item").hasClass("disabled")&&this.$el.find(".dropdown-item").addClass("disabled"),this.is_disabled=this.disabled(e,t),this.$el&&!this.is_disabled&&this.$el.find(".dropdown-item").removeClass("disabled"),this.context={name:this.label,disabled:this.is_disabled,callback:this.context_menu_callback.bind(this,t)}},context_menu_callback:function(t){var i,a=this;a.module.callbacks&&a.callback in a.module.callbacks?i=a.module.callbacks[a.callback]:a.callback in a.module&&(i=a.module[a.callback]),i?i.apply(a.module,[a.data,t]):e.Browser.report_error(n.sprintf('Developer Warning: Callback - "%s" not found!',a.cb))},disabled:function(e,t){if(null==this.enable)return!1;if(this.node){if(!e)return!0;if(o.default.isArray(this.node)?-1==o.default.indexOf(this.node,e):this.node!=e._type)return!0}return o.default.isBoolean(this.enable)?!this.enable:o.default.isFunction(this.enable)?!this.enable.apply(this.module,[e,t,this.data]):this.module&&o.default.isBoolean(this.module[this.enable])?!this.module[this.enable]:!(!this.module||!o.default.isFunction(this.module[this.enable]))&&!this.module[this.enable].apply(this.module,[e,t,this.data])},change_checked:function(e){o.default.isUndefined(this.checked)||(this.checked=e,this.checked?this.$el.find(".fa-check").removeClass("visibility-hidden"):this.$el.find(".fa-check").addClass("visibility-hidden"))}}),e.Browser.MenuGroup=function(e,n,i,a){var r,s=o.default.template(['<% if (above) { %><li class="dropdown-divider"></li><% } %>','<li class="dropdown-submenu" role="menuitem">',' <a href="#" class="dropdown-item">','  <% if (icon) { %><i class="<%= icon %>"></i><% } %>',"  <span><%= label %></span>"," </a>",' <ul class="dropdown-menu">'," </ul>","</li>",'<% if (below) { %><li class="dropdown-divider"></li><% } %>'].join("\n")),l={label:e.label,icon:e.icon,above:e.above&&!i,below:e.below},d=t(s(l)),c=d.find(".dropdown-menu"),u={},p=1;for(var f in a=o.default.uniqueId(a+"_sub_"),n.sort((function(e,t){return e.label.localeCompare(t.label)})),n.sort((function(e,t){return e.priority-t.priority})),n)r=n[f],c.append(r.$el),r.is_disabled||(u[a+p]=r.context),p++;var h=0==o.default.size(u);return{$el:d,priority:e.priority||10,label:e.label,above:l.above,below:e.below,is_disabled:h,context:{name:e.label,icon:e.icon,items:u,disabled:h}}},e.Browser.MenuCreator=function(t,n,r,s,l,d,c){var u=!0;if(l&&t[l._type]&&!o.default.isUndefined(t[l._type].showMenu)&&(u=t[l._type].showMenu(l,d)),u){var p,f={common:[]},h=0,m=o.default.uniqueId("ctx_"),g=function e(t){if(t instanceof a)t.$el&&(t.$el.remove(),delete t.$el),t.generate(l,d),(f[t.category||"common"]=f[t.category||"common"]||[]).push(t);else for(var n in t)e(t[n])},v=1;for(h in r)g(r[h]);c=c||{},p=f.common,delete f.common;var b=!0;for(var y in f){var _=f[y],w=s[y]||{label:y,single:!1},C=e.Browser.MenuGroup(w,_,b,m);if(_.length<=1&&!w.single)for(h in b=!1,_)p.push(_[h]);else b=_.below,p.push(C)}p.sort((function(e,t){return e.label.localeCompare(t.label)})),p.sort((function(e,t){return e.priority-t.priority}));var E=o.default.size(p);for(h in p){(d=p[h]).priority=d.priority||10,n.append(d.$el);var k=m+"_"+d.priority+"_"+v;1!=v&&d.above&&!d.is_disabled&&(c[k+"_ma"]="----"),d.is_disabled||(c[k+"_ms"]=d.context),m!=E&&d.below&&!d.is_disabled&&(c[k+"_mz"]="----"),v++}return E>0}(c=c||{})[o.default.uniqueId("ctx_")+"1_1_ms"]={disabled:!0,name:i("No menu available for this object.")}};var r=function e(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,i),this.isLoading=!1};function l(e,n){return this.each((function(){var i=t(this),a=i.data("pg.menu"),o="object"==s(e)&&e;a||i.data("pg.menu",a=new r(this,o)),a.toggle(n)}))}r.DEFAULTS={},r.prototype.toggle=function(t){if(this.$element.closest(".dropdown-item").hasClass("disabled"))return t.preventDefault(),!1;var n=this.$element.data("pgMenu");if(n.cb){var i=n.module&&n.module.callbacks&&n.module.callbacks[n.cb]||n.module&&n.module[n.cb];i?(i.apply(n.module,[n.data,e.Browser.tree.selected()]),t.preventDefault()):e.Browser.report_error('Developer Warning: Callback - "'+n.cb+'" not found!')}};var d=t.fn.button;return t.fn.pgmenu=l,t.fn.pgmenu.Constructor=r,t.fn.pgmenu.noConflict=function(){return t.fn.pgmenu=d,this},t(document).on("click.pg.menu.data-api",'[data-toggle^="pg-menu"]',(function(e){var n=t(e.target);n.hasClass("dropdown-item")||(n=n.closest(".dropdown-item")),l.call(n,"toggle",e)})).on("focus.pg.menu.data-api blur.pg.menu.data-api",'[data-toggle^="pg-menu"]',(function(e){t(e.target).closest(".menu").toggleClass("focus",/^focus(in)?$/.test(e.type))})).on("mouseenter",".dropdown-submenu",(function(e){t(e.currentTarget).removeClass("dropdown-submenu-visible").addClass("dropdown-submenu-visible"),t(e.currentTarget).find(".dropdown-menu").first().addClass("show")})).on("mouseleave",".dropdown-submenu",(function(e){t(e.currentTarget).removeClass("dropdown-submenu-visible"),t(e.currentTarget).find(".dropdown-menu").first().removeClass("show")})).on("hidden.bs.dropdown",(function(e){t(e.target).find(".dropdown-submenu.dropdown-submenu-visible").removeClass("dropdown-submenu-visible").find(".dropdown-menu.show").removeClass("show")})),e.Browser.MenuItem}.apply(t,i))||(e.exports=a)},67507:(e,t,n)=>{var i,a;n(47042),n(68309),n(91038),n(78783),n(82526),n(41817),n(32165),n(79753),n(69070),n(47941),n(57327),n(38880),n(89554),n(54747),n(49337),n(33321),n(24812),n(41539),n(66992),n(33948),n(82772),n(32564),n(69826),n(26699),n(32023),n(23123),n(74916),n(5735),n(83753),n(3843),n(83710);var r=n(92705),o=l(n(55958)),s=l(n(96486));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}i=[n(91669),n(19755),n(55112),n(72316),n(92356),n(61329),n(68363),n(44092),n(7027)],void 0===(a=function(e,t,n,i,a,l,p,f){var h=window.wcDocker,m=13,g=27,v=112;return a.Node?a.Node:(a.Nodes=a.Nodes||{},a.Node=function(){},a.Node.extend=function(e,t){var n,i=this;if(n=function(){return i.apply(this,arguments)},s.default.extend(n,i,s.default.omit(e,"callbacks")),n.callbacks=s.default.extend({},i.callbacks,e.callbacks),null!=t&&!t)return n;var a,r,o=u(s.default.keys(n.callbacks));try{for(o.s();!(a=o.n()).done;){var l=a.value;"function"==typeof n.callbacks[r=l]&&(n.callbacks[r]=n.callbacks[r].bind(n))}}catch(e){o.e(e)}finally{o.f()}return n.Init.apply(n),this.Init.apply(n),n},s.default.extend(n.Browser.Node,i.Events,{type:void 0,label:"",sqlAlterHelp:"",sqlCreateHelp:"",dialogHelp:"",epasHelp:!1,title:function(e,t){return e.label+(t?" - "+t.label:"")},hasId:!0,Init:function(){var t=this;if(!t.node_initialized){if(t.node_initialized=!0,n.Browser.add_menus([{name:"refresh",node:t.type,module:t,applies:["object","context"],callback:"refresh",priority:2,label:e("Refresh..."),icon:"fa fa-sync-alt"}]),t.canEdit&&n.Browser.add_menus([{name:"show_obj_properties",node:t.type,module:t,applies:["object","context"],callback:"show_obj_properties",priority:999,label:e("Properties..."),data:{action:"edit"},icon:"fa fa-edit",enable:s.default.isFunction(t.canEdit)?function(){return!!t.canEdit.apply(t,arguments)}:!!t.canEdit}]),t.canDrop&&(n.Browser.add_menus([{name:"delete_object",node:t.type,module:t,applies:["object","context"],callback:"delete_obj",priority:t.dropPriority,label:t.dropAsRemove?e("Remove %s",t.label):e("Delete/Drop"),data:{url:"drop",data_disabled:e("The selected tree node does not support this option.")},icon:"fa fa-trash-alt",enable:s.default.isFunction(t.canDrop)?function(){return!!t.canDrop.apply(t,arguments)}:!!t.canDrop}]),t.canDropCascade&&n.Browser.add_menus([{name:"delete_object_cascade",node:t.type,module:t,applies:["object","context"],callback:"delete_obj",priority:3,label:e("Drop Cascade"),data:{url:"delete"},icon:"fa fa-trash-alt",enable:s.default.isFunction(t.canDropCascade)?function(){return t.canDropCascade.apply(t,arguments)}:!!t.canDropCascade}])),-1==s.default.indexOf(n.unsupported_nodes,t.type)){var i=function(e){return!("database"!=e._type||!e.allowConn)||"database"!=e._type};n.Browser.add_menus([{name:"show_query_tool",node:t.type,module:t,applies:["context"],callback:"show_query_tool",priority:998,label:e("Query Tool"),icon:"pg-font-icon icon-query_tool",enable:i}]),n.Browser.add_menus([{name:"search_objects",node:t.type,module:n.Tools.SearchObjects,applies:["context"],callback:"show_search_objects",priority:997,label:e("Search Objects..."),icon:"fa fa-search",enable:i}]),n.enable_psql&&n.Browser.add_menus([{name:"show_psql_tool",node:this.type,module:this,applies:["context"],callback:"show_psql_tool",priority:998,label:e("PSQL Tool"),icon:"fas fa-terminal"}])}t.hasScriptTypes&&s.default.isArray(t.hasScriptTypes)&&t.hasScriptTypes.length>0&&s.default.each(t.hasScriptTypes,(function(i){var a=e("%s Script",i.toUpperCase());i=i.toLowerCase(),n.Browser.add_menus([{name:"show_script_"+i,node:t.type,module:t,applies:["object","context"],callback:"show_script",priority:4,label:a,category:e("Scripts"),data:{script:i,data_disabled:e("The selected tree node does not support this option.")},icon:"fa fa-pencil-alt",enable:t.check_user_permission}])}))}},check_user_permission:function(e,t,n){if("server_group"==e._type||"server"==e._type)return!1;if("database"==e._type&&!e.allowConn)return!1;var i=a.tree.getTreeNodeHierarchy(t);return-1==s.default.indexOf(["create","insert","update","delete"],n.script)||(!("role"!=e.type||!i.server.user.can_create_role)||!!(i.server&&(i.server.user.is_superuser||i.server.user.can_create_db)||i.schema&&i.schema.can_create))},addUtilityPanel:function(e,t,n){var i=window.document.body,r=document.createElement("div"),o=n||a.docker;i.insertBefore(r,i.firstChild);var l=screen.width<700?.95*screen.width:.5*screen.width,d=screen.height<500?.95*screen.height:.4*screen.height;s.default.isUndefined(e)||s.default.isNull(e)||(l=e),s.default.isUndefined(t)||s.default.isNull(t)||(d=t);var c=(i.offsetWidth-l)/2,u=(i.offsetHeight-d)/4,p=o.addPanel("utility_props",window.wcDocker.DOCK.FLOAT,void 0,{w:l,h:d,x:c,y:u});return setTimeout((function(){p.moveable(!1)}),0),i.removeChild(r),p},onEventResizeEnded:function(){var e=this.$container.find(".obj_properties").first(),t=e.data("obj-view");t&&t.model&&t.model&&t.model.trigger("pg-browser-resized",{view:t,panel:this,container:e})},registerDockerPanel:function(e,t,n){var i=e||a.docker,r=i.findPanels(t);r&&1==r.length||(r=new a.Panel(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({name:t,showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,canMaximise:!0,content:'<div class="obj_properties container-fluid h-100"></div>'},n)),r.load(i))},registerUtilityPanel:function(t){var n=t||a.docker,i=n.findPanels("utility_props");if(!i||1!=i.length){var r={};r[h.EVENT.RESIZE_ENDED]=this.onEventResizeEnded,(i=new a.Panel({name:"utility_props",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,canMaximise:!0,elContainer:!0,content:'<div class="obj_properties container-fluid h-100"><div role="status" class="pg-panel-message">'+e("Please wait while we fetch information ...")+"</div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow")},events:r})).load(n)}},register_node_panel:function(){var t=a.docker.findPanels("node_props");if(!t||1!=t.length){var n={};n[h.EVENT.RESIZE_ENDED]=this.onEventResizeEnded,(t=new a.Panel({name:"node_props",showTitle:!0,isCloseable:!0,isPrivate:!0,isLayoutMember:!1,canMaximise:!0,elContainer:!0,content:'<div class="obj_properties container-fluid h-100"><div role="status" class="pg-panel-message">'+e("Please wait while we fetch information about the node from the server...")+"</div></div>",onCreate:function(e,t){t.addClass("pg-no-overflow")},events:n})).load(a.docker)}},hasScriptTypes:["create"],canEdit:!0,canDrop:!1,canDropCascade:!1,dropAsRemove:!1,dropPriority:2,selectParentNodeOnDelete:!1,callbacks:{show_obj_properties:function(t,i){var r,l=a.tree,d=t&&t.item||i||l.selected(),c=d?l.itemData(d):void 0,u=this,p=u.title.apply(this,[c]);if(a.Node.register_node_panel(),c){var m=this,g=s.default.isArray(this.parent_type)?function(e){return-1!=s.default.indexOf(m.parent_type,e._type)}:function(e){return m.parent_type==e._type},v=function(){var e,t,i,r,o=window.document.body,s=document.createElement("div");o.insertBefore(s,o.firstChild),e=screen.width<800?n.toPx(s,"95%","width",!0):(e=n.toPx(s,m.width||a.stdW.default+"px","width",!0))<=a.stdW.sm?a.stdW.sm:e<=a.stdW.md?a.stdW.md:a.stdW.lg,t=screen.height<600?n.toPx(s,"95%","height",!0):(t=n.toPx(s,m.height||a.stdH.default+"px","height",!0))<=a.stdH.sm?a.stdH.sm:t<=a.stdH.md?a.stdH.md:a.stdH.lg,i=(o.offsetWidth-e)/2,r=(o.offsetHeight-t)/4,e>window.innerWidth&&(i=0,e=window.innerWidth),t>window.innerHeight&&(r=0,t=window.innerHeight);var l=a.docker.addPanel("node_props",h.DOCK.FLOAT,void 0,{w:e+"px",h:t+"px",x:i+"px",y:r+"px"});return o.removeChild(s),l};if("create"==t.action){if(m.parent_type&&!g(c))for(;d&&l.hasParent(d);){d=l.parent(d);var b=l.itemData(d);if(g(b)){c=b;break}}if(!c||null!=this.parent_type&&!g(c))return;p=e("Create - %s",this.label),"server"==this.type&&(p=e("Register - %s",this.label)),r=v(),setTimeout((function(){u.showProperties(d,c,r,t.action)}),10)}else{if(a.Node.panels&&a.Node.panels[c.id]&&a.Node.panels[c.id].$container)if((r=a.Node.panels[c.id]).$container.attr("action-mode")){var y=e('Are you sure want to stop editing the properties of %s "%s"?');"edit"==t.action&&(y=e('Are you sure want to reset the current changes and re-open the panel for %s "%s"?')),o.default.confirm(e("Edit in progress?"),f.sprintf(y,u.label.toLowerCase(),c.label),(function(){setTimeout((function(){u.showProperties(d,c,r,t.action)}),10)}),null).show()}else setTimeout((function(){u.showProperties(d,c,r,t.action)}),10);else a.Node.panels=a.Node.panels||{},r=a.Node.panels[c.id]=v(),setTimeout((function(){u.showProperties(d,c,r,t.action)}),10)}r.title(p),r.icon("icon-"+this.type),r.focus()}},delete_obj:function(n,i){var r=n||{url:"drop"},l=this,d=a.tree,c=r.item||i||d.selected(),u=c?d.itemData(c):void 0;if(u){l=a.Nodes[u._type];var p,f,h=s.default.unescape(u.label);if("delete"==r.url){if(p=e('Are you sure you want to drop %s "%s" and all the objects that depend on it?',l.label.toLowerCase(),u.label),f=e("DROP CASCADE %s?",l.label),!(s.default.isFunction(l.canDropCascade)?l.canDropCascade.apply(l,[u,c]):l.canDropCascade))return void o.default.error(e('The %s "%s" cannot be dropped.',l.label,u.label),1e4)}else if(l.dropAsRemove?(p=e('Are you sure you want to remove %s "%s"?',l.label.toLowerCase(),u.label),f=e("Remove %s?",l.label)):(p=e('Are you sure you want to drop %s "%s"?',l.label.toLowerCase(),u.label),f=e("Drop %s?",l.label)),!(s.default.isFunction(l.canDrop)?l.canDrop.apply(l,[u,c]):l.canDrop))return void o.default.error(e('The %s "%s" cannot be dropped/removed.',l.label,u.label),1e4);o.default.confirm(f,p,(function(){t.ajax({url:l.generate_url(c,r.url,u,!0),type:"DELETE"}).done((function(e){if(2!=e.success){if(0==e.success)a.report_error(e.errormsg,e.info);else{var t=!0;if(l.selectParentNodeOnDelete){var n=d.parent(c);setTimeout((function(){d.select(n)}),10),t=!1}a.removeTreeNode(c,t)}return!0}o.default.error(e.info,null)})).fail((function(t){var n=t.responseText;if(417==t.status||410==t.status||500==t.status)try{var i=JSON.parse(t.responseText);n=i.info||i.errormsg}catch(e){console.warn(e.stack||e)}a.report_error(e('Error dropping/removing %s: "%s"',l.label,h),n)}))}))}},show_script:function(e,t){var i,r,o=e.script,s=a.tree,l=t||s.selected(),d=l?s.itemData(l):void 0;d&&(i=a.Nodes[d._type],r="insert"==o?"insert_sql":"update"==o?"update_sql":"delete"==o?"delete_sql":"select"==o?"select_sql":"exec"==o?"exec_sql":"sql",n.Tools.SQLEditor.showQueryTool(i.generate_url(l,r,d,!0),l,o))},show_query_tool:function(t,i){var r=a.get_preference("sqleditor","copy_sql_to_query_tool"),o=a.tree,s=i||o.selected(),l=s?o.itemData(s):void 0;if(l)if(r.value&&!l._type.includes("coll-")){var d={script:l._type.toLowerCase(),data_disabled:e("The selected tree node does not support this option.")};a.Node.callbacks.show_script(d)}else n.Tools.SQLEditor.showQueryTool("",s)},show_psql_tool:function(e){var t=e||{},n=a.tree,i=t.item||n.selected(),r=i?n.itemData(i):void 0;a.psql.psql_tool(r,i,!0)},change_server_background:function(e,n){if(e&&n){var i=a.tree.getTreeNodeHierarchy(e).server;if(i)if(-1!==e.path.indexOf(i.id)){var r=i.icon.split(" ")[1]||null,o=i.icon.split(" ")[2]||"";if(r){var s,l="pga_server_"+i._id+"_bgcolor";s="<style id="+l+" type='text/css'> \n",s+="."+l+" .file-label {",s+=" border-radius: 3px; margin-bottom: 2px;",s+=" background: "+r+" !important;} \n",o&&(s+="."+l+" span.file-name {",s+=" color: "+o+" !important;} \n"),s+="</style>",t("#"+l).remove(),t(s).appendTo("head"),a.tree.addCssClass(e,l)}}}},added:function(e,t){-1!==a.tree.getData(e)._type.indexOf("coll-")&&setTimeout((function(){var t=n.Browser.Nodes[a.tree.getData(e).nodes[0]];t.clear_cache.apply(t)}),0),a.Events.trigger("pgadmin:browser:tree:expand-from-previous-tree-state",e),a.Node.callbacks.change_server_background(e,t)},selected:function(e,t,i){var r=i||a,o=r.tree,s=t||o.itemData(e);return n.Browser.enable_disable_menus.apply(r,[e]),s&&r&&"properties"in r.panels&&r.panels.properties&&r.panels.properties.panel&&r.panels.properties.panel.isVisible()&&this.showProperties(e,s,r.panels.properties.panel),a.Events.trigger("pgadmin:browser:tree:update-tree-state",e),!0},removed:function(e){var t=this;setTimeout((function(){t.clear_cache.apply(t,e)}),0)},refresh:function(e,n){var i=this,r=a.tree,o=n&&r.itemData(n);t(a.panels.properties.panel).removeData("node-prop"),a.Events.trigger("pgadmin:browser:tree:refresh",n||a.tree.selected(),{success:function(){i.callbacks.selected.apply(i,[n,o,a])}})},opened:function(e){var t=a.tree,n=a.get_preference("browser","auto_expand_sole_children");if(n&&n.value&&1==t.children(e).length){var i=t.first(e);if(i._loaded)t.open(i);else var r=setInterval((function(){i._loaded&&(t.open(i),o())}),200),o=function(){clearInterval(r)}}a.Events.trigger("pgadmin:browser:tree:update-tree-state",e)},closed:function(e){a.Events.trigger("pgadmin:browser:tree:remove-from-tree-state",e)}},showProperties:function(i,l,d,c){var u=this,p=n.Browser.tree,f=d.$container.find(".obj_properties").first(),b=f.data("obj-view"),y=!0,_=function(e,n){if(!d||"node_props"===d._type)switch(e.which){case g:T(!0);break;case m:if(e.target!==n)return;if(b&&b.model&&b.model.sessChanged()){var i=t(e.target).closest(".obj_properties").find(".pg-prop-btn-group").find("button.btn-primary");k.call(this,b,i)}break;case v:C()}}.bind(d);setTimeout((function(){d.$container.find(".backform-tab").on("keydown",(function(e){_(e,this)}))}),200);var w=function(){var e=p.selected(),n=p.getTreeNodeHierarchy(e);t(this).data("node-prop",n),(0,r.removeNodeView)(f[0]);var o=a.tree.getTreeNodeHierarchy(i);(0,r.getNodeView)(u.type,o,"properties",l,"tab",f[0],this,A)}.bind(d),C=function(){window.open(u.dialogHelp,"pgadmin_help")}.bind(d),E=function(t,n){var i=this.$container.find(".obj_properties").first(),r=i&&i.data("obj-view"),s=this;return a.get_preferences_for_module("browser").confirm_on_properties_close&&y&&r&&r.model?!r.model.sessChanged()||void o.default.confirm(e("Warning"),t,(function(){return setTimeout(function(){n()}.bind(s),50),!0}),(function(){return!0})):(n(),!0)}.bind(d),k=function(n,i){var r=n.model,l=r.toJSON(!0),d=setTimeout((function(){t(".obj_properties").addClass("show_progress")}),1e3);i&&t(i).prop("disabled",!0),l&&!s.default.isEmpty(l)&&r.save({},{attrs:l,validate:!1,cache:!1,wait:!0,success:function(){D.call(),t(".obj_properties").removeClass("show_progress"),clearTimeout(d);var e=a.docker.findPanels("properties")[0],n=a.docker.findPanels("sql")[0],i=a.docker.findPanels("statistics")[0],r=a.docker.findPanels("dependencies")[0],o=a.docker.findPanels("dependents")[0];e&&t(e).removeData("node-prop"),n&&t(n).removeData("node-prop"),i&&t(i).removeData("node-prop"),r&&t(r).removeData("node-prop"),o&&t(o).removeData("node-prop")},error:function(n,a){o.default.pgNotifier("error",a,e("Error saving properties")),t(".obj_properties").removeClass("show_progress"),clearTimeout(d),i&&t(i).prop("disabled",!1)}})}.bind(d),N=function(){c&&"properties"==c&&(c="edit"),this.$container.attr("action-mode",c),this.icon(s.default.isFunction(u.node_image)?u.node_image.apply(u,[l]):u.node_image||"icon-"+u.type),(0,r.removeNodeView)(f[0]);var n=a.tree.getTreeNodeHierarchy(i);(0,r.getNodeView)(u.type,n,c,l,"dialog",f[0],this,A,(function(i){if(i.node){D(i.node,n);var r=a.docker.findPanels("properties")[0],s=a.docker.findPanels("sql")[0],l=a.docker.findPanels("statistics")[0],d=a.docker.findPanels("dependencies")[0],c=a.docker.findPanels("dependents")[0];r&&t(r).removeData("node-prop"),s&&t(s).removeData("node-prop"),l&&t(l).removeData("node-prop"),d&&t(d).removeData("node-prop"),c&&t(c).removeData("node-prop"),0===i.success&&o.default.alert(e("Error"),e(i.errormsg))}}))}.bind(d),T=function(e){s.default.isUndefined(e)||(y=e),this.close()}.bind(d),S=function(e,t,n){var r=this.$container.find(".obj_properties").first().data("obj-view");setTimeout((function(){e.clear_cache.apply(e,i)}),0);try{a.Events.trigger("pgadmin:browser:tree:add",s.default.clone(t||r.model.tnode),s.default.clone(n||r.model.node_info))}catch(e){console.warn(e.stack||e)}T(!1)}.bind(d,u),D=function(e,t,n){var r=l,o=t||s.default.clone(b.model.tnode),d=n||s.default.clone(b.model.node_info);setTimeout((function(){e.clear_cache.apply(e,i)}),0),a.Events.trigger("pgadmin:browser:tree:update",r,o,d,{success:function(e,t,n){a.Events.trigger("pgadmin:browser:node:updated",e,t,n),a.Events.trigger("pgadmin:browser:node:"+t._type+":updated",e,t,n)}}),T(!1)}.bind(d,u),A=N.bind(d);if(c?("create"==c&&(D=S),"properties"!=c?N():w()):(A=function(){setTimeout((function(){u.callbacks.show_obj_properties.apply(u,[{action:"edit",item:i}])}),0)}.bind(d),w()),d.closeable()&&!u.getSchema){d.on(h.EVENT.CLOSING,E.bind(d,e("Changes will be lost. Are you sure you want to close the dialog?"),(function(){d.off(h.EVENT.CLOSING),d.close()})));var x=function(){var e=this.$container.find(".obj_properties").first(),t=e&&e.data("obj-view");t&&t.remove({data:!0,internal:!0,silent:!0})}.bind(d);d.on(h.EVENT.CLOSED,x)}},_find_parent_node:function(e,t,n){if(this.parent_type)if(n=n||e.itemData(t),s.default.isString(this.parent_type)){if(this.parent_type==n._type)return t;for(;e.hasParent(t);)if(t=e.parent(t),n=e.itemData(t),this.parent_type==n._type)return t}else{if(s.default.indexOf(this.parent_type,n._type)>=0)return t;for(;e.hasParent(t);)if(t=e.parent(t),n=e.itemData(t),s.default.indexOf(this.parent_type,n._type)>=0)return t}return null},generate_url:function(e,t,n,i,r,o){var d={create:"obj",drop:"obj",edit:"obj",properties:"obj",statistics:"stats"},c=this,u=-1/0,p=s.default.isUndefined(e)||s.default.isNull(e)?r||{}:a.tree.getTreeNodeHierarchy(e),f=t in d?d[t]:t,h=i&&n._type==c.type?encodeURIComponent(n._id):"";if(c.parent_type)if(s.default.isString(c.parent_type)){var m=p[c.parent_type];m&&(u=m.priority)}else s.default.each(c.parent_type,(function(e){var t=p[e];t&&u<t.priority&&(u=t.priority)}));var g=u;o&&p[o]&&(g=p[o].priority);return l.generate_url(a.URL,p,f,c.type,(function(e){return e.priority<=g||e.priority==u}),h)},Collection:a.DataCollection,Model:a.DataModel,cache:function(e,t,n,i){var a=this.cached=this.cached||{},r=e,o=t&&t[n]&&t[n].priority||0;if(t&&s.default.each(s.default.sortBy(s.default.values(s.default.pickBy(t,(function(e){return e.priority<=o}))),(function(e){return e.priority})),(function(e){r=f.sprintf("%s_%s",r,encodeURI(e._id))})),s.default.isUndefined(i)){var l=a[r];return!s.default.isUndefined(l)&&l.at-Date.now()>3e5&&(l=void 0),l}return a[r]={data:i,at:Date.now(),level:n}},clear_cache:function(e){this.cached={};a.Events.trigger("pgadmin:browser:node:"+this.type+":cache_cleared",e,this)},cache_level:function(e,t){if(e){if(t&&this.type in e)return this.type;if(s.default.isArray(this.parent_type)){for(var n in this.parent_type)if(n in e)return n;return this.type}return this.parent_type}}}),n.Browser.Node)}.apply(t,i))||(e.exports=a)},70242:(e,t,n)=>{var i,a;n(68309),n(24812),n(89554),n(32564),n(69826),n(26699);var r,o=n(73819),s=(r=n(96486))&&r.__esModule?r:{default:r};i=[n(55112),n(19755),n(35816)],void 0===(a=function(e,t){var n=e.Browser=e.Browser||{},i=window.wcDocker;return e.Browser.Panel=function(e){s.default.extend(this,s.default.pick(e,["name","title","width","height","showTitle","isCloseable","isPrivate","isLayoutMember","content","icon","events","onCreate","elContainer","canHide","limit","extraClasses","canMaximise"]))},s.default.extend(e.Browser.Panel.prototype,{name:"",title:"",width:300,height:600,showTitle:!0,isCloseable:!0,isPrivate:!1,isLayoutMember:!0,content:"",icon:"",panel:null,onCreate:null,elContainer:!1,canMaximise:!1,limit:null,extraClasses:null,load:function(e,a){var r=this;r.panel||e.registerPanelType(r.name,{title:r.title,isPrivate:r.isPrivate,limit:r.limit,isLayoutMember:r.isLayoutMember,onCreate:function(e){if(t(e).data("pgAdminName",r.name),e.initSize(r.width,r.height),r.showTitle){var l='<a href="#" tabindex="-1" class="panel-link-heading">'+(a||r.title)+"</a>";e.title(l),""!=r.icon&&e.icon(r.icon)}else e.title(!1);var d=t("<div>",{class:"pg-panel-content"}).append(t(r.content));s.default.isNull("extraClasses")||d.addClass(r.extraClasses),e.maximisable(!!r.canMaximise),e.closeable(!!r.isCloseable),e.layout().addItem(d),r.panel=e,r.events&&s.default.isObject(r.events)&&s.default.each(r.events,(function(t,n){t&&s.default.isFunction(t)&&e.on(n,t)})),s.default.each([i.EVENT.UPDATED,i.EVENT.VISIBILITY_CHANGED,i.EVENT.BEGIN_DOCK,i.EVENT.END_DOCK,i.EVENT.GAIN_FOCUS,i.EVENT.LOST_FOCUS,i.EVENT.CLOSED,i.EVENT.BUTTON,i.EVENT.ATTACHED,i.EVENT.DETACHED,i.EVENT.MOVE_STARTED,i.EVENT.MOVE_ENDED,i.EVENT.MOVED,i.EVENT.RESIZE_STARTED,i.EVENT.RESIZE_ENDED,i.EVENT.RESIZED,i.EVENT.SCROLLED],(function(t){e.on(t,r.eventFunc.bind(e,t))})),r.onCreate&&s.default.isFunction(r.onCreate)&&r.onCreate.apply(r,[e,d]),["dragover","drop"].forEach((function(e){d[0].addEventListener(e,(function(e){e.stopPropagation(),e.preventDefault()}))})),r.elContainer&&(e.pgElContainer=d,d.addClass("pg-el-container"),s.default.each([i.EVENT.RESIZED,i.EVENT.ATTACHED,i.EVENT.DETACHED,i.EVENT.VISIBILITY_CHANGED],(function(t){e.on(t,r.resizedContainer.bind(e))})),r.resizedContainer.apply(e)),"dashboard"!=e._type&&"processes"!=e._type||(0,o.getPanelView)(n.tree,d[0],n,e._type),n.onPreferencesChange("dashboards",(function(){(0,o.getPanelView)(n.tree,d[0],n,e._type)})),n.onPreferencesChange("graphs",(function(){(0,o.getPanelView)(n.tree,d[0],n,e._type)})),s.default.each([i.EVENT.CLOSED,i.EVENT.VISIBILITY_CHANGED],(function(t){e.on(t,r.handleVisibility.bind(e,t))})),n.Events.on("pgadmin-browser:tree:selected",(function(){e.isVisible()&&"properties"!==e._type&&(0,o.getPanelView)(n.tree,d[0],n,e._type)})),n.Events.on("pgadmin:database:connected",(function(){e.isVisible()&&"properties"!==e._type&&(0,o.getPanelView)(n.tree,d[0],n,e._type)})),n.Events.on("pgadmin-browser:tree:refreshing",(function(){e.isVisible()&&"properties"!==e._type&&(0,o.getPanelView)(n.tree,d[0],n,e._type)}))}})},eventFunc:function(e){var i=t(this).data("pgAdminName");try{n.Events.trigger("pgadmin-browser:panel",e,this,arguments),n.Events.trigger("pgadmin-browser:panel:"+e,this,arguments),i&&(n.Events.trigger("pgadmin-browser:panel-"+i,e,this,arguments),n.Events.trigger("pgadmin-browser:panel-"+i+":"+e,this,arguments))}catch(e){console.warn(e.stack||e)}},resizedContainer:function(){var e=this;if(e.pgElContainer&&!e.pgResizeTimeout){if(!e.isVisible())return clearTimeout(e.pgResizeTimeout),void(e.pgResizeTimeout=null);e.pgResizeTimeout=setTimeout((function(){var t=e.width(),n="xs";e.pgResizeTimeout=null,t>=480&&(n="sm"),t>=768&&(n="md"),t>=992&&(n="lg"),t>=1200&&(n="xl"),e.pgElContainer.attr("el",n)}),100)}},handleVisibility:function(e){if(!s.default.isNull(n.tree)){var t=n.docker.findPanels(this._type)[0],i=t.isVisible(),a=t.layout().scene().find(".pg-panel-content");i&&["dashboard","statistics","dependencies","dependents","sql","processes"].includes(t._type)&&"panelVisibilityChanged"==e&&(0,o.getPanelView)(n.tree,a[0],n,this._type),"panelClosed"==e&&"dashboard"==t._type&&(0,o.getPanelView)(n.tree,a[0],n,this._type,!1)}}}),e.Browser.Panel}.apply(t,i))||(e.exports=a)}}]);