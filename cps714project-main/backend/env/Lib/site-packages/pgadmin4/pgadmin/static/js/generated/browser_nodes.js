"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[619],{68054:(e,t,a)=>{var o,n;a(88674),a(41539);var r=a(53495),c=l(a(95507)),i=l(a(2832));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-cast"]||(a.Browser.Nodes["coll-cast"]=a.Browser.Collection.extend({node:"cast",label:e("Casts"),type:"coll-cast",columns:["name","description"]})),o.Nodes.cast||(a.Browser.Nodes.cast=a.Browser.Node.extend({parent_type:"database",type:"cast",sqlAlterHelp:"sql-altercast.html",sqlCreateHelp:"sql-createcast.html",dialogHelp:t("help.static",{filename:"cast_dialog.html"}),canDrop:!0,canDropCascade:!0,label:e("Cast"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_cast_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"},enable:o.Nodes.database.is_conn_allow},{name:"create_cast_on_coll",node:"coll-cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}},{name:"create_cast",node:"cast",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Cast..."),icon:"wcTabIcon icon-cast",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new c.default({getTypeOptions:function(){return(0,r.getNodeAjaxOptions)("get_type",a,e,t)},getFuncOptions:function(a,n){return new Promise((function(r,c){var l=(0,i.default)(),s=o.Nodes.cast.generate_url.apply(o.Nodes.cast,[null,"get_functions",t,!1,e]),d={srctyp:a,trgtyp:n};null!=a&&""!=a&&null!=n&&""!=n?l.post(s,d).then((function(e){d=e.data.data,r(d)})).catch((function(e){c(e)})):r(d=[])}))}})}})),o.Nodes["coll-cast"]}.apply(t,o))||(e.exports=n)},70764:(e,t,a)=>{var o,n;a(68309);var r,c=(r=a(2267))&&r.__esModule?r:{default:r},i=a(53495);o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-event_trigger"]||(a.Browser.Nodes["coll-event_trigger"]=a.Browser.Collection.extend({node:"event_trigger",label:e("Event Trigger"),type:"coll-event_trigger",columns:["name","eventowner","comment"],canDrop:!0,canDropCascade:!1})),o.Nodes.event_trigger||(a.Browser.Nodes.event_trigger=a.Browser.Node.extend({parent_type:"database",type:"event_trigger",sqlAlterHelp:"sql-altereventtrigger.html",sqlCreateHelp:"sql-createeventtrigger.html",dialogHelp:t("help.static",{filename:"event_trigger_dialog.html"}),label:e("Event Trigger"),hasSQL:!0,hasDepends:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_event_trigger_on_coll",node:"coll-event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"event_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"}},{name:"create_event_trigger",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Event Trigger..."),icon:"wcTabIcon icon-event_trigger",data:{action:"create"},enable:o.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var a=this;return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t)},function_names:function(){return(0,i.getNodeAjaxOptions)("fopts",a,e,t,{cacheLevel:"trigger_function"})}},{eventowner:o.serverInfo[e.server._id].user.name})}})),o.Nodes["coll-event_trigger"]}.apply(t,o))||(e.exports=n)},85132:(e,t,a)=>{var o,n;a(68309);var r=a(53495),c=l(a(31099)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-extension"]||(a.Browser.Nodes["coll-extension"]=a.Browser.Collection.extend({node:"extension",label:e("Extensions"),type:"coll-extension",columns:["name","owner","comment"]})),o.Nodes.extension||(a.Browser.Nodes.extension=a.Browser.Node.extend({parent_type:"database",type:"extension",sqlAlterHelp:"sql-alterextension.html",sqlCreateHelp:"sql-createextension.html",dialogHelp:t("help.static",{filename:"extension_dialog.html"}),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,label:e("Extension"),Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_extension_on_coll",node:"coll-extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"extension",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"}},{name:"create_extension",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Extension..."),icon:"wcTabIcon icon-extension",data:{action:"create"},enable:o.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var o=a.Browser.Nodes.extension;return new c.default({role:function(){return(0,r.getNodeListByName)("role",e,t)},extensionsList:function(){return(0,r.getNodeAjaxOptions)("avails",o,e,t,{cacheLevel:"server"},(function(e){var t=[];return e&&i.default.isArray(e)&&i.default.each(e,(function(e){t.push({label:e.name,value:e.name,data:e})})),t}))},schemaList:function(){return(0,r.getNodeListByName)("schema",e,t)}})}})),o.Nodes["coll-extension"]}.apply(t,o))||(e.exports=n)},22911:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=a(13350),l=(r=a(78947))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-foreign_server"]||(a.Browser.Nodes["coll-foreign_server"]=a.Browser.Collection.extend({node:"foreign_server",label:e("Foreign Servers"),type:"coll-foreign_server",columns:["name","fsrvowner","description"]})),o.Nodes.foreign_server||(a.Browser.Nodes.foreign_server=a.Browser.Node.extend({parent_type:"foreign_data_wrapper",type:"foreign_server",sqlAlterHelp:"sql-alterserver.html",sqlCreateHelp:"sql-createserver.html",dialogHelp:t("help.static",{filename:"foreign_server_dialog.html"}),label:e("Foreign Server"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_foreign_server_on_coll",node:"coll-foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}},{name:"create_foreign_server",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Server..."),icon:"wcTabIcon icon-foreign_server",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new l.default((function(o){return(0,i.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)}},{fsrvowner:o.serverInfo[e.server._id].user.name})}})),o.Nodes["coll-foreign_server"]}.apply(t,o))||(e.exports=n)},41221:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=(r=a(6519))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-user_mapping"]||(a.Browser.Nodes["coll-user_mapping"]=a.Browser.Collection.extend({node:"user_mapping",label:e("User Mappings"),type:"coll-user_mapping",columns:["name"]})),o.Nodes.user_mapping||(a.Browser.Nodes.user_mapping=a.Browser.Node.extend({parent_type:"foreign_server",type:"user_mapping",sqlAlterHelp:"sql-alterusermapping.html",sqlCreateHelp:"sql-createusermapping.html",dialogHelp:t("help.static",{filename:"user_mapping_dialog.html"}),label:e("User Mapping"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_user_mapping_on_coll",node:"coll-user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"user_mapping",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}},{name:"create_user_mapping",node:"foreign_server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("User Mapping..."),icon:"wcTabIcon icon-user_mapping",data:{action:"create"}}]))},getSchema:function(e,t){return new i.default({role:function(){return(0,c.getNodeListByName)("role",e,t,{},(function(){return!0}),(function(e){return e.unshift({label:"CURRENT_USER",value:"CURRENT_USER",image:"icon-role"},{label:"PUBLIC",value:"PUBLIC",image:"icon-role"}),e}))}},{name:o.serverInfo[e.server._id].user.name})}})),o.Nodes["coll-user_mapping"]}.apply(t,o))||(e.exports=n)},81902:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=a(13350),l=(r=a(2542))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-foreign_data_wrapper"]||(a.Nodes["coll-foreign_data_wrapper"]=a.Collection.extend({node:"foreign_data_wrapper",label:e("Foreign Data Wrappers"),type:"coll-foreign_data_wrapper",columns:["name","fdwowner","description"]})),a.Nodes.foreign_data_wrapper||(a.Nodes.foreign_data_wrapper=a.Node.extend({parent_type:"database",type:"foreign_data_wrapper",sqlAlterHelp:"sql-alterforeigndatawrapper.html",sqlCreateHelp:"sql-createforeigndatawrapper.html",dialogHelp:t("help.static",{filename:"foreign_data_wrapper_dialog.html"}),label:e("Foreign Data Wrapper"),hasSQL:!0,hasDepends:!0,canDrop:!0,canDropCascade:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_foreign_data_wrapper_on_coll",node:"coll-foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"foreign_data_wrapper",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"}},{name:"create_foreign_data_wrapper",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Data Wrapper..."),icon:"wcTabIcon icon-foreign_data_wrapper",data:{action:"create"},enable:a.Nodes.database.is_conn_allow}]))},getSchema:function(e,t){var o=this;return new l.default((function(a){return(0,i.getNodePrivilegeRoleSchema)(o,e,t,a)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},fdwhan:function(){return(0,c.getNodeAjaxOptions)("get_handlers",o,e,t)},fdwvalue:function(){return(0,c.getNodeAjaxOptions)("get_validators",o,e,t)}},{fdwowner:a.serverInfo[e.server._id].user.name})}})),a.Nodes.foreign_data_wrapper}.apply(t,o))||(e.exports=n)},24858:(e,t,a)=>{var o,n,r,c=a(53495),i=(r=a(82382))&&r.__esModule?r:{default:r},l=a(13350);o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-language"]||(a.Nodes["coll-language"]=a.Collection.extend({node:"language",label:e("Languages"),type:"coll-language",columns:["name","lanowner","description"]})),a.Nodes.language||(a.Nodes.language=a.Node.extend({parent_type:"database",type:"language",sqlAlterHelp:"sql-alterlanguage.html",sqlCreateHelp:"sql-createlanguage.html",dialogHelp:t("help.static",{filename:"language_dialog.html"}),label:e("Language"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_language_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"},enable:a.Nodes.database.is_conn_allow},{name:"create_language_on_coll",node:"coll-language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}},{name:"create_language",node:"language",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Language..."),icon:"wcTabIcon icon-language",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new i.default((function(o){return(0,l.getNodePrivilegeRoleSchema)(a,e,t,o)}),{lan_functions:function(){return(0,c.getNodeAjaxOptions)("get_functions",a,e,t)},templates_data:function(){return(0,c.getNodeAjaxOptions)("get_templates",a,e,t)},role:function(){return(0,c.getNodeListByName)("role",e,t)}},{node_info:e.server})}})),a.Nodes["coll-language"]}.apply(t,o))||(e.exports=n)},9989:(e,t,a)=>{var o,n,r,c=a(53495),i=(r=a(32683))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-publication"]||(a.Nodes["coll-publication"]=a.Collection.extend({node:"publication",label:e("Publications"),type:"coll-publication",columns:["name","pubowner","pubtable","all_table"]})),a.Nodes.publication||(a.Nodes.publication=a.Node.extend({parent_type:"database",type:"publication",sqlAlterHelp:"sql-alterpublication.html",sqlCreateHelp:"sql-createpublication.html",dialogHelp:t("help.static",{filename:"publication_dialog.html"}),label:e("Publication"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_publication_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"},enable:a.Nodes.database.canCreate},{name:"create_publication_on_coll",node:"coll-publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"}},{name:"create_publication",node:"publication",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Publication..."),icon:"wcTabIcon icon-publication",data:{action:"create"}}]))},getSchema:function(e,t){var a=this;return new i.default({publicationTable:function(){return(0,c.getNodeAjaxOptions)("get_tables",a,e,t)},role:function(){return(0,c.getNodeListByName)("role",e,t)}},{node_info:e.server})}})),a.Nodes["coll-publication"]}.apply(t,o))||(e.exports=n)},41836:(e,t,a)=>{var o,n,r,c=(r=a(77498))&&r.__esModule?r:{default:r};o=[a(91669),a(55112),a(80864),a(35766),a(34439)],void 0===(n=function(e,t,a,o){return a.Nodes["coll-aggregate"]||(t.Browser.Nodes["coll-aggregate"]=t.Browser.Collection.extend({node:"aggregate",label:e("Aggregates"),type:"coll-aggregate",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.aggregate||(t.Browser.Nodes.aggregate=o.SchemaChildNode.extend({type:"aggregate",sqlAlterHelp:"sql-alteraggregate.html",sqlCreateHelp:"sql-createaggregate.html",label:e("Aggregate"),collection_type:"coll-aggregate",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new c.default}})),a.Nodes.aggregate}.apply(t,o))||(e.exports=n)},84027:(e,t,a)=>{var o,n,r,c=(r=a(17729))&&r.__esModule?r:{default:r};o=[a(91669),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-catalog_object_column"]||(t.Browser.Nodes["coll-catalog_object_column"]=t.Browser.Collection.extend({node:"catalog_object_column",label:e("catalog_object_column"),type:"coll-catalog_object_column",columns:["attname","attnum","cltype","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.catalog_object_column||(t.Browser.Nodes.catalog_object_column=t.Browser.Node.extend({parent_type:"catalog_object",type:"catalog_object_column",label:e("catalog_object_column"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new c.default}})),a.Nodes.catalog_object_column}.apply(t,o))||(e.exports=n)},34139:(e,t,a)=>{var o,n,r,c=(r=a(4039))&&r.__esModule?r:{default:r};o=[a(91669),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-catalog_object"]||(t.Browser.Nodes["coll-catalog_object"]=t.Browser.Collection.extend({node:"catalog_object",label:e("Catalog Objects"),type:"coll-catalog_object",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.catalog_object||(t.Browser.Nodes.catalog_object=t.Browser.Node.extend({parent_type:"catalog",type:"catalog_object",label:e("Catalog Object"),hasSQL:!1,hasScriptTypes:[],hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new c.default}})),a.Nodes.catalog_object}.apply(t,o))||(e.exports=n)},12936:(e,t,a)=>{var o,n;a(68309);var r,c=(r=a(45219))&&r.__esModule?r:{default:r},i=a(53495);o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-collation"]||(a.Browser.Nodes["coll-collation"]=a.Browser.Collection.extend({node:"collation",label:e("Collations"),type:"coll-collation",columns:["name","owner","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.collation||(a.Browser.Nodes.collation=n.SchemaChildNode.extend({type:"collation",sqlAlterHelp:"sql-altercollation.html",sqlCreateHelp:"sql-createcollation.html",dialogHelp:t("help.static",{filename:"collation_dialog.html"}),label:e("Collation"),collection_type:"coll-collation",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_collation_on_coll",node:"coll-collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"collation",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_collation",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Collation..."),icon:"wcTabIcon icon-collation",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var n=a.Browser.Nodes.collation;return new c.default({rolesList:function(){return(0,i.getNodeListByName)("role",e,t,{cacheLevel:"server"})},schemaList:function(){return(0,i.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},collationsList:function(){return(0,i.getNodeAjaxOptions)("get_collations",n,e,t,{cacheLevel:"server"})}},{owner:o.serverInfo[e.server._id].user.name,schema:"schema"in e?e.schema.label:""})}})),o.Nodes.collation}.apply(t,o))||(e.exports=n)},74397:(e,t,a)=>{var o,n,r,c=(r=a(42887))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(55112),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return o.Nodes["coll-domain_constraints"]||(a.Browser.Nodes["coll-domain_constraints"]=a.Browser.Collection.extend({node:"domain_constraints",label:e("Domain Constraints"),type:"coll-domain_constraints",columns:["name","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:!1})),o.Nodes.domain_constraints||(a.Browser.Nodes.domain_constraints=o.Node.extend({type:"domain_constraints",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-alterdomain.html",dialogHelp:t("help.static",{filename:"domain_constraint_dialog.html"}),label:e("Domain Constraints"),collection_type:"coll-domain_constraints",hasSQL:!0,hasDepends:!0,parent_type:["domain"],Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_domain_on_coll",node:"coll-domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain_constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain_constraints",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Domain Constraint..."),icon:"wcTabIcon icon-domain_constraints",data:{action:"create",check:!1},enable:"canCreate"}]))},canDrop:n.isTreeItemOfChildOfSchema,getSchema:function(){return new c.default}})),o.Nodes.domain}.apply(t,o))||(e.exports=n)},23488:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=(r=a(2890))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-domain"]||(a.Nodes["coll-domain"]=a.Collection.extend({node:"domain",label:e("Domains"),type:"coll-domain",columns:["name","owner","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.domain||(a.Nodes.domain=o.SchemaChildNode.extend({type:"domain",sqlAlterHelp:"sql-alterdomain.html",sqlCreateHelp:"sql-createdomain.html",dialogHelp:t("help.static",{filename:"domain_dialog.html"}),label:e("Domain"),collection_type:"coll-domain",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_domain_on_coll",node:"coll-domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"domain",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_domain",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Domain..."),icon:"wcTabIcon icon-domain",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var o=this;return new i.default({role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"})},basetype:function(){return(0,c.getNodeAjaxOptions)("get_types",o,e,t,{cacheNode:"type"})},collation:function(){return(0,c.getNodeAjaxOptions)("get_collations",o,e,t,{cacheLevel:"database",cacheNode:"schema"})}},{owner:a.serverInfo[e.server._id].user.name,schema:t.label,basensp:t.label})}})),a.Nodes.domain}.apply(t,o))||(e.exports=n)},26853:(e,t,a)=>{var o,n;a(68309);var r=a(53495),c=a(25570),i=a(13350),l=d(a(88577)),s=d(a(96486));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-foreign_table"]||(a.Nodes["coll-foreign_table"]=a.Collection.extend({node:"foreign_table",label:e("Foreign Tables"),type:"coll-foreign_table",columns:["name","owner","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.foreign_table||(a.Nodes.foreign_table=o.SchemaChildNode.extend({type:"foreign_table",sqlAlterHelp:"sql-alterforeigntable.html",sqlCreateHelp:"sql-createforeigntable.html",dialogHelp:t("help.static",{filename:"foreign_table_dialog.html"}),label:e("Foreign Table"),collection_type:"coll-foreign_table",hasSQL:!0,hasDepends:!0,width:a.stdW.md+"px",hasScriptTypes:["create","select","insert","update","delete"],parent_type:["schema"],Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_foreign_table_on_coll",node:"coll-foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"foreign_table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_foreign_table",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign Table..."),icon:"wcTabIcon icon-foreign_table",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var o=this;return new l.default((function(a){return(0,i.getNodePrivilegeRoleSchema)("",e,t,a)}),(function(){return(0,c.getNodeVariableSchema)(o,e,t,!1,!1)}),(function(o){return(0,r.getNodeAjaxOptions)("get_columns",a.Nodes.foreign_table,e,t,{urlParams:o,useCache:!1})}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},foreignServers:function(){return(0,r.getNodeAjaxOptions)("get_foreign_servers",o,e,t,{cacheLevel:"database"},(function(e){return s.default.reject(e,(function(e){return""==e.label||null==e.label}))}))},tables:function(){return(0,r.getNodeAjaxOptions)("get_tables",o,e,t,{cacheLevel:"database"})},nodeInfo:e,nodeData:t,pgBrowser:a},{owner:a.serverInfo[e.server._id].user.name,basensp:e.schema?e.schema.label:""})}})),a.Nodes.foreign_table}.apply(t,o))||(e.exports=n)},46592:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=(r=a(94715))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-fts_configuration"]||(a.Browser.Nodes["coll-fts_configuration"]=a.Browser.Collection.extend({node:"fts_configuration",label:e("FTS Configurations"),type:"coll-fts_configuration",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.fts_configuration||(a.Browser.Nodes.fts_configuration=n.SchemaChildNode.extend({type:"fts_configuration",sqlAlterHelp:"sql-altertsconfig.html",sqlCreateHelp:"sql-createtsconfig.html",dialogHelp:t("help.static",{filename:"fts_configuration_dialog.html"}),label:e("FTS Configuration"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_configuration_on_schema",node:"schema",module:this,category:"create",priority:4,applies:["object","context"],callback:"show_obj_properties",label:e("FTS Configuration..."),icon:"wcTabIcon icon-fts_configuration",data:{action:"create"},enable:"canCreate"},{name:"create_fts_configuration_on_coll",module:this,priority:4,node:"coll-fts_configuration",applies:["object","context"],callback:"show_obj_properties",category:"create",label:e("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"},{name:"create_fts_configuration",node:"fts_configuration",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Configuration..."),data:{action:"create"},icon:"wcTabIcon icon-fts_configuration",enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new i.default({role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListById)(o.Nodes.schema,e,t)},parsers:function(){return(0,c.getNodeAjaxOptions)("parsers",a,e,t)},copyConfig:function(){return(0,c.getNodeAjaxOptions)("copyConfig",a,e,t)},tokens:function(){return(0,c.getNodeAjaxOptions)("tokens",a,e,t,{urlWithId:!0})},dictionaries:function(){return(0,c.getNodeAjaxOptions)("dictionaries",a,e,t,{cacheLevel:"fts_configuration",cacheNode:"fts_configuration"})}},{owner:o.serverInfo[e.server._id].user.name,schema:t._id})}})),o.Nodes["coll-fts_configuration"]}.apply(t,o))||(e.exports=n)},80699:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=(r=a(66322))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-fts_dictionary"]||(a.Browser.Nodes["coll-fts_dictionary"]=a.Browser.Collection.extend({node:"fts_dictionary",label:e("FTS Dictionaries"),type:"coll-fts_dictionary",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.fts_dictionary||(a.Browser.Nodes.fts_dictionary=n.SchemaChildNode.extend({type:"fts_dictionary",sqlAlterHelp:"sql-altertsdictionary.html",sqlCreateHelp:"sql-createtsdictionary.html",dialogHelp:t("help.static",{filename:"fts_dictionary_dialog.html"}),label:e("FTS Dictionary"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_dictionary_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"},{name:"create_fts_dictionary_on_coll",node:"coll-fts_dictionary",module:this,applies:["object","context"],priority:4,callback:"show_obj_properties",category:"create",label:e("FTS Dictionary..."),data:{action:"create"},icon:"wcTabIcon icon-fts_dictionary",enable:"canCreate"},{name:"create_fts_dictionary",node:"fts_dictionary",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Dictionary..."),icon:"wcTabIcon icon-fts_dictionary",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new i.default({role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListById)(o.Nodes.schema,e,t)},fts_template:function(){return(0,c.getNodeAjaxOptions)("fetch_templates",a,e,t,{cacheNode:"fts_template"})}},{owner:o.serverInfo[e.server._id].user.name,schema:t._id})}})),o.Nodes.fts_dictionary}.apply(t,o))||(e.exports=n)},49191:(e,t,a)=>{var o,n,r,c=(r=a(16541))&&r.__esModule?r:{default:r},i=a(53495);o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-fts_parser"]||(a.Browser.Nodes["coll-fts_parser"]=a.Browser.Collection.extend({node:"fts_parser",label:e("FTS Parsers"),type:"coll-fts_parser",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.fts_parser||(a.Browser.Nodes.fts_parser=n.SchemaChildNode.extend({type:"fts_parser",sqlAlterHelp:"sql-altertsparser.html",sqlCreateHelp:"sql-createtsparser.html",dialogHelp:t("help.static",{filename:"fts_parser_dialog.html"}),label:e("FTS Parser"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_parser_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"},{name:"create_fts_parser_on_coll",node:"coll-fts_parser",applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},module:this,enable:"canCreate"},{name:"create_fts_parser",node:"fts_parser",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Parser..."),icon:"wcTabIcon icon-fts_parser",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var n=a.Browser.Nodes.fts_parser;return new c.default({prsstartList:function(){return(0,i.getNodeAjaxOptions)("start_functions",n,e,t,{cacheLevel:"database"})},prstokenList:function(){return(0,i.getNodeAjaxOptions)("token_functions",n,e,t,{cacheLevel:"database"})},prsendList:function(){return(0,i.getNodeAjaxOptions)("end_functions",n,e,t,{cacheLevel:"database"})},prslextypeList:function(){return(0,i.getNodeAjaxOptions)("lextype_functions",n,e,t,{cacheLevel:"database"})},prsheadlineList:function(){return(0,i.getNodeAjaxOptions)("headline_functions",n,e,t,{cacheLevel:"database"})},schemaList:function(){return(0,i.getNodeListById)(o.Nodes.schema,e,t,{cacheLevel:"database"})}},{schema:e.schema._id})}})),o.Nodes["coll-fts_parser"]}.apply(t,o))||(e.exports=n)},63193:(e,t,a)=>{var o,n,r,c=(r=a(13653))&&r.__esModule?r:{default:r},i=a(53495);o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-fts_template"]||(a.Browser.Nodes["coll-fts_template"]=a.Browser.Collection.extend({node:"fts_template",label:e("FTS Templates"),type:"coll-fts_template",columns:["name","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.fts_template||(a.Browser.Nodes.fts_template=n.SchemaChildNode.extend({type:"fts_template",sqlAlterHelp:"sql-altertstemplate.html",sqlCreateHelp:"sql-createtstemplate.html",dialogHelp:t("help.static",{filename:"fts_template_dialog.html"}),label:e("FTS Template"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_fts_template_on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template_on_coll",node:"coll-fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"},{name:"create_fts_template",node:"fts_template",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("FTS Template..."),icon:"wcTabIcon icon-fts_template",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(e,t){var n=a.Browser.Nodes.fts_template;return new c.default({initFunctionList:function(){return(0,i.getNodeAjaxOptions)("get_init",n,e,t,{cacheLevel:"database"})},lexisFunctionList:function(){return(0,i.getNodeAjaxOptions)("get_lexize",n,e,t,{cacheLevel:"database"})},schemaList:function(){return(0,i.getNodeListById)(o.Nodes.schema,e,t)}},{schema:e.schema._id})}})),o.Nodes.fts_template}.apply(t,o))||(e.exports=n)},34888:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=(r=a(72654))&&r.__esModule?r:{default:r},l=a(13350),s=a(25570);o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-function"]||(a.Nodes["coll-function"]=a.Collection.extend({node:"function",label:e("Functions"),type:"coll-function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.function||(a.Nodes.function=o.SchemaChildNode.extend({type:"function",sqlAlterHelp:"sql-alterfunction.html",sqlCreateHelp:"sql-createfunction.html",dialogHelp:t("help.static",{filename:"function_dialog.html"}),label:e("Function"),collection_type:"coll-function",hasSQL:!0,hasDepends:!0,width:a.stdW.md+"px",hasStatistics:!0,hasScriptTypes:["create","select"],Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_function_on_coll",node:"coll-function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Function..."),icon:"wcTabIcon icon-function",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var o=this;return new i.default((function(a){return(0,l.getNodePrivilegeRoleSchema)(o,e,t,a)}),(function(){return(0,s.getNodeVariableSchema)(o,e,t,!1,!1)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListById)(a.Nodes.schema,e,t,{cacheLevel:"database"})},getTypes:function(){return(0,c.getNodeAjaxOptions)("get_types",o,e,t)},getLanguage:function(){return(0,c.getNodeAjaxOptions)("get_languages",o,e,t)},getSupportFunctions:function(){return(0,c.getNodeAjaxOptions)("get_support_functions",o,e,t,{cacheNode:"function"})}},{node_info:e},{type:a.Nodes.function.type},{funcowner:a.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"sql"})}})),a.Nodes.function}.apply(t,o))||(e.exports=n)},78467:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=(r=a(72654))&&r.__esModule?r:{default:r},l=a(13350),s=a(25570);o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-procedure"]||(a.Browser.Nodes["coll-procedure"]=a.Browser.Collection.extend({node:"procedure",label:e("Procedures"),type:"coll-procedure",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.procedure||(a.Browser.Nodes.procedure=n.SchemaChildNode.extend({type:"procedure",sqlAlterHelp:"sql-alterprocedure.html",sqlCreateHelp:"sql-createprocedure.html",dialogHelp:t("help.static",{filename:"procedure_dialog.html"}),label:e("Procedure"),collection_type:"coll-procedure",hasSQL:!0,hasDepends:!0,hasStatistics:!0,hasScriptTypes:["create","exec"],width:o.stdW.md+"px",Init:function(){this.proc_initialized||(this.proc_initialized=!0,o.add_menus([{name:"create_procedure_on_coll",node:"coll-procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!1},enable:"canCreateProc"},{name:"create_procedure",node:"procedure",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!0},enable:"canCreateProc"},{name:"create_procedure",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Procedure..."),icon:"wcTabIcon icon-procedure",data:{action:"create",check:!0},enable:"canCreateProc"}]))},canCreateProc:function(e,t){var a=o.tree.getTreeNodeHierarchy(t);return!("catalog"in a)&&("server"in a&&("ppas"==a.server.server_type||"pg"==a.server.server_type&&a.server.version>=11e4))},getSchema:function(e,t){var a=this;return new i.default((function(o){return(0,l.getNodePrivilegeRoleSchema)(a,e,t,o)}),(function(){return(0,s.getNodeVariableSchema)(a,e,t,!1,!1)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListById)(o.Nodes.schema,e,t,{cacheLevel:"database"})},getTypes:function(){return(0,c.getNodeAjaxOptions)("get_types",a,e,t)},getLanguage:function(){return(0,c.getNodeAjaxOptions)("get_languages",a,e,t)},getSupportFunctions:function(){return(0,c.getNodeAjaxOptions)("get_support_functions",a,e,t,{cacheNode:"function"})}},{node_info:e},{type:o.Nodes.procedure.type},{funcowner:o.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null,lanname:"ppas"!=e.server.server_type?"sql":"edbspl"})}})),o.Nodes.procedure}.apply(t,o))||(e.exports=n)},93090:(e,t,a)=>{var o,n;a(68309);var r=d(a(11057)),c=a(53495),i=a(25570),l=a(13350),s=d(a(96486));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-trigger_function"]||(a.Nodes["coll-trigger_function"]=a.Collection.extend({node:"trigger_function",label:e("Trigger functions"),type:"coll-trigger_function",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.trigger_function||(a.Nodes.trigger_function=o.SchemaChildNode.extend({type:"trigger_function",sqlAlterHelp:"plpgsql-trigger.html",sqlCreateHelp:"plpgsql-trigger.html",dialogHelp:t("help.static",{filename:"trigger_function_dialog.html"}),label:e("Trigger function"),collection_type:"coll-trigger_function",canEdit:function(e,t){var o=a.tree.findNodeByDomElement(t);return!(!o||"trigger"===o.parentNode.getData()._type)},hasSQL:!0,showMenu:function(e,t){return this.canEdit(e,t)},hasDepends:!0,hasStatistics:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_trigger_function_on_coll",node:"coll-trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"trigger_function",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_function",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger function..."),icon:"wcTabIcon icon-trigger_function",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var o=this;return new r.default((function(a){return(0,l.getNodePrivilegeRoleSchema)("",e,t,a)}),(function(){return(0,i.getNodeVariableSchema)(o,e,t,!1,!1)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListById)(a.Nodes.schema,e,t,{cacheLevel:"database"})},language:function(){return(0,c.getNodeAjaxOptions)("get_languages",o,e,t,{noCache:!0},(function(e){return s.default.reject(e,(function(e){return"sql"==e.label}))}))},nodeInfo:e},{funcowner:a.serverInfo[e.server._id].user.name,pronamespace:e.schema?e.schema._id:null})}})),a.Nodes.trigger_function}.apply(t,o))||(e.exports=n)},41789:(e,t,a)=>{var o,n,r,c=(r=a(84231))&&r.__esModule?r:{default:r};o=[a(91669),a(55112),a(80864),a(35766),a(34439)],void 0===(n=function(e,t,a,o){return a.Nodes["coll-operator"]||(t.Browser.Nodes["coll-operator"]=t.Browser.Collection.extend({node:"operator",label:e("Operators"),type:"coll-operator",columns:["name","owner","description"],canDrop:!1,canDropCascade:!1,canSelect:!1})),a.Nodes.operator||(t.Browser.Nodes.operator=o.SchemaChildNode.extend({type:"operator",sqlAlterHelp:"sql-alteroperator.html",sqlCreateHelp:"sql-createoperator.html",label:e("Operator"),collection_type:"coll-operator",hasSQL:!0,hasDepends:!1,canDrop:!1,canDropCascade:!1,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(){return new c.default}})),a.Nodes.operator}.apply(t,o))||(e.exports=n)},70601:(e,t,a)=>{var o,n,r,c=(r=a(31740))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-edbfunc"]||(a.Nodes["coll-edbfunc"]=a.Collection.extend({node:"edbfunc",label:e("Functions"),type:"coll-edbfunc",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.edbfunc||(a.Nodes.edbfunc=a.Node.extend({type:"edbfunc",dialogHelp:t("help.static",{filename:"edbfunc_dialog.html"}),label:e("Function"),collection_type:"coll-edbfunc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,model:a.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text",mode:["properties"]},{id:"oid",label:e("OID"),cell:"string",type:"text",mode:["properties"]},{id:"funcowner",label:e("Owner"),cell:"string",type:"text",readonly:!0}]}),getSchema:function(){return new c.default({},{name:"sysfunc"})}})),a.Nodes.edbfunc}.apply(t,o))||(e.exports=n)},89752:(e,t,a)=>{var o,n;a(68309);var r=i(a(31740)),c=i(a(96486));function i(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(55112),a(80864),a(70601),a(34439)],void 0===(n=function(e,t,a,o,n){return o.Nodes["coll-edbproc"]||(a.Browser.Nodes["coll-edbproc"]=a.Browser.Collection.extend({node:"edbproc",label:e("Procedures"),type:"coll-edbproc",columns:["name","funcowner","description"],hasStatistics:!0,canDrop:!1,canDropCascade:!1})),o.Nodes.edbproc||(a.Browser.Nodes.edbproc=o.Node.extend({type:"edbproc",dialogHelp:t("help.static",{filename:"edbproc_dialog.html"}),label:e("Procedure"),collection_type:"coll-edbproc",hasDepends:!0,canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.proc_initialized||(this.proc_initialized=!0)},canDrop:!1,canDropCascade:!1,model:n.model.extend({defaults:c.default.extend({},n.model.prototype.defaults,{lanname:"edbspl"}),isVisible:function(){return"sysfunc"!=this.name&&"sysproc"==this.name},validate:function(){return null}}),getSchema:function(){return new r.default({},{name:"sysproc"})}})),o.Nodes.edbproc}.apply(t,o))||(e.exports=n)},83114:(e,t,a)=>{var o,n,r,c=(r=a(86333))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-edbvar"]||(a.Nodes["coll-edbvar"]=a.Collection.extend({node:"edbvar",label:e("Variables"),type:"coll-edbvar",columns:["name","funcowner","description"],canDrop:!1,canDropCascade:!1})),a.Nodes.edbvar||(a.Nodes.edbvar=a.Node.extend({type:"edbvar",dialogHelp:t("help.static",{filename:"edbvar_dialog.html"}),label:e("Function"),collection_type:"coll-edbvar",canEdit:!1,hasSQL:!0,hasScriptTypes:[],parent_type:["package"],Init:function(){this.initialized||(this.initialized=!0)},canDrop:!1,canDropCascade:!1,getSchema:function(){return new c.default}})),a.Nodes.edbvar}.apply(t,o))||(e.exports=n)},31277:(e,t,a)=>{var o,n,r,c=(r=a(55869))&&r.__esModule?r:{default:r},i=a(13350),l=a(53495);o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-package"]||(a.Nodes["coll-package"]=a.Collection.extend({node:"package",label:e("Packages"),type:"coll-package",columns:["name","owner","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.package||(a.Nodes.package=o.SchemaChildNode.extend({type:"package",epasHelp:!0,dialogHelp:t("help.static",{filename:"package_dialog.html"}),label:e("Package"),collection_type:"coll-package",hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_package_on_coll",node:"coll-package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"package",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_package",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Package..."),icon:"wcTabIcon icon-package",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},canCreate:function(e,t,o){if(o&&!o.check)return!0;var n=a.tree.getTreeNodeHierarchy(t),r=n.server;return(!r||"pg"!==r.server_type)&&null==n.catalog},getSchema:function(e,t){var o=a.Nodes.package;return new c.default((function(a){return(0,i.getNodePrivilegeRoleSchema)(o,e,t,a)}),{schemas:function(){return(0,l.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},node_info:e},{schema:e.schema.label})}})),a.Nodes.package}.apply(t,o))||(e.exports=n)},12137:(e,t,a)=>{var o,n;a(4723),a(74916),a(21249),a(68309);var r,c=a(53495),i=a(13350),l=(r=a(87184))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-sequence"]||(a.Nodes["coll-sequence"]=a.Collection.extend({node:"sequence",label:e("Sequences"),type:"coll-sequence",columns:["name","seqowner","comment"],hasStatistics:!0,canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.sequence||(a.Nodes.sequence=o.SchemaChildNode.extend({type:"sequence",sqlAlterHelp:"sql-altersequence.html",sqlCreateHelp:"sql-createsequence.html",dialogHelp:t("help.static",{filename:"sequence_dialog.html"}),label:e("Sequence"),collection_type:"coll-sequence",hasSQL:!0,hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_sequence_on_coll",node:"coll-sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"sequence",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_sequence",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Sequence..."),icon:"wcTabIcon icon-sequence",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){var o=this;return new l.default((function(a){return(0,i.getNodePrivilegeRoleSchema)(o,e,t,a)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListByName)("schema",e,t,{},(function(e){return!e.label.match(/^pg_/)}))},allTables:function(){return(0,c.getNodeListByName)("table",e,t,{includeItemKeys:["_id"]})},getColumns:function(o){return(0,c.getNodeAjaxOptions)("get_columns",a.Nodes.table,e,t,{urlParams:o,useCache:!1},(function(e){return e.map((function(e){return{value:e.name,image:"icon-column",label:e.name}}))}))}},{seqowner:a.serverInfo[e.server._id].user.name,schema:t.label})}})),a.Nodes.sequence}.apply(t,o))||(e.exports=n)},18227:(e,t,a)=>{var o,n;a(68309);var r,c=(r=a(70539))&&r.__esModule?r:{default:r};o=[a(91669),a(80864),a(34439)],void 0===(n=function(e,t){return t.Nodes["coll-catalog"]||(t.Nodes["coll-catalog"]=t.Collection.extend({node:"catalog",label:e("Catalogs"),type:"coll-catalog",columns:["name","namespaceowner","description"],canDrop:!1,canDropCascade:!1})),t.Nodes.catalog||(t.Nodes.catalog=t.Node.extend({parent_type:"database",type:"catalog",label:e("Catalog"),hasSQL:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0)},getSchema:function(e){return new c.default({namespaceowner:t.serverInfo[e.server._id].user.name})}})),t.Nodes.catalog}.apply(t,o))||(e.exports=n)},35766:(e,t,a)=>{function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}a(4129),a(41539),a(78783),a(66992),a(33948),a(69070),a(38880),a(82526),a(41817),a(32165),Object.defineProperty(t,"__esModule",{value:!0}),t.SchemaChildNode=void 0;var n=i(a(67507)),r=i(a(69110));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function i(e){if(e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var a={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=n?Object.getOwnPropertyDescriptor(e,r):null;i&&(i.get||i.set)?Object.defineProperty(a,r,i):a[r]=e[r]}return a.default=e,t&&t.set(e,a),a}var l=n.extend({parent_type:["schema","catalog"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema,canCreate:r.childCreateMenuEnabled},!1);t.SchemaChildNode=l},39629:(e,t,a)=>{var o,n;a(68309);var r,c=(r=a(72941))&&r.__esModule?r:{default:r},i=a(13350),l=a(53495);o=[a(91669),a(28008),a(19755),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-schema"]||(o.Nodes["coll-schema"]=o.Collection.extend({node:"schema",label:e("Schemas"),type:"coll-schema",columns:["name","namespaceowner","description"]})),o.Nodes.schema||(o.Nodes.schema=o.Node.extend({parent_type:"database",type:"schema",sqlAlterHelp:"sql-alterschema.html",sqlCreateHelp:"sql-createschema.html",dialogHelp:t("help.static",{filename:"schema_dialog.html"}),label:e("Schema"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_schema_on_coll",node:"coll-schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"}},{name:"create_schema",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Schema..."),icon:"wcTabIcon icon-schema",data:{action:"create"},enable:"can_create_schema"}]))},can_create_schema:function(e){return o.Nodes.database.is_conn_allow.call(this,e)},getSchema:function(e,t){var a=o.Nodes.schema;return new c.default((function(o){return(0,i.getNodePrivilegeRoleSchema)(a,e,t,o)}),{roles:function(){return(0,l.getNodeListByName)("role",e,t,{cacheLevel:"database"})},server_info:o.serverInfo[e.server._id]},{namespaceowner:o.serverInfo[e.server._id].user.name})}}),o.tableChildTreeNodeHierarchy=function(e){return o.tree.getTreeNodeHierarchy(e)}),o.Nodes.schema}.apply(t,o))||(e.exports=n)},69110:(e,t,a)=>{var o;a(69070),Object.defineProperty(t,"__esModule",{value:!0}),t.childCreateMenuEnabled=function(e,t,a){if(a&&!a.check)return!0;var o=n.tree.findNodeByDomElement(t);return!!o&&o.anyFamilyMember((function(e){return"schema"===e.getData()._type}))},t.isTreeItemOfChildOfSchema=function(e,t){var a=n.tree.findNodeByDomElement(t);return!!a&&r(a)},t.isTreeNodeOfSchemaChild=r;var n=((o=a(55112))&&o.__esModule?o:{default:o}).default.Browser;function r(e){return e.anyParent((function(e){return"schema"===e.getData()._type}))}},35951:(e,t,a)=>{var o,n;a(82772),a(68309);var r=a(53495),c=l(a(45037)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,l){return o.Nodes["coll-synonym"]||(a.Browser.Nodes["coll-synonym"]=a.Browser.Collection.extend({node:"synonym",label:e("Synonyms"),type:"coll-synonym",columns:["name","owner","is_public_synonym"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),o.Nodes.synonym||(a.Browser.Nodes.synonym=n.SchemaChildNode.extend({type:"synonym",epasHelp:!0,dialogHelp:t("help.static",{filename:"synonym_dialog.html"}),label:e("Synonym"),collection_type:"coll-synonym",hasSQL:!0,hasDepends:!0,parent_type:["schema","catalog"],Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_synonym_on_coll",node:"coll-synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"synonym",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_synonym",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Synonym..."),icon:"wcTabIcon icon-synonym",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},getSchema:function(e,t){var a=this;return new c.default({role:function(){return(0,r.getNodeListByName)("role",e,t)},schema:function(){return(0,r.getNodeListByName)("schema",e,t,{cacheLevel:"database",cacheNode:"database"})},synobjschema:function(){return(0,r.getNodeListByName)("schema",e,t,{},(function(e){return e&&-1==i.default.indexOf(["pg_catalog","sys","dbo","pgagent","information_schema","dbms_job_procedure"],e.label)}))},getTargetObjectOptions:function(o,n){return(0,r.getNodeAjaxOptions)("get_target_objects",a,e,t,{urlParams:{trgTyp:o,trgSchema:n},useCache:!1})}},e,{owner:o.serverInfo[e.server._id].user.name,schema:t.label,synobjschema:t.label})},canCreate:function(e,t,a){if(a&&!a.check)return!0;var n=o.tree.getTreeNodeHierarchy(t),r=n.server;return(!r||"pg"!==r.server_type)&&null==n.catalog}})),o.Nodes.synonym}.apply(t,o))||(e.exports=n)},31946:(e,t,a)=>{var o,n;a(82772);var r,c=a(68376),i=(r=a(96486))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o){return a.Nodes["coll-column"]||(a.Nodes["coll-column"]=a.Collection.extend({node:"column",label:e("Columns"),type:"coll-column",columns:["name","atttypid","description"],canDrop:o.isTreeItemOfChildOfSchema,canDropCascade:!1})),a.Nodes.column||(a.Nodes.column=a.Node.extend({parent_type:["table","view","mview"],collection_type:["coll-table","coll-view","coll-mview"],type:"column",label:e("Column"),hasSQL:!0,sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-altertable.html",dialogHelp:t("help.static",{filename:"column_dialog.html"}),canDrop:function(e,t){var o=a.tree.findNodeByDomElement(t);return!!o&&o.anyParent((function(e){return"table"===e.getData()._type&&!e.anyParent((function(e){return"catalog"===e.getData()._type}))}))},hasDepends:!0,hasStatistics:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_column_on_coll",node:"coll-column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column",node:"column",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_column_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Column..."),icon:"wcTabIcon icon-column",data:{action:"create",check:!0},enable:"canCreate"}]))},getSchema:function(e,t){return(0,c.getNodeColumnSchema)(e,t,a)},canCreate:function(e,t,o){if(o&&!o.check)return!0;for(var n=a.tree,r=t,c=e,l=[];r;){if(i.default.indexOf(["schema"],c._type)>-1)return!0;if(i.default.indexOf(["view","coll-view","mview","coll-mview"],c._type)>-1){l.push(c._type);break}l.push(c._type),c=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(i.default.indexOf(l,"catalog")>-1||i.default.indexOf(l,"coll-view")>-1||i.default.indexOf(l,"coll-mview")>-1||i.default.indexOf(l,"mview")>-1||i.default.indexOf(l,"view")>-1)}})),a.Nodes.column}.apply(t,o))||(e.exports=n)},77485:(e,t,a)=>{var o,n;a(32564);var r=a(53495),c=l(a(90927)),i=l(a(55958));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,l){return n.Nodes["coll-compound_trigger"]||(o.Browser.Nodes["coll-compound_trigger"]=o.Browser.Collection.extend({node:"compound_trigger",label:e("Compound Triggers"),type:"coll-compound_trigger",columns:["name","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),n.Nodes.compound_trigger||(o.Browser.Nodes.compound_trigger=n.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"compound_trigger",label:e("Compound Trigger"),hasSQL:!0,hasDepends:!0,width:n.stdW.sm+"px",epasHelp:!0,dialogHelp:t("help.static",{filename:"compound_trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_compound_trigger_on_coll",node:"coll-compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"create_compound_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"},{name:"enable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"enable_compound_trigger",category:"connect",priority:3,label:e("Enable compound trigger"),icon:"fa fa-check",enable:"canCreate_with_compound_trigger_enable"},{name:"disable_compound_trigger",node:"compound_trigger",module:this,applies:["object","context"],callback:"disable_compound_trigger",category:"drop",priority:3,label:e("Disable compound trigger"),icon:"fa fa-times",enable:"canCreate_with_compound_trigger_disable"},{name:"create_compound_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Compound Trigger..."),icon:"wcTabIcon icon-compound_trigger",data:{action:"create",check:!0,data_disabled:e("This option is only available on EPAS servers.")},enable:"canCreate"}]))},callbacks:{enable_compound_trigger:function(e){var t=e||{},o=n.tree,r=t.item||o.selected(),c=r?o.itemData(r):void 0;if(!c)return!1;var l=c;a.ajax({url:this.generate_url(r,"enable",c,!0),type:"PUT",data:{is_enable_trigger:"O"},dataType:"json"}).done((function(e){1==e.success&&(i.default.success(e.info),o.removeIcon(r),l.icon="icon-compound_trigger",o.addIcon(r,{icon:l.icon}),o.unload(r),o.setInode(!1),o.deselect(r),setTimeout((function(){o.select(r)}),10))})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),o.unload(r)}))},disable_compound_trigger:function(t){var o=t||{},r=n.tree,c=o.item||r.selected(),l=c?r.itemData(c):void 0;if(!l)return!1;var s=l;a.ajax({url:this.generate_url(c,"enable",l,!0),type:"PUT",data:{is_enable_trigger:"D"},dataType:"json"}).done((function(e){1==e.success&&(i.default.success(e.info),r.removeIcon(c),s.icon="icon-compound_trigger-bad",r.addIcon(c,{icon:s.icon}),r.unload(c),r.setInode(!1),r.deselect(c),setTimeout((function(){r.select(c)}),10))})).fail((function(t,a,o){i.default.pgRespErrorNotify(t,o,e("Disable compound trigger failed")),r.unload(c)}))}},canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new c.default({columns:function(){return(0,r.getNodeListByName)("column",e,t,{cacheLevel:"column"})}},e)},canCreate:function(e,t,a){if(a&&!a.check)return!0;var o=n.tree.getTreeNodeHierarchy(t),r=o.server;return(!r||!("pg"===r.server_type||r.version<12e4))&&null==o.catalog},canCreate_with_compound_trigger_enable:function(e,t,a){return!("view"in n.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger-bad"===e.icon&&this.canCreate.apply(this,[e,t,a]))},canCreate_with_compound_trigger_disable:function(e,t,a){return!("view"in n.tree.getTreeNodeHierarchy(t))&&("icon-compound_trigger"===e.icon&&this.canCreate.apply(this,[e,t,a]))}})),n.Nodes.compound_trigger}.apply(t,o))||(e.exports=n)},54544:(e,t,a)=>{var o,n;a(32564),a(82772);var r=l(a(90954)),c=l(a(55958)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,l){return n.Nodes.check_constraint||(o.Browser.Nodes.check_constraint=n.Node.extend({type:"check_constraint",label:e("Check"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"check_dialog.html"}),hasSQL:!0,hasDepends:!0,parent_type:["table","partition"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_check_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Check..."),icon:"wcTabIcon icon-check_constraint",data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_check_constraint",node:"check_constraint",module:this,applies:["object","context"],callback:"validate_check_constraint",category:"validate",priority:4,label:e("Validate check constraint"),icon:"fa fa-link",enable:"is_not_valid",data:{action:"edit",check:!0}}]))},is_not_valid:function(e,t,a){return!!this.canCreate(e,t,a)&&(e&&!e.valid)},callbacks:{validate_check_constraint:function(e){var t=e||{},o=n.tree,r=t.item||o.selected(),i=r?o.itemData(r):void 0;if(i){var l=i;a.ajax({url:this.generate_url(r,"validate",i,!0),type:"GET"}).done((function(e){1==e.success&&(c.default.success(e.info),o.removeIcon(r),l.valid=!0,l.icon="icon-check_constraint",o.addIcon(r,{icon:l.icon}),setTimeout((function(){o.deselect(r)}),10),setTimeout((function(){o.select(r)}),100))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),o.unload(r)}))}return!1}},canDrop:l.isTreeItemOfChildOfSchema,getSchema:function(){return new r.default},canCreate:function(e,t,a){if(a&&!a.check)return!0;for(var o=n.tree,r=t,c=e,l=[];r;){if(i.default.indexOf(["schema"],c._type)>-1)return!0;l.push(c._type),c=(r=o.hasParent(r)?o.parent(r):null)?o.itemData(r):null}return i.default.indexOf(l,"catalog")<=-1}})),n.Nodes.check_constraint}.apply(t,o))||(e.exports=n)},38617:(e,t,a)=>{var o,n;a(82772);var r,c=a(51008),i=(r=a(96486))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes.exclusion_constraint||(a.Browser.Nodes.exclusion_constraint=o.Node.extend({type:"exclusion_constraint",label:e("Exclusion constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"exclusion_constraint_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],url_jump_after_node:"schema",width:o.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_exclusion_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Exclusion constraint..."),icon:"wcTabIcon icon-exclusion_constraint",data:{action:"create",check:!0},enable:"canCreate"}]))},is_not_valid:function(e){return e&&!e.valid},getSchema:function(e,t){return(0,c.getNodeExclusionConstraintSchema)(e,t,a.Browser)},canCreate:function(e,t,a){if(a&&!a.check)return!0;for(var n=o.tree,r=t,c=e,l=[],s=!1,d=!1;r;){if(s||"table"!=c._type&&"partition"!=c._type||(s=!0,"is_partitioned"in c&&c.is_partitioned&&(d=!0)),i.default.indexOf(["schema"],c._type)>-1)return!d;l.push(c._type),c=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(i.default.indexOf(l,"catalog")>-1)&&!d}})),o.Nodes.exclusion_constraint}.apply(t,o))||(e.exports=n)},98185:(e,t,a)=>{var o,n;a(32564),a(82772);var r=a(12387),c=l(a(55958)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o,n){return n.Nodes.foreign_key||(o.Browser.Nodes.foreign_key=n.Node.extend({type:"foreign_key",label:e("Foreign key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"foreign_key_dialog.html"}),hasSQL:!0,parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,hasDepends:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_foreign_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Foreign key..."),icon:"wcTabIcon icon-foreign_key",data:{action:"create",check:!0},enable:"canCreate"},{name:"validate_foreign_key",node:"foreign_key",module:this,applies:["object","context"],callback:"validate_foreign_key",category:"validate",priority:4,label:e("Validate foreign key"),icon:"fa fa-link",enable:"is_not_valid"}]))},is_not_valid:function(e){return e&&!e.valid},callbacks:{validate_foreign_key:function(e){var t=e||{},o=n.tree,r=t.item||o.selected(),i=r?o.itemData(r):void 0;if(i){var l=i;a.ajax({url:this.generate_url(r,"validate",i,!0),type:"GET"}).done((function(e){1==e.success&&(c.default.success(e.info),o.removeIcon(r),l.valid=!0,l.icon="icon-foreign_key",o.addIcon(r,{icon:l.icon}),setTimeout((function(){o.deselect(r)}),10),setTimeout((function(){o.select(r)}),100))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),o.unload(r)}))}return!1}},getSchema:function(e,t){return(0,r.getNodeForeignKeySchema)(e,t,o.Browser)},canCreate:function(e,t,a){if(a&&!a.check)return!0;for(var o=n.tree,r=t,c=e,l=[],s=!1,d=!1,p=o.getTreeNodeHierarchy(r).server.version;r;){if(s||"table"!=c._type&&"partition"!=c._type||(s=!0,"is_partitioned"in c&&c.is_partitioned&&p<11e4&&(d=!0)),i.default.indexOf(["schema"],c._type)>-1)return!d;l.push(c._type),c=(r=o.hasParent(r)?o.parent(r):null)?o.itemData(r):null}return!(i.default.indexOf(l,"catalog")>-1)&&!d}})),n.Nodes.foreign_key}.apply(t,o))||(e.exports=n)},96031:(e,t,a)=>{var o,n;a(82526),a(41817),a(41539),a(32165),a(78783),a(66992),a(33948),a(82772);var r=a(53495),c=l(a(56542)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes.primary_key||(a.Browser.Nodes.primary_key=o.Node.extend({type:"primary_key",label:e("Primary key"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"primary_key_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_primary_key_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Primary key"),icon:"wcTabIcon icon-primary_key",data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,a){var n=arguments;if(a&&!a.check)return!0;for(var r=o.tree,c=t,l=e,d=[],p=!1,u=!1,_=r.getTreeNodeHierarchy(c).server.version;c;){if(p||"table"!=l._type&&"partition"!=l._type||(p=!0,"is_partitioned"in l&&l.is_partitioned&&_<11e4&&(u=!0)),i.default.indexOf(["schema"],l._type)>-1){var f=function(){if(u)return{v:!1};var e=r.children(n[1],!1),t=!1;return i.default.each(e,(function(e){a=o.tree.itemData(e),t||"primary_key"!=a._type||(t=!0)})),{v:!t}}();if("object"===s(f))return f.v}d.push(l._type),l=(c=r.hasParent(c)?r.parent(c):null)?r.itemData(c):null}return!(i.default.indexOf(d,"catalog")>-1)&&!u},getSchema:function(e,t){return new c.default({columns:function(){return(0,r.getNodeListByName)("column",e,t)},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},index:function(){return(0,r.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})}},e)}})),o.Nodes.primary_key}.apply(t,o))||(e.exports=n)},43435:(e,t,a)=>{var o,n;a(82772);var r=a(53495),c=l(a(33093)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(55112),a(80864),a(34439)],void 0===(n=function(e,t,a,o){return o.Nodes.unique_constraint||(a.Browser.Nodes.unique_constraint=o.Node.extend({type:"unique_constraint",label:e("Unique constraint"),collection_type:"coll-constraints",sqlAlterHelp:"ddl-alter.html",sqlCreateHelp:"ddl-constraints.html",dialogHelp:t("help.static",{filename:"unique_constraint_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Index size")],parent_type:["table","partition"],canDrop:!0,canDropCascade:!0,url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_unique_constraint_on_coll",node:"coll-constraints",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Unique constraint"),icon:"wcTabIcon icon-unique_constraint",data:{action:"create",check:!0},enable:"canCreate"}]))},canCreate:function(e,t,a){if(a&&!a.check)return!0;for(var n=o.tree,r=t,c=e,l=[],s=!1,d=!1,p=o.tree.getTreeNodeHierarchy(r).server.version;r;){if(s||"table"!=c._type&&"partition"!=c._type||(s=!0,"is_partitioned"in c&&c.is_partitioned&&p<11e4&&(d=!0)),i.default.indexOf(["schema"],c._type)>-1)return!d;l.push(c._type),c=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(i.default.indexOf(l,"catalog")>-1)&&!d},getSchema:function(e,t){return new c.default({columns:function(){return(0,r.getNodeListByName)("column",e,t)},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},index:function(){return(0,r.getNodeListByName)("index",e,t,{jumpAfterNode:"schema"})}},e)}})),o.Nodes.unique_constraint}.apply(t,o))||(e.exports=n)},88194:(e,t,a)=>{var o,n;o=[a(91669),a(55112),a(80864),a(34439),a(43435),a(54544),a(98185),a(38617),a(96031)],void 0===(n=function(e,t,a){return a.Nodes["coll-constraints"]||(t.Browser.Nodes["coll-constraints"]=t.Browser.Collection.extend({node:"constraints",label:e("Constraints"),type:"coll-constraints",columns:["name","comment"],canDrop:!0,canDropCascade:!0})),a.Nodes.constraints||(t.Browser.Nodes.constraints=a.Node.extend({type:"constraints",label:e("Constraints"),collection_type:"coll-constraints",parent_type:["table","partition"],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([]))}})),a.Nodes.constraints}.apply(t,o))||(e.exports=n)},83134:(e,t,a)=>{var o,n;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a(4129),a(41539),a(78783),a(66992),a(33948),a(69070),a(38880),a(82526),a(41817),a(32165),a(82772);var c,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var c=o?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(a,n,c):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(a(13051)),l=a(53495),s=(c=a(96486))&&c.__esModule?c:{default:c};function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}o=[a(91669),a(28008),a(55112),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return o.Nodes["coll-index"]||(a.Browser.Nodes["coll-index"]=a.Browser.Collection.extend({node:"index",label:e("Indexes"),type:"coll-index",columns:["name","description"],hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Index size")],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.index||(a.Browser.Nodes.index=o.Node.extend({parent_type:["table","view","mview","partition"],collection_type:["coll-table","coll-view"],sqlAlterHelp:"sql-alterindex.html",sqlCreateHelp:"sql-createindex.html",dialogHelp:t("help.static",{filename:"index_dialog.html"}),type:"index",label:e("Index"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,width:o.stdW.md+"px",statsPrettifyFields:[e("Size"),e("Index size")],url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_index_on_coll",node:"coll-index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index",node:"index",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_index_onMatView",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Index..."),icon:"wcTabIcon icon-index",data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema,canCreate:function(e,t,a){if(a&&!a.check)return!0;for(var n=o.tree,r=t,c=e,i=[],l=!1,d=!1,p=n.getTreeNodeHierarchy(r).server.version;r;){if(!l&&s.default.indexOf(["table","partition"],c._type)>-1&&(l=!0,"is_partitioned"in c&&c.is_partitioned&&p<11e4&&(d=!0)),s.default.indexOf(["schema"],c._type)>-1)return!d;i.push(c._type),c=(r=n.hasParent(r)?n.parent(r):null)?n.itemData(r):null}return!(s.default.indexOf(i,"catalog")>-1)&&!d},getSchema:function(e,t){var o=a.Browser.Nodes.index;return new i.default((function(){return(0,i.getColumnSchema)(o,e,t)}),{tablespaceList:function(){return(0,l.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},amnameList:function(){return(0,l.getNodeAjaxOptions)("get_access_methods",o,e,t,{jumpAfterNode:"schema"})},columnList:function(){return(0,l.getNodeListByName)("column",e,t,{})}},{node_info:e},{amname:"btree"})}})),o.Nodes.index}.apply(t,o))||(e.exports=n)},50926:(e,t,a)=>{var o,n;a(82772),a(32564);var r=a(62270),c=l(a(55958)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(69110),a(44092),a(34439)],void 0===(n=function(e,t,a,o,n,l,s){return n.Nodes["coll-partition"]||(o.Browser.Nodes["coll-partition"]=o.Browser.Collection.extend({node:"partition",label:e("Partitions"),type:"coll-partition",columns:["name","schema","partition_scheme","partition_value","is_partitioned","description"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),n.Nodes.partition||(o.Browser.Nodes.partition=n.Node.extend({parent_type:"table",collection_type:"coll-partition",type:"partition",label:e("Partition"),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Total Size"),e("Indexes size"),e("Table size"),e("TOAST table size"),e("Tuple length"),e("Dead tuple length"),e("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:t("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create"],width:"650px",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"truncate_table",node:"partition",module:this,applies:["object","context"],callback:"truncate_table",category:e("Truncate"),priority:3,label:e("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"partition",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:e("Truncate"),priority:3,label:e("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"partition",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:e("Trigger(s)"),priority:4,label:e("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable",data:{data_disabled:e("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"partition",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:e("Reset Statistics"),icon:"fa fa-chart-bar",enable:"canCreate"},{name:"detach_partition",node:"partition",module:this,applies:["object","context"],callback:"detach_partition",priority:2,label:e("Detach Partition"),icon:"fa fa-remove"},{name:"count_table_rows",node:"partition",module:n.Nodes.table,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:e("Count Rows"),enable:!0}]))},generate_url:function(e,t,a,o,r){return-1==i.default.indexOf(["stats","statistics","dependency","dependent","reset","get_relations","get_oftype","get_attach_tables"],t)?n.Node.generate_url.apply(this,arguments):("statistics"==t&&(t="stats"),r=i.default.isUndefined(e)||i.default.isNull(e)?r||{}:n.tree.getTreeNodeHierarchy(e),s.sprintf("table/%s/%s/%s/%s/%s/%s",encodeURIComponent(t),encodeURIComponent(r.server_group._id),encodeURIComponent(r.server._id),encodeURIComponent(r.database._id),encodeURIComponent(r.partition.schema_id),encodeURIComponent(r.partition._id)))},on_done:function(e,t,a,o){1==e.success&&(c.default.success(e.info),a.removeIcon(o),t.icon="icon-partition",a.addIcon(o,{icon:t.icon}),a.unload(o),a.setInode(o),a.deselect(o),setTimeout((function(){a.select(o)}),10))},canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema,callbacks:{enable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"O"}])},disable_triggers_on_table:function(e){this.callbacks.set_triggers.apply(this,[e,{is_enable_trigger:"D"}])},set_triggers:function(e,t){var o=e||{},r=n.tree,i=o.item||r.selected(),l=i?r.itemData(i):void 0;if(!l)return!1;a.ajax({url:this.generate_url(i,"set_trigger",l,!0),type:"PUT",data:t,dataType:"json"}).done((function(e){1==e.success&&(c.default.success(e.info),r.unload(i),r.setInode(i),r.deselect(i),setTimeout((function(){r.select(i)}),10))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),r.unload(i)}))},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate:function(t,o){var r=t||{},i=this,l=n.tree,s=r.item||l.selected(),d=s?l.itemData(s):void 0;if(!d)return!1;c.default.confirm(e("Truncate Table"),e("Are you sure you want to truncate table %s?",d.label),(function(){var e=d;a.ajax({url:i.generate_url(s,"truncate",d,!0),type:"PUT",data:o,dataType:"json"}).done((function(t){i.on_done(t,e,l,s)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),l.unload(s)}))}))},reset_table_stats:function(t){var o=t||{},r=this,i=n.tree,l=o.item||i.selected(),s=l?i.itemData(l):void 0;if(!s)return!1;c.default.confirm(e("Reset statistics"),e('Are you sure you want to reset the statistics for table "%s"?',s._label),(function(){var e=s;a.ajax({url:r.generate_url(l,"reset",s,!0),type:"DELETE"}).done((function(t){r.on_done(t,e,i,l)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),i.unload(l)}))}),(function(){}))},detach_partition:function(t){var o=t||{},r=this,i=n.tree,l=o.item||i.selected(),s=l?i.itemData(l):void 0;if(!s)return!1;c.default.confirm(e("Detach Partition"),e("Are you sure you want to detach the partition %s?",s._label),(function(){a.ajax({url:r.generate_url(l,"detach",s,!0),type:"PUT"}).done((function(e){if(1==e.success){c.default.success(e.info);var t=i.next(l);t||(t=i.prev(l))||(t=i.parent(l)),i.remove(l),t&&i.select(t)}})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a)}))}),(function(){}))}},getSchema:function(e,t){return(0,r.getNodePartitionTableSchema)(e,t,n)},canCreate:l.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,a){if(this.canCreate.apply(this,[e,t,a]))return e.tigger_count>0},canCreate_with_trigger_disable:function(e,t,a){if(this.canCreate.apply(this,[e,t,a]))return e.tigger_count>0&&e.has_enable_triggers>0}})),n.Nodes.partition}.apply(t,o))||(e.exports=n)},50557:(e,t,a)=>{var o,n,r,c=(r=a(23452))&&r.__esModule?r:{default:r},i=a(53495);o=[a(91669),a(28008),a(55112),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n){return o.Nodes["coll-row_security_policy"]||(a.Browser.Nodes["coll-row_security_policy"]=a.Browser.Collection.extend({node:"row_security_policy",label:e("RLS Policies"),type:"coll-row_security_policy",columns:["name","description"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),o.Nodes.row_security_policy||(a.Browser.Nodes.row_security_policy=o.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"row_security_policy",label:e("RLS Policy"),hasSQL:!0,hasDepends:!0,width:o.stdW.sm+"px",sqlAlterHelp:"sql-alterpolicy.html",sqlCreateHelp:"sql-createpolicy.html",dialogHelp:t("help.static",{filename:"rls_policy_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_row_security_policy_on_coll",node:"coll-row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy",node:"row_security_policy",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_row_security_policy_on_coll",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:6,label:e("RLS Policy..."),icon:"wcTabIcon icon-row_security_policy",data:{action:"create",check:!0},enable:"canCreate"}]))},canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema,getSchema:function(e,t){return new c.default({role:function(){return(0,i.getNodeListByName)("role",e,t,{},(function(){return!0}),(function(e){return e.unshift({label:"PUBLIC",value:"public"}),e}))},nodeInfo:e})},canCreate:function(e,t){var a=o.tree.getTreeNodeHierarchy(t),n=a.server;return null==a.catalog&&(n&&n.version>=90500)}})),o.Nodes.row_security_policy}.apply(t,o))||(e.exports=n)},21545:(e,t,a)=>{var o,n;a(32564),a(82772);var r=l(a(294)),c=l(a(55958)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(69110)],void 0===(n=function(e,t,a,o,n,l){return n.Nodes["coll-rule"]||(o.Browser.Nodes["coll-rule"]=o.Browser.Collection.extend({node:"rule",label:e("Rules"),type:"coll-rule",columns:["name","owner","comment"],canDrop:l.isTreeItemOfChildOfSchema,canDropCascade:l.isTreeItemOfChildOfSchema})),n.Nodes.rule||(o.Browser.Nodes.rule=n.Node.extend({parent_type:["table","view","partition"],type:"rule",sqlAlterHelp:"sql-alterrule.html",sqlCreateHelp:"sql-createrule.html",dialogHelp:t("help.static",{filename:"rule_dialog.html"}),label:e("rule"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,canDrop:function(e,t){return l.isTreeItemOfChildOfSchema.apply(this,[e,t]),!i.default.has(e,"label")||"_RETURN"!==e.label},canDropCascade:function(e,t){return l.isTreeItemOfChildOfSchema.apply(this,[e,t]),!i.default.has(e,"label")||"_RETURN"!==e.label},url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_rule_on_coll",node:"coll-rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:5,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"rule",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_rule",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Rule..."),icon:"wcTabIcon icon-rule",data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_rule",node:"rule",module:this,applies:["object","context"],callback:"enable_rule",category:"connect",priority:3,label:e("Enable"),icon:"fa fa-check",enable:"canCreate_with_rule_enable"},{name:"disable_rule",node:"rule",module:this,applies:["object","context"],callback:"disable_rule",category:"drop",priority:3,label:e("Disable"),icon:"fa fa-times",enable:"canCreate_with_rule_disable"}]))},callbacks:{enable_rule:function(e){var t=e||{},o=n.tree,r=t.item||o.selected(),i=r?o.itemData(r):void 0;if(!i)return!1;var l=i;a.ajax({url:this.generate_url(r,"obj",i,!0),type:"PUT",data:{is_enable_rule:"O"},dataType:"json"}).done((function(){c.default.success("Rule updated."),o.removeIcon(r),l.icon="icon-rule",o.addIcon(r,{icon:l.icon}),o.unload(r),o.setInode(!1),o.deselect(r),setTimeout((function(){o.select(r)}),10)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),o.unload(r)}))},disable_rule:function(t){var o=t||{},r=n.tree,i=o.item||r.selected(),l=i?r.itemData(i):void 0;if(!l)return!1;var s=l;a.ajax({url:this.generate_url(i,"obj",l,!0),type:"PUT",data:{is_enable_rule:"D"},dataType:"json"}).done((function(){c.default.success("Rule updated"),r.removeIcon(i),s.icon="icon-rule-bad",r.addIcon(i,{icon:s.icon}),r.unload(i),r.setInode(!1),r.deselect(i),setTimeout((function(){r.select(i)}),10)})).fail((function(t,a,o){c.default.pgRespErrorNotify(t,o,e("Disable rule failed")),r.unload(i)}))}},getSchema:function(e,t){return new r.default({nodeInfo:e,nodeData:t})},canCreate:function(e,t,a){if(a&&!1===a.check)return!0;for(var o=n.tree,r=t,c=e;r;){if(i.default.indexOf(["schema"],c._type)>-1)return!0;if("coll-rule"==c._type){var l=o.hasParent(r)?o.parent(r):null,s=o.hasParent(l)?o.parent(l):null,d=o.hasParent(s)?o.parent(s):null,p=d?o.itemData(d):null;return i.default.isNull(p)||"catalog"!=p._type}if("view"==c._type||"table"==c._type){var u=o.hasParent(r)?o.parent(r):null,_=o.hasParent(u)?o.parent(u):null,f=_?o.itemData(_):null;return!i.default.isNull(f)&&"schema"==f._type}c=(r=o.hasParent(r)?o.parent(r):null)?o.itemData(r):null}return!0},canCreate_with_rule_enable:function(e,t,a){return!("view"in n.tree.getTreeNodeHierarchy(t))&&("icon-rule-bad"===e.icon&&this.canCreate.apply(this,[e,t,a]))},canCreate_with_rule_disable:function(e,t,a){return!("view"in n.tree.getTreeNodeHierarchy(t))&&("icon-rule"===e.icon&&this.canCreate.apply(e,t,a))}})),n.Nodes["coll-rule"]}.apply(t,o))||(e.exports=n)},74660:(e,t,a)=>{var o,n;a(69070),a(47941),a(82526),a(57327),a(38880),a(89554),a(54747),a(49337),a(33321),a(24812),a(32564),a(21249),a(91058),a(92222);var r=a(13190),c=l(a(55958)),i=l(a(96486));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){p(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function p(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}o=[a(43957),a(91669),a(28008),a(19755),a(55112),a(80864),a(35766),a(69110),a(34439),a(31946),a(88194)],void 0===(n=function(e,t,a,o,n,l,s,p){return l.Nodes["coll-table"]||(l.Nodes["coll-table"]=l.Collection.extend({node:"table",label:t("Tables"),type:"coll-table",columns:["name","relowner","is_partitioned","description"],hasStatistics:!0,statsPrettifyFields:[t("Total Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],canDrop:p.isTreeItemOfChildOfSchema,canDropCascade:p.isTreeItemOfChildOfSchema})),l.Nodes.table||(l.Nodes.table=s.SchemaChildNode.extend({type:"table",label:t("Table"),collection_type:"coll-table",hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[t("Total Size"),t("Indexes size"),t("Table size"),t("TOAST table size"),t("Tuple length"),t("Dead tuple length"),t("Free space")],sqlAlterHelp:"sql-altertable.html",sqlCreateHelp:"sql-createtable.html",dialogHelp:a("help.static",{filename:"table_dialog.html"}),hasScriptTypes:["create","select","insert","update","delete"],width:l.stdW.lg+"px",Init:function(){this.initialized||(this.initialized=!0,l.add_menus([{name:"create_table_on_coll",node:"coll-table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_table__on_schema",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:t("Table..."),icon:"wcTabIcon icon-table",data:{action:"create",check:!1},enable:"canCreate"},{name:"truncate_table",node:"table",module:this,applies:["object","context"],callback:"truncate_table",category:t("Truncate"),priority:3,label:t("Truncate"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_cascade",node:"table",module:this,applies:["object","context"],callback:"truncate_table_cascade",category:t("Truncate"),priority:3,label:t("Truncate Cascade"),icon:"fa fa-eraser",enable:"canCreate"},{name:"truncate_table_identity",node:"table",module:this,applies:["object","context"],callback:"truncate_table_identity",category:t("Truncate"),priority:3,label:t("Truncate Restart Identity"),icon:"fa fa-eraser",enable:"canCreate"},{name:"enable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"enable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Enable All"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"disable_all_triggers",node:"table",module:this,applies:["object","context"],callback:"disable_triggers_on_table",category:t("Trigger(s)"),priority:4,label:t("Disable All"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable",data:{data_disabled:t("The selected tree node does not support this option.")}},{name:"reset_table_stats",node:"table",module:this,applies:["object","context"],callback:"reset_table_stats",category:"Reset",priority:4,label:t("Reset Statistics"),icon:"fa fa-chart-bar",enable:"canCreate"},{name:"count_table_rows",node:"table",module:this,applies:["object","context"],callback:"count_table_rows",category:"Count",priority:2,label:t("Count Rows"),enable:!0}]),l.Events.on("pgadmin:browser:node:table:updated",this.onTableUpdated,this),l.Events.on("pgadmin:browser:node:type:cache_cleared",this.handle_cache,this),l.Events.on("pgadmin:browser:node:domain:cache_cleared",this.handle_cache,this))},callbacks:{enable_triggers_on_table:function(t){e.enableTriggers(l.tree,c.default,this.generate_url.bind(this),t)},disable_triggers_on_table:function(t){e.disableTriggers(l.tree,c.default,this.generate_url.bind(this),t)},truncate_table:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!1}])},truncate_table_cascade:function(e){this.callbacks.truncate.apply(this,[e,{cascade:!0}])},truncate_table_identity:function(e){this.callbacks.truncate.apply(this,[e,{identity:!0}])},truncate:function(e,a){var n=e||{},r=this,i=l.tree,s=n.item||i.selected(),d=s?i.itemData(s):void 0;if(!d)return!1;c.default.confirm(t("Truncate Table"),t("Are you sure you want to truncate table %s?",d.label),(function(){var e=d;o.ajax({url:r.generate_url(s,"truncate",d,!0),type:"PUT",data:a,dataType:"json"}).done((function(t){1==t.success&&(c.default.success(t.info),i.removeIcon(s),e.icon=e.is_partitioned?"icon-partition":"icon-table",i.addIcon(s,{icon:e.icon}),i.unload(s),i.setInode(s),i.deselect(s),setTimeout((function(){i.select(s)}),10)),2==t.success&&c.default.error(t.info)})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),i.unload(s)}))}),(function(){}))},reset_table_stats:function(e){var a=e||{},n=this,r=l.tree,i=a.item||r.selected(),s=i?r.itemData(i):void 0;if(!s)return!1;c.default.confirm(t("Reset statistics"),t('Are you sure you want to reset the statistics for table "%s"?',s._label),(function(){var e=s;o.ajax({url:n.generate_url(i,"reset",s,!0),type:"DELETE"}).done((function(t){1==t.success&&(c.default.success(t.info),r.removeIcon(i),e.icon=e.is_partitioned?"icon-partition":"icon-table",r.addIcon(i,{icon:e.icon}),r.unload(i),r.setInode(i),r.deselect(i),setTimeout((function(){r.select(i)}),10))})).fail((function(e,t,a){c.default.pgRespErrorNotify(e,a),r.unload(i)}))}),(function(){}))},count_table_rows:function(e){var t=e||{},a=l.tree,n=t.item||a.selected(),r=n?a.itemData(n):void 0;if(!r)return!1;var i=d(d({},r),{},{_type:this.type});o.ajax({url:this.generate_url(n,"count_rows",i,!0),type:"GET"}).done((function(e){c.default.success(e.info),r.rows_cnt=e.data.total_rows,a.unload(n),a.setInode(n),a.deselect(n),setTimeout((function(){a.select(n)}),10)})).fail((function(e,t,o){c.default.pgRespErrorNotify(e,o),a.unload(n)}))}},getSchema:function(e,t){return(0,r.getNodeTableSchema)(e,t,l)},model:l.Node.Model.extend({idAttribute:"oid",defaults:{name:void 0,oid:void 0,relowner:void 0,description:void 0,is_partitioned:!1},schema:[{id:"name",label:t("Name"),type:"text",mode:["properties","create","edit"],disabled:"inSchema"},{id:"oid",label:t("OID"),type:"text",mode:["properties"]},{id:"relowner",label:t("Owner"),type:"text",node:"role",mode:["properties","create","edit"],select2:{allowClear:!1},disabled:"inSchema",control:"node-list-by-name"},{id:"is_partitioned",label:t("Partitioned table?"),cell:"switch",type:"switch",mode:["properties","create","edit"],visible:"isVersionGreaterThan96",readonly:function(e){return!e.isNew()}},{id:"description",label:t("Comment"),type:"multiline",mode:["properties","create","edit"],disabled:"inSchema"}],sessChanged:function(){return 2==i.default.size(this.sessAttrs)&&this.sessAttrs.autovacuum_custom&&this.sessAttrs.toast_autovacuum||1==i.default.size(this.sessAttrs)&&(this.sessAttrs.autovacuum_custom||this.sessAttrs.toast_autovacuum)?this.get("vacuum_table").sessChanged()||this.get("vacuum_toast").sessChanged():l.DataModel.prototype.sessChanged.apply(this)},inSchema:function(){return this.node_info&&"catalog"in this.node_info}}),canCreate_with_trigger_enable:function(e,t,a){return e.tigger_count>0&&this.canCreate.apply(this,[e,t,a])},canCreate_with_trigger_disable:function(e,t,a){return e.tigger_count>0&&e.has_enable_triggers>0&&this.canCreate.apply(this,[e,t,a])},onTableUpdated:function(e,t,a){var o,r;if(a.is_partitioned&&"affected_partitions"in a){var c,s=a.affected_partitions,d=[],p=[];if("detached"in s&&s.detached.length>0){l.removeChildTreeNodesById(e,"coll-partition",i.default.map(s.detached,(function(e){return parseInt(e.oid)}))),c=l.findParentTreeNodeByType(e,"schema");var u=i.default.groupBy(s.detached,(function(e){return parseInt(e.schema_id)}));for(o in u)if(c=l.findSiblingTreeNode(c,o)){r=i.default.map(u[o],(function(e){return parseInt(e.oid)}));var _=l.findChildCollectionTreeNode(c,"coll-table");_&&p.push({parent:_,type:"table",treeHierarchy:n.Browser.tree.getTreeNodeHierarchy(c),childrenIDs:i.default.clone(r)})}}if("attached"in s&&s.attached.length>0){c=l.findParentTreeNodeByType(e,"schema");var f=i.default.groupBy(s.attached,(function(e){return parseInt(e.schema_id)}));for(o in f)(c=l.findSiblingTreeNode(c,o))&&(r=i.default.map(f[o],(function(e){return parseInt(e.oid)})),l.removeChildTreeNodesById(c,"coll-table",r)),d=d.concat(r)}if("created"in s&&s.created.length>0&&i.default.each(s.created,(function(e){d.push(e.oid)})),d.length){var m=l.findChildCollectionTreeNode(e,"coll-partition");m&&p.push({parent:m,type:"partition",treeHierarchy:n.Browser.tree.getTreeNodeHierarchy(e),childrenIDs:d})}!function e(){if(p.length){var t=p.pop();l.addChildTreeNodes(t.treeHierarchy,t.parent,t.type,t.childrenIDs,e)}}()}},handle_cache:function(){this.clear_cache.apply(this,null)}})),l.Nodes.table}.apply(t,o))||(e.exports=n)},68401:(e,t,a)=>{var o,n;a(32564);var r=a(53495),c=s(a(9602)),i=s(a(55958)),l=s(a(96486));function s(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,s){return n.Nodes["coll-trigger"]||(o.Browser.Nodes["coll-trigger"]=o.Browser.Collection.extend({node:"trigger",label:e("Triggers"),type:"coll-trigger",columns:["name","description"],canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema})),n.Nodes.trigger||(o.Browser.Nodes.trigger=n.Node.extend({parent_type:["table","view","partition"],collection_type:["coll-table","coll-view"],type:"trigger",label:e("Trigger"),hasSQL:!0,hasDepends:!0,width:n.stdW.sm+"px",sqlAlterHelp:"sql-altertrigger.html",sqlCreateHelp:"sql-createtrigger.html",dialogHelp:t("help.static",{filename:"trigger_dialog.html"}),url_jump_after_node:"schema",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_trigger_on_coll",node:"coll-trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger",node:"trigger",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onTable",node:"table",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_trigger_onPartition",node:"partition",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"},{name:"enable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"enable_trigger",category:"connect",priority:3,label:e("Enable"),icon:"fa fa-check",enable:"canCreate_with_trigger_enable"},{name:"disable_trigger",node:"trigger",module:this,applies:["object","context"],callback:"disable_trigger",category:"drop",priority:3,label:e("Disable"),icon:"fa fa-times",enable:"canCreate_with_trigger_disable"},{name:"create_trigger_onView",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Trigger..."),icon:"wcTabIcon icon-trigger",data:{action:"create",check:!0},enable:"canCreate"}]))},callbacks:{enable_trigger:function(e){var t=e||{},o=n.tree,r=t.item||o.selected(),c=r?o.itemData(r):void 0;if(!c)return!1;var l=c;a.ajax({url:this.generate_url(r,"enable",c,!0),type:"PUT",data:{is_enable_trigger:"O"},dataType:"json"}).done((function(e){1==e.success&&(i.default.success(e.info),o.removeIcon(r),l.icon="icon-trigger",o.addIcon(r,{icon:l.icon}),o.unload(r),o.setInode(!1),o.deselect(r),setTimeout((function(){o.select(r)}),10))})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),o.unload(r)}))},disable_trigger:function(t){var o=t||{},r=n.tree,c=o.item||r.selected(),l=c?r.itemData(c):void 0;if(!l)return!1;var s=l;a.ajax({url:this.generate_url(c,"enable",l,!0),type:"PUT",data:{is_enable_trigger:"D"},dataType:"json"}).done((function(e){1==e.success&&(i.default.success(e.info),r.removeIcon(c),s.icon="icon-trigger-bad",r.addIcon(c,{icon:s.icon}),r.unload(c),r.setInode(!1),r.deselect(c),setTimeout((function(){r.select(c)}),10))})).fail((function(t,a,o){i.default.pgRespErrorNotify(t,o,e("Disable trigger failed")),r.unload(c)}))}},canDrop:s.isTreeItemOfChildOfSchema,canDropCascade:s.isTreeItemOfChildOfSchema,getSchema:function(e,t){var a=this;return new c.default({triggerFunction:function(){return(0,r.getNodeAjaxOptions)("get_triggerfunctions",a,e,t,{cacheLevel:"trigger_function",jumpAfterNode:"schema"},(function(e){return l.default.reject(e,(function(e){return""==e.label}))}))},columns:function(){return(0,r.getNodeListByName)("column",e,t,{cacheLevel:"column"})},nodeInfo:e})},canCreate:s.isTreeItemOfChildOfSchema,canCreate_with_trigger_enable:function(e,t,a){return!("view"in n.tree.getTreeNodeHierarchy(t))&&("icon-trigger-bad"===e.icon&&this.canCreate.apply(this,[e,t,a]))},canCreate_with_trigger_disable:function(e,t,a){return!("view"in n.tree.getTreeNodeHierarchy(t))&&("icon-trigger"===e.icon&&this.canCreate.apply(this,[e,t,a]))}})),n.Nodes.trigger}.apply(t,o))||(e.exports=n)},83897:(e,t,a)=>{var o,n;function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a(4129),a(41539),a(78783),a(66992),a(33948),a(69070),a(38880),a(82526),a(41817),a(32165),a(68309);var c=a(53495),i=a(13350),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var c=o?Object.getOwnPropertyDescriptor(e,n):null;c&&(c.get||c.set)?Object.defineProperty(a,n,c):a[n]=e[n]}a.default=e,t&&t.set(e,a);return a}(a(10261));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}o=[a(91669),a(28008),a(55112),a(80864),a(35766),a(69110),a(34439)],void 0===(n=function(e,t,a,o,n,r){return o.Nodes["coll-type"]||(o.Nodes["coll-type"]=o.Collection.extend({node:"type",label:e("Types"),type:"coll-type",columns:["name","typeowner","description"],canDrop:r.isTreeItemOfChildOfSchema,canDropCascade:r.isTreeItemOfChildOfSchema})),o.Nodes.type||(o.Nodes.type=n.SchemaChildNode.extend({type:"type",sqlAlterHelp:"sql-altertype.html",sqlCreateHelp:"sql-createtype.html",dialogHelp:t("help.static",{filename:"type_dialog.html"}),label:e("Type"),collection_type:"coll-type",hasSQL:!0,hasDepends:!0,width:o.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_type_on_coll",node:"coll-type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"type",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_type",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Type..."),icon:"wcTabIcon icon-type",data:{action:"create",check:!1},enable:"canCreate"}]))},ext_funcs:void 0,getSchema:function(e,t){var n=a.Browser.Nodes.type;return new l.default((function(a){return(0,i.getNodePrivilegeRoleSchema)(n,e,t,a)}),(function(){return(0,l.getCompositeSchema)(n,e,t)}),(function(){return(0,l.getRangeSchema)(n,e,t)}),(function(){return(0,l.getExternalSchema)(n,e,t)}),(function(){return(0,l.getDataTypeSchema)(n,e,t)}),{roles:function(){return(0,c.getNodeListByName)("role",e,t,{cacheLevel:"database"})},schemas:function(){return(0,c.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},server_info:o.serverInfo[e.server._id],node_info:e},{typeowner:o.serverInfo[e.server._id].user.name,schema:"catalog"in e?e.catalog.label:e.schema.label,typtype:"c"})}})),o.Nodes.type}.apply(t,o))||(e.exports=n)},63938:(e,t,a)=>{var o,n;a(68309);var r=p(a(7432)),c=a(53495),i=a(13350),l=a(36717),s=p(a(55958)),d=p(a(96486));function p(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(35766),a(69110),a(44092)],void 0===(n=function(e,t,a,o,n,p,u,_){return n.Nodes["coll-mview"]||(n.Nodes["coll-mview"]=n.Collection.extend({node:"mview",label:e("Materialized Views"),type:"coll-mview",columns:["name","owner","comment"],canDrop:u.isTreeItemOfChildOfSchema,canDropCascade:u.isTreeItemOfChildOfSchema})),n.Nodes.mview||(n.Nodes.mview=p.SchemaChildNode.extend({type:"mview",sqlAlterHelp:"sql-altermaterializedview.html",sqlCreateHelp:"sql-creatematerializedview.html",dialogHelp:t("help.static",{filename:"materialized_view_dialog.html"}),label:e("Materialized View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select"],collection_type:"coll-mview",width:n.stdW.md+"px",Init:function(){this.initialized||(this.initialized=!0,o.Browser.add_menu_category("refresh_mview",e("Refresh View"),18,""),n.add_menus([{name:"create_mview_on_coll",node:"coll-mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"mview",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,icon:"wcTabIcon icon-mview",data:{action:"create",check:!0},enable:"canCreate",label:e("Materialized View...")},{name:"create_mview",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:18,icon:"wcTabIcon icon-mview",data:{action:"create",check:!1},enable:"canCreate",label:e("Materialized View...")},{name:"refresh_mview_data",node:"mview",module:this,priority:1,callback:"refresh_mview",category:"refresh_mview",applies:["object","context"],label:e("With data"),data:{concurrent:!1,with_data:!0},icon:"fa fa-recycle"},{name:"refresh_mview_nodata",node:"mview",callback:"refresh_mview",priority:2,module:this,category:"refresh_mview",applies:["object","context"],label:e("With no data"),data:{concurrent:!1,with_data:!1},icon:"fa fa-sync-alt"},{name:"refresh_mview_concurrent",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!0},priority:3,applies:["object","context"],callback:"refresh_mview",label:e("With data (concurrently)"),icon:"fa fa-recycle"},{name:"refresh_mview_concurrent_nodata",node:"mview",module:this,category:"refresh_mview",enable:"is_version_supported",data:{concurrent:!0,with_data:!1},priority:4,applies:["object","context"],callback:"refresh_mview",label:e("With no data (concurrently)"),icon:"fa fa-sync-alt"}]))},getSchema:function(e,t){var a=this;return new r.default((function(a){return(0,i.getNodePrivilegeRoleSchema)("",e,t,a)}),(function(){return(0,l.getNodeVacuumSettingsSchema)(a,e,t)}),{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListByName)("schema",e,t,{cacheLevel:"database"})},spcname:function(){return(0,c.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},nodeInfo:e},{owner:n.serverInfo[e.server._id].user.name,schema:e.schema.label})},refresh_mview:function(t){var o=t||{},r=this,c=n.tree,i=o.item||c.selected(),l=i?c.itemData(i):void 0,d=null;if(!l)return!1;for(var p=i;p;){var u=n.tree.itemData(p);if("server"==u._type){d=u;break}if(!n.tree.hasParent(p)){s.default.alert(e("Please select server or child node from tree."));break}p=n.tree.parent(p)}d&&_.hasBinariesConfiguration(n,d)&&a.ajax({url:r.generate_url(i,"check_utility_exists",l,!0),type:"GET",dataType:"json"}).done((function(o){o.success?a.ajax({url:r.generate_url(i,"refresh_data",l,!0),type:"PUT",data:{concurrent:t.concurrent,with_data:t.with_data},dataType:"json"}).done((function(t){t.data&&t.data.status?n.BgProcessManager.startProcess(t.data.job_id,t.data.desc):s.default.alert(e("Failed to create materialized view refresh job."),t.errormsg)})).fail((function(t,a,o){s.default.pgRespErrorNotify(t,o,e("Failed to create materialized view refresh job."))})):s.default.alert(e("Utility not found"),o.errormsg)})).fail((function(){s.default.alert(e("Utility not found"),e("Failed to fetch Utility information"))}))},is_version_supported:function(e,t){var a=o.Browser.tree,n=t||a.selected(),r=a&&a.getTreeNodeHierarchy(n);return(d.default.isUndefined(r)?0:r.server.version)>=90400}})),n.Nodes.mview}.apply(t,o))||(e.exports=n)},7405:(e,t,a)=>{var o,n;a(68309);var r,c=a(53495),i=a(13350),l=(r=a(29369))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(35766),a(69110),a(21545)],void 0===(n=function(e,t,a,o,n){return a.Nodes["coll-view"]||(a.Nodes["coll-view"]=a.Collection.extend({node:"view",label:e("Views"),type:"coll-view",columns:["name","owner","comment"],canDrop:n.isTreeItemOfChildOfSchema,canDropCascade:n.isTreeItemOfChildOfSchema})),a.Nodes.view||(a.Nodes.view=o.SchemaChildNode.extend({type:"view",sqlAlterHelp:"sql-alterview.html",sqlCreateHelp:"sql-createview.html",dialogHelp:t("help.static",{filename:"view_dialog.html"}),label:e("View"),hasSQL:!0,hasDepends:!0,hasScriptTypes:["create","select","insert"],collection_type:"coll-view",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_view_on_coll",node:"coll-view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"view",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!0},enable:"canCreate"},{name:"create_view",node:"schema",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:17,label:e("View..."),icon:"wcTabIcon icon-view",data:{action:"create",check:!1},enable:"canCreate"}]))},getSchema:function(e,t){return new l.default((function(a){return(0,i.getNodePrivilegeRoleSchema)("",e,t,a)}),e,{role:function(){return(0,c.getNodeListByName)("role",e,t)},schema:function(){return(0,c.getNodeListByName)("schema",e,t,{cacheLevel:"database"})}},{owner:a.serverInfo[e.server._id].user.name,schema:e.schema?e.schema.label:""})}})),a.Nodes.view}.apply(t,o))||(e.exports=n)},88352:(e,t,a)=>{var o,n;a(92222),a(32564),a(68309),a(64765),a(74916);var r=a(53495),c=a(13350),i=a(25570),l=u(a(34558)),s=u(a(55958)),d=a(72663),p=u(a(96486));function u(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(7027),a(10426),a(34439)],void 0===(n=function(e,t,a,o,n,u){if(n.Nodes["coll-database"]||(n.Nodes["coll-database"]=n.Collection.extend({node:"database",label:e("Databases"),type:"coll-database",columns:["name","datowner","comments"],hasStatistics:!0,canDrop:!0,selectParentNodeOnDelete:!0,canDropCascade:!1,statsPrettifyFields:[e("Size"),e("Size of temporary files")]})),!n.Nodes.database){n.Nodes.database=n.Node.extend({parent_type:"server",type:"database",sqlAlterHelp:"sql-alterdatabase.html",sqlCreateHelp:"sql-createdatabase.html",dialogHelp:t("help.static",{filename:"database_dialog.html"}),hasSQL:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size"),e("Size of temporary files")],canDrop:function(e){return e.canDrop},selectParentNodeOnDelete:!0,label:e("Database"),node_image:function(){return"pg-icon-database"},width:"700px",Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_database_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database_on_coll",node:"coll-database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"create_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Database..."),icon:"wcTabIcon pg-icon-database",data:{action:"create"},enable:"can_create_database"},{name:"connect_database",node:"database",module:this,applies:["object","context"],callback:"connect_database",category:"connect",priority:4,label:e("Connect Database"),icon:"fa fa-link",enable:"is_not_connected",data:{data_disabled:e("Selected database is already connected.")}},{name:"disconnect_database",node:"database",module:this,applies:["object","context"],callback:"disconnect_database",category:"drop",priority:5,label:e("Disconnect from database"),icon:"fa fa-unlink",enable:"is_connected",data:{data_disabled:e("Selected database is already disconnected.")}},{name:"generate_erd",node:"database",module:this,applies:["object","context"],callback:"generate_erd",category:"erd",priority:5,label:e("Generate ERD")}]),p.default.bindAll(this,"connection_lost"),n.Events.on("pgadmin:database:connection:lost",this.connection_lost))},can_create_database:function(e,t){var a=n.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.can_create_db},canCreate:function(e,t){var a=n.tree.getTreeNodeHierarchy(t).server;return a&&a.version>=1e5},is_not_connected:function(e){return e&&!e.connected&&e.allowConn},is_connected:function(e){return e&&e.connected&&e.canDisconn},is_psql_enabled:function(e){return e&&e.connected&&o.enable_psql},is_conn_allow:function(e){return e&&e.allowConn},connection_lost:function(t,a,o){if(n.tree){for(var r=n.tree,c=t&&r.itemData(t),i=this;c&&"database"!=c._type;)t=r.parent(t),c=t&&r.itemData(t);if(t&&c){if(!c.allowConn)return!1;if(p.default.isUndefined(c.is_connecting)||!c.is_connecting){c.is_connecting=!0;if(n.Events.on("pgadmin:database:connect:cancelled",(function e(t,a){a._id==this._id&&(c.is_connecting=!1,n.Events.off("pgadmin:database:connect:cancelled",e),a=(t=t&&r.parent(t))&&r.itemData(t),t&&a&&n.Events.trigger("pgadmin:server:disconnect",{item:t,data:a},!1))})),o)return void f(i,c,r,t,!0);s.default.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){f(i,c,r,t,!0)}),(function(){c.is_connecting=!1,r.unload(t),r.setInode(t);var e=c.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";r.addIcon(t,{icon:e}),n.Events.trigger("pgadmin:database:connect:cancelled",t,c,i)}))}}}},callbacks:{connect_database:function(e){var t=e||{},a=n.tree,o=t.item||a.selected(),r=o?a.itemData(o):void 0;return r&&"template0"!=r.label&&_(this,r,a,o,!0),!1},updated:function(e,t){n.tree.refresh(e._parent).then((function(){t&&t.success&&t.success()}))},disconnect_database:function(t){var o=t||{},r=this,c=n.tree,i=o.item||c.selected(),l=i?c.itemData(i):void 0;return l&&s.default.confirm(e("Disconnect from database"),e("Are you sure you want to disconnect from database - %s?",l.label),(function(){var e=l;a.ajax({url:r.generate_url(i,"connect",l,!0),type:"DELETE"}).done((function(t){if(1==t.success){var a=c.parent(i);t.data.info_prefix&&(t.info="".concat(p.default.escape(t.data.info_prefix)," - ").concat(t.info)),s.default.success(t.info),c.removeIcon(i),e.connected=!1,e.icon=e.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected",c.addIcon(i,{icon:e.icon}),c.unload(i),n.Events.trigger("pgadmin:browser:tree:update-tree-state",i),setTimeout((function(){c.select(a)}),10)}else{try{s.default.error(t.errormsg)}catch(e){console.warn(e.stack||e)}c.unload(i)}})).fail((function(e,t,a){s.default.pgRespErrorNotify(e,a),c.unload(i)}))}),(function(){return!0})),!1},generate_erd:function(e){var t=e||{},a=n.tree,r=t.item||a.selected(),c=r?a.itemData(r):void 0;o.Tools.ERD.showErdTool(c,r,!0)},beforeopen:function(e,t){return!(!t||"database"!=t._type||"template0"==t.label)&&(n.tree.addIcon(e,{icon:t.icon}),!(!t.connected&&t.allowConn&&!t.is_connecting)||(t.is_connecting=!0,_(this,t,n.tree,e,!0),!1))},selected:function(e,t){return!(!t||"database"!=t._type)&&(n.tree.addIcon(e,{icon:t.icon}),t.connected||!t.allowConn||t.is_connecting||(t.is_connecting=!0,_(this,t,n.tree,e,!1)),n.Node.callbacks.selected.apply(this,arguments))},refresh:function(e,t){var a=n.tree,o=t||a.selected(),r=a.itemData(o);r.allowConn&&n.Node.callbacks.refresh.apply(this,arguments)}},getSchema:function(e,t){var a=this,o=function(){return(0,r.getNodeAjaxOptions)("get_ctypes",a,e,t,{cacheLevel:"server"})};return new l.default((function(){return(0,i.getNodeVariableSchema)(a,e,t,!1,!0)}),(function(o){return(0,c.getNodePrivilegeRoleSchema)(a,e,t,o)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)},encoding:function(){return(0,r.getNodeAjaxOptions)("get_encodings",a,e,t,{cacheLevel:"server"})},template:function(){return(0,r.getNodeAjaxOptions)("get_databases",a,e,t,{cacheLevel:"server"},(function(e){var t=[];return e&&p.default.isArray(e)&&p.default.each(e,(function(e){t.push({label:e,value:e,image:"pg-icon-database"})})),t}))},spcname:function(){return(0,r.getNodeListByName)("tablespace",e,t,{},(function(e){return"pg_global"!=e.label}))},datcollate:o,datctype:o},{datowner:n.serverInfo[e.server._id].user.name})}}),n.SecurityGroupSchema={id:"security",label:e("Security"),type:"group",visible:function(e){return!e||!("node_info"in e)||!("catalog"in(e.node_info||e.handler.node_info))}};var _=function(e,t,a,o,n){f(e,t,a,o,n)},f=function(t,o,r,c,i){var l=i||o.connected,f=function t(a,n,c,l,p,f,h,g){if(o.is_connecting=!1,200!=a.status&&-1!==a.responseText.search("Ticket expired")){r.addIcon(h,{icon:"icon-server-connecting"}),u.fetch_ticket().then((function(){_(l,p,f,h,i)}),(function(t){r.setInode(h);var n=o.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";r.addIcon(h,{icon:n}),s.default.pgNotifier(t,a,e("Connect  to database."))}))}else{if(!g){r.setInode(h);var y=o.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";r.addIcon(h,{icon:y})}s.default.pgNotifier("error",a,c,(function(a){setTimeout((function(){"CRYPTKEY_SET"==a?_(l,p,f,h,i):(0,d.showServerPassword)(e("Connect to database"),a,l,p,f,h,g,m,t,b)}),100)}))}},m=function(a,o,r,c,i,l){if(r.is_connecting=!1,a&&a.data){if("boolean"==typeof a.data.connected&&(r.connected=a.data.connected),"string"==typeof a.data.icon){c.removeIcon(i),r.icon=a.data.icon;var d=r.isTemplate?"icon-database-template-connected":r.icon;c.addIcon(i,{icon:d})}a.data.already_connected&&(a.info=e("Database already connected.")),a.data.info_prefix&&(a.info="".concat(p.default.escape(a.data.info_prefix)," - ").concat(a.info)),a.data.already_connected?s.default.info(a.info):s.default.success(a.info),t.trigger("connected",t,i,r),n.Events.trigger("pgadmin:database:connected",i,r),n.enable_disable_menus.apply(n,[i]),l||setTimeout((function(){c.select(i),c.open(i)}),10)}},b=function(e,a,r){r.is_connecting=!1;var c=e.parent(a);e.unload(a),e.setInode(a),e.removeIcon(a);var i=o.isTemplate?"icon-database-template-not-connected":"icon-database-not-connected";e.addIcon(a,{icon:i}),t.trigger("connect:cancelled",t,a,r),n.Events.trigger("pgadmin:database:connect:cancelled",a,r,t),e.select(c)};a.post(t.generate_url(c,"connect",o,!0)).done((function(e){if(1==e.success)return m(e,t,o,r,c,l)})).fail((function(a,n,i){return 410===a.status&&(i=e("Error: Object not found - %s.",i)),f(a,0,i,t,o,r,c,l)}))}}return n.Nodes["coll-database"]}.apply(t,o))||(e.exports=n)},12220:(e,t,a)=>{var o,n;a(88674),a(41539),a(68309);var r=a(53495),c=d(a(85641)),i=d(a(2832)),l=d(a(96486)),s=d(a(55958));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-subscription"]||(a.Nodes["coll-subscription"]=a.Collection.extend({node:"subscription",label:e("Subscriptions"),type:"coll-subscription",columns:["name","subowner","proppub","enabled"],hasStatistics:!0})),a.Nodes.subscription||(a.Nodes.subscription=a.Node.extend({parent_type:"database",type:"subscription",sqlAlterHelp:"sql-altersubscription.html",sqlCreateHelp:"sql-createsubscription.html",dialogHelp:t("help.static",{filename:"subscription_dialog.html"}),label:e("Subscription"),hasSQL:!0,canDrop:!0,canDropCascade:!0,hasDepends:!0,hasStatistics:!0,width:"501px",Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_subscription_on_database",node:"database",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:a.Nodes.database.canCreate},{name:"create_subscription_on_coll",node:"coll-subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:"canCreate"},{name:"create_subscription",node:"subscription",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Subscription..."),icon:"wcTabIcon icon-subscription",data:{action:"create"},enable:"canCreate"}]))},getSchema:function(t,o){return new c.default({role:function(){return(0,r.getNodeListByName)("role",t,o)},getPublication:function(n,r,c,d,p,u,_,f,m,b,h,g,y){return new Promise((function(v,w){var N=(0,i.default)();if(null!=n&&null!=c&&null!=d&&null!=p){var x=a.Nodes.cast.generate_url.apply(a.Nodes.subscription,[null,"get_publications",o,!1,t]);N.get(x,{params:{host:n,password:r,port:c,username:d,db:p,connectTimeout:u,passfile:_,sslmode:f,sslcompression:m,sslcert:b,sslkey:h,sslrootcert:g,sslcrl:y}}).then((function(t){""!==t.data.errormsg||l.default.isNull(t.data.data)?!l.default.isNull(t.data.errormsg)&&l.default.isNull(t.data.data)&&(w(t.data.errormsg),s.default.alert(e("Check connection?"),e(t.data.errormsg))):(v(t.data.data),s.default.info(e("Publication fetched successfully.")))})).catch((function(e){w(e)}))}}))}},{node_info:t.server},{subowner:a.serverInfo[t.server._id].user.name})}})),a.Nodes["coll-subscription"]}.apply(t,o))||(e.exports=n)},72390:(e,t,a)=>{var o,n,r,c=(r=a(978))&&r.__esModule?r:{default:r};o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-resource_group"]||(a.Nodes["coll-resource_group"]=a.Collection.extend({node:"resource_group",label:e("Resource Groups"),type:"coll-resource_group",columns:["name","cpu_rate_limit","dirty_rate_limit"],canDrop:!0,canDropCascade:!1})),a.Nodes.resource_group||(a.Nodes.resource_group=a.Node.extend({parent_type:"server",type:"resource_group",epasHelp:!0,dialogHelp:t("help.static",{filename:"resource_group_dialog.html"}),label:e("Resource Group"),hasSQL:!0,canDrop:!0,Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_resourcegroup_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")},enable:function(e,t){return a.tree.getTreeNodeHierarchy(t).server.connected&&"ppas"===e.server_type&&e.version>=90400}},{name:"create_resource_group_on_coll",node:"coll-resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}},{name:"create_resource_group",node:"resource_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Resource Group..."),icon:"wcTabIcon icon-resource_group",data:{action:"create",data_disabled:e("This option is only available on EPAS servers.")}}]))},getSchema:function(){return new c.default},model:a.Node.Model.extend({idAttribute:"oid",schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"cpu_rate_limit",label:e("CPU rate limit (percentage)"),cell:"string",type:"numeric",min:0,max:16777216},{id:"dirty_rate_limit",label:e("Dirty rate limit (KB)"),cell:"string",type:"numeric",min:0,max:16777216}]})})),a.Nodes["coll-resource_group"]}.apply(t,o))||(e.exports=n)},91449:(e,t,a)=>{var o,n,r,c=(r=a(35143))&&r.__esModule?r:{default:r},i=a(25570),l=a(53495),s=a(19281),d=a(88274);o=[a(91669),a(28008),a(55112),a(80864)],void 0===(n=function(e,t,a,o){return o.Nodes["coll-role"]||(a.Browser.Nodes["coll-role"]=a.Browser.Collection.extend({node:"role",label:e("Login/Group Roles"),type:"coll-role",columns:["rolname","rolvaliduntil","rolconnlimit","rolcanlogin","rolsuper","rolcreaterole","rolcreatedb","rolcatupdate","rolinherit","rolreplication"],canDrop:!0,canDropCascade:!1})),o.Nodes.role||(a.Browser.Nodes.role=a.Browser.Node.extend({parent_type:"server",type:"role",sqlAlterHelp:"sql-alterrole.html",sqlCreateHelp:"sql-createrole.html",dialogHelp:t("help.static",{filename:"role_dialog.html"}),label:e("Login/Group Role"),hasSQL:!0,width:"550px",canDrop:function(e,t){var a=o.tree.getTreeNodeHierarchy(t).server;return e.is_superuser?a.connected&&a.user.is_superuser:a.connected&&a.user.can_create_role},hasDepends:!0,node_label:function(e){return e.label},node_image:function(e){return e?e.can_login?"icon-role":"icon-group":"icon-role"},title:function(t){return t?t.can_login?e("Login Role")+" - "+t.label:e("Group Role")+" - "+t.label:this.label},Init:function(){this.initialized||(this.initialized=!0,o.add_menus([{name:"create_role_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role_on_roles",node:"coll-role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"create_role",node:"role",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Login/Group Role..."),icon:"wcTabIcon icon-role",data:{action:"create"},enable:"can_create_role"},{name:"reassign_role",node:"role",module:this,applies:["object","context"],callback:"reassign_role",category:"role",priority:5,label:e("Reassign/Drop Owned..."),icon:"wcTabIcon icon-role",enable:"can_reassign_role"}]))},can_create_role:function(e,t){var a=o.tree.getTreeNodeHierarchy(t).server;return a.connected&&a.user.can_create_role},can_reassign_role:function(e,t){return o.tree.getTreeNodeHierarchy(t).server.connected&&e.can_login},reassign_role:function(){(0,d.showRoleReassign)()},getSchema:function(e,t){var a=this;return new c.default((function(){return(0,i.getNodeVariableSchema)(a,e,t,!0,!1)}),(function(){return(0,s.getMembershipSchema)(a,e,t)}),{role:function(){return(0,l.getNodeListByName)("role",e,t)},nodeInfo:e})}})),o.Nodes.role}.apply(t,o))||(e.exports=n)},65391:(e,t,a)=>{var o,n;a(32564),a(64765),a(74916);var r=a(53495),c=d(a(8413)),i=d(a(55958)),l=a(72663),s=d(a(96486));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(19755),a(55112),a(80864),a(93584),a(10426)],void 0===(n=function(e,t,a,o,n,d,p){if(!n.Nodes.server){o.Browser.Nodes.server=o.Browser.Node.extend({parent_type:"server_group",type:"server",dialogHelp:t("help.static",{filename:"server_dialog.html"}),label:e("Server"),canDrop:function(e){var t=e.user_id;return!(t!=d.id&&!s.default.isUndefined(t))},dropAsRemove:!0,dropPriority:5,hasStatistics:!0,hasCollectiveStatistics:!0,can_expand:function(e){return e&&e.connected},Init:function(){this.initialized||(this.initialized=!0,n.add_menus([{name:"create_server_on_sg",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"register",priority:1,label:e("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server",enable:"canCreate"},{name:"create_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"register",priority:3,label:e("Server..."),data:{action:"create"},icon:"wcTabIcon icon-server",enable:"canCreate"},{name:"connect_server",node:"server",module:this,applies:["object","context"],callback:"connect_server",category:"connect",priority:4,label:e("Connect Server"),icon:"fa fa-link",enable:"is_not_connected",data:{data_disabled:e("Database server is already connected.")}},{name:"disconnect_server",node:"server",module:this,applies:["object","context"],callback:"disconnect_server",category:"drop",priority:5,label:e("Disconnect from server"),icon:"fa fa-unlink",enable:"is_connected",data:{data_disabled:e("Database server is already disconnected.")}},{name:"reload_configuration",node:"server",module:this,applies:["tools","context"],callback:"reload_configuration",category:"reload",priority:10,label:e("Reload Configuration"),icon:"fa fa-redo-alt",enable:"enable_reload_config",data:{data_disabled:e("Please select a server from the browser tree to reload the configuration files.")}},{name:"restore_point",node:"server",module:this,applies:["tools","context"],callback:"restore_point",category:"restore",priority:7,label:e("Add Named Restore Point..."),icon:"fa fa-anchor",enable:"is_applicable",data:{data_disabled:e("Please select any server from the browser tree to Add Named Restore Point.")}},{name:"change_password",node:"server",module:this,applies:["object"],callback:"change_password",label:e("Change Password..."),priority:10,icon:"fa fa-lock",enable:"is_connected",data:{data_disabled:e("Please connect server to enable change password.")}},{name:"wal_replay_pause",node:"server",module:this,applies:["tools","context"],callback:"pause_wal_replay",category:"wal_replay_pause",priority:8,label:e("Pause Replay of WAL"),icon:"fa fa-pause-circle",enable:"wal_pause_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Pause Replay of WAL.")}},{name:"wal_replay_resume",node:"server",module:this,applies:["tools","context"],callback:"resume_wal_replay",category:"wal_replay_resume",priority:9,label:e("Resume Replay of WAL"),icon:"fa fa-play-circle",enable:"wal_resume_enabled",data:{data_disabled:e("Please select a connected database as a Super user and run in Recovery mode to Resume Replay of WAL.")}},{name:"clear_saved_password",node:"server",module:this,applies:["object","context"],callback:"clear_saved_password",label:e("Clear Saved Password"),icon:"fa fa-eraser",priority:11,enable:function(e){return e&&"server"===e._type&&e.is_password_saved}},{name:"clear_sshtunnel_password",node:"server",module:this,applies:["object","context"],callback:"clear_sshtunnel_password",label:e("Clear SSH Tunnel Password"),icon:"fa fa-eraser",priority:12,enable:function(e){return e&&"server"===e._type&&e.is_tunnel_password_saved},data:{data_disabled:e("SSH Tunnel password is not saved for selected server.")}}]),s.default.bindAll(this,"connection_lost"),n.Events.on("pgadmin:server:connection:lost",this.connection_lost))},is_not_connected:function(e){return e&&!e.connected},canCreate:function(e){var t=e.user_id;return t==d.id||s.default.isUndefined(t)},is_connected:function(e){return e&&e.connected},enable_reload_config:function(e){return e&&"server"==e._type&&e.connected&&e.user.is_superuser},is_applicable:function(e){var t;return e&&"server"==e._type&&e.connected&&e.user.is_superuser&&!(null===(t=e.in_recovery)||void 0===t||t)},wal_pause_enabled:function(e){var t;return e&&"server"==e._type&&e.connected&&e.user.is_superuser&&e.in_recovery&&!(null===(t=e.wal_pause)||void 0===t||t)},wal_resume_enabled:function(e){return e&&"server"==e._type&&e.connected&&e.user.is_superuser&&e.in_recovery&&e.wal_pause},callbacks:{connect_server:function(e){var t=e||{},a=n.tree,o=t.item||a.selected(),r=o?a.itemData(o):void 0;return r&&_(this,r,a,o,!1),!1},disconnect_server:function(t,r){var c=t||{},l=this,d=n.tree,p="item"in c?c.item:d.selected(),u=p?d.itemData(p):void 0;if(u){r=r||s.default.isUndefined(r)||s.default.isNull(r);var _=function(){a.ajax({url:l.generate_url(p,"connect",u,!0),type:"DELETE"}).done((function(e){if(1==e.success)if(i.default.success(e.info),u=d.itemData(p),d.removeIcon(p),u.connected=!1,u.shared&&"True"==o.server_mode?u.icon="icon-shared-server-not-connected":u.icon="icon-server-not-connected",d.addIcon(p,{icon:u.icon}),l.callbacks.refresh.apply(l,[null,p]),setTimeout((function(){d.close(p)}),10),n.serverInfo&&u._id in n.serverInfo)delete n.serverInfo[u._id];else{try{i.default.error(e.errormsg)}catch(e){console.warn(e.stack||e)}d.unload(p)}})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),d.unload(p)}))};r?i.default.confirm(e("Disconnect from server"),e("Are you sure you want to disconnect from the server %s?",u.label),(function(){_()}),(function(){return!0})):_()}return!1},beforeopen:function(e,t){return!(!t||"server"!=t._type)&&(n.tree.addIcon(e,{icon:t.icon}),!!t.connected||(_(this,t,n.tree,e,!1),!1))},added:function(e,t){return n.serverInfo=n.serverInfo||{},n.serverInfo[t._id]=s.default.extend({},t),o.Browser.Node.callbacks.added.apply(this,arguments),u(t.version),t.was_connected&&f(this,t,n.tree,e),!0},reload_configuration:function(t){var o=t||{},r=this,c=n.tree,l=o.item||c.selected(),s=l?c.itemData(l):void 0;return s&&i.default.confirm(e("Reload server configuration"),e("Are you sure you want to reload the server configuration on %s?",s.label),(function(){a.ajax({url:r.generate_url(l,"reload",s,!0),method:"GET"}).done((function(e){e.data.status?i.default.success(e.data.result):i.default.error(e.data.result)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),c.unload(l)}))}),(function(){return!0})),!1},restore_point:function(t){var a=t||{},o=n.tree,r=a.item||o.selected(),c=r?o.itemData(r):void 0;if(!c)return!1;(0,l.showNamedRestorePoint)(e("Restore point name"),c,this,r)},change_password:function(t){var o=t||{},r=this,c=n.tree,s=o.item||c.selected(),d=s?c.itemData(s):void 0,p=!1,u=r.generate_url(s,"check_pgpass",d,!0);return d&&a.ajax({url:u,method:"GET"}).done((function(t){t.success&&t.data.is_pgpass&&(p=!0),(0,l.showChangeServerPassword)(e("Change Password"),d,r,s,p)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a)})),!1},on_done:function(e,t,a){1==e.success&&(i.default.success(e.info),t.itemData(a).wal_pause=e.data.wal_pause,t.unload(a),t.setInode(a),t.deselect(a),setTimeout((function(){t.select(a)}),10))},pause_wal_replay:function(e){var t=e||{},o=this,r=n.tree,c=t.item||r.selected(),l=c?r.itemData(c):void 0;if(!l)return!1;a.ajax({url:o.generate_url(c,"wal_replay",l,!0),type:"DELETE",dataType:"json"}).done((function(e){o.on_done(e,r,c)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),r.unload(c)}))},resume_wal_replay:function(e){var t=e||{},o=this,r=n.tree,c=t.item||r.selected(),l=c?r.itemData(c):void 0;if(!l)return!1;a.ajax({url:o.generate_url(c,"wal_replay",l,!0),type:"PUT",dataType:"json"}).done((function(e){o.on_done(e,r,c)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a),r.unload(c)}))},clear_saved_password:function(t){var o=t||{},r=this,c=n.tree,l=o.item||c.selected(),s=l?c.itemData(l):void 0;return s&&i.default.confirm(e("Clear saved password"),e("Are you sure you want to clear the saved password for server %s?",s.label),(function(){a.ajax({url:r.generate_url(l,"clear_saved_password",s,!0),method:"PUT"}).done((function(e){1==e.success?(i.default.success(e.info),c.itemData(l).is_password_saved=e.data.is_password_saved):i.default.error(e.info)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a)}))}),(function(){return!0})),!1},clear_sshtunnel_password:function(t){var o=t||{},r=this,c=n.tree,l=o.item||c.selected(),s=l?c.itemData(l):void 0;return s&&i.default.confirm(e("Clear SSH Tunnel password"),e("Are you sure you want to clear the saved password of SSH Tunnel for server %s?",s.label),(function(){a.ajax({url:r.generate_url(l,"clear_sshtunnel_password",s,!0),method:"PUT"}).done((function(e){1==e.success?(i.default.success(e.info),c.itemData(l).is_tunnel_password_saved=e.data.is_tunnel_password_saved):i.default.error(e.info)})).fail((function(e,t,a){i.default.pgRespErrorNotify(e,a)}))}),(function(){return!0})),!1},server_psql_tool:function(e){var t=e||{},a=n.tree,o=t.item||a.selected(),r=o?a.itemData(o):void 0;n.psql.psql_tool(r,o,!0)}},getSchema:function(e,t){return new c.default((0,r.getNodeListById)(n.Nodes.server_group,e,t),t.user_id,{gid:e.server_group._id})},connection_lost:function(t,a){if(n.tree){for(var o=n.tree,r=t&&o.itemData(t),c=this;r&&"server"!=r._type;)t=o.parent(t),r=t&&o.itemData(t);if(t&&r&&"server"==r._type&&(s.default.isUndefined(r.is_connecting)||!r.is_connecting)){r.is_connecting=!0;n.Events.on("pgadmin:server:connect:cancelled",(function e(o){r._id==o&&(r.is_connecting=!1,n.Events.off("pgadmin:server:connect:cancelled",e),n.Events.trigger("pgadmin:database:connect:cancelled",o,a.data.database||r.db),n.Events.trigger("pgadmin:server:disconnect",{item:t,data:r},!1))})),i.default.confirm(e("Connection lost"),e("Would you like to reconnect to the database?"),(function(){_(c,r,o,t,!0)}),(function(){r.is_connecting=!1,o.unload(t),o.setInode(t),o.addIcon(t,{icon:"icon-database-not-connected"}),n.Events.trigger("pgadmin:server:connect:cancelled",t,r,c),o.select(t)}))}}}});var u=function(t,a){!s.default.isUndefined(t)&&!s.default.isNull(t)&&t<1e5?i.default.warning(e("You have connected to a server version that is older than is supported by pgAdmin. This may cause pgAdmin to break in strange and unpredictable ways. Or a plague of frogs. Either way, you have been warned!")+"<br /><br />"+e("Server connected"),null):s.default.isUndefined(a)||s.default.isNull(a)||i.default.success(a)},_=function t(r,c,_,f,m){var b=r.generate_url(f,"obj",c,!0);a.get(b).done((function(e){e.shared&&s.default.isNull(e.username)&&c.user_id!=d.id?e.service?(c.is_connecting=!1,_.unload(f),_.setInode(f),_.addIcon(f,{icon:"icon-shared-server-not-connected"})):(o.Browser.Node.callbacks.show_obj_properties.call(o.Browser.Nodes[_.itemData(f)._type],{action:"edit",item:f}),c.is_connecting=!1,_.unload(f),_.setInode(f),_.addIcon(f,{icon:"icon-shared-server-not-connected"}),i.default.info("Please enter the server details to connect to the server. This server is a shared server.")):-1==e.cloud_status&&o.Browser.BgProcessManager.recheckCloudServer(c._id)})).always((function(){c.is_connecting=!1}));var h=m||c.connected,g=function a(n,r,s,d,u,f,m,b){(c.connected=!1,b||(_.close(m),u.shared&&"True"==o.server_mode?_.addIcon(m,{icon:"icon-shared-server-not-connected"}):_.addIcon(m,{icon:"icon-server-not-connected"})),200!=n.status&&-1!==n.responseText.search("Ticket expired"))?(_.addIcon(m,{icon:"icon-server-connecting"}),p.fetch_ticket().then((function(){t(d,u,f,m,b)}),(function(){_.addIcon(m,{icon:"icon-server-not-connected"}),i.default.pgNotifier("Connection error",n,e("Connect to server."))}))):i.default.pgNotifier("error",n,s,(function(o){setTimeout((function(){"CRYPTKEY_SET"==o?t(d,u,f,m,b):"CRYPTKEY_NOT_SET"!=o&&(0,l.showServerPassword)(e("Connect to Server"),o,d,u,f,m,b,y,a,v)}),100)}))},y=function(e,t,a,o,c,i){e&&e.data&&("string"==typeof e.data.icon&&(o.removeIcon(c),a.icon=e.data.icon,o.addIcon(c,{icon:a.icon})),s.default.extend(a,e.data),a.is_connecting=!1,(n.serverInfo=n.serverInfo||{})[a._id]=s.default.extend({},a),u(a.version,e.info),r.trigger("connected",r,c,a),n.Events.trigger("pgadmin:server:connected",a._id,c,a),n.Events.trigger("pgadmin:database:connected",a._id,a.db,c,a),n.Events.trigger("pgadmin-browser:tree:selected",c,a,t),n.enable_disable_menus.apply(n,[c]),i?setTimeout((function(){t.callbacks.refresh.apply(t,[!0])}),10):(o.setInode(c),setTimeout((function(){o.select(c),o.open(c)}),10)))},v=function(e,t,a,i){a.is_connecting=!1,e.unload(t),e.setInode(t),e.removeIcon(t),a.shared&&"True"==o.server_mode?e.addIcon(t,{icon:"icon-shared-server-not-connected"}):e.addIcon(t,{icon:"icon-server-not-connected"}),r.trigger("connect:cancelled",c._id,c.db,r,t,a),n.Events.trigger("pgadmin:server:connect:cancelled",c._id,t,a,r),n.Events.trigger("pgadmin:database:connect:cancelled",c._id,c.db,t,a,r),i&&e.select(t)};if(!c.is_connecting&&-1!=c.cloud_status){c.is_connecting=!0,_.setLeaf(f),_.removeIcon(f),_.addIcon(f,{icon:"icon-server-connecting"});var w=r.generate_url(f,"connect",c,!0);a.post(w).done((function(e){if(1==e.success)return y(e,r,c,_,f,h)})).fail((function(e,t,a){return g(e,0,a,r,c,_,f,h)})).always((function(){c.is_connecting=!1}))}},f=function(e,t,r,c){var l=e.generate_url(c,"connect",t,!0);r.setLeaf(c),r.removeIcon(c),r.addIcon(c,{icon:"icon-server-connecting"}),a.get(l).done((function(e){(r.setInode(c),e&&e.data)&&("string"==typeof e.data.icon&&(r.removeIcon(c),t.icon=e.data.icon,r.addIcon(c,{icon:t.icon})),s.default.extend(t,e.data),(n.serverInfo=n.serverInfo||{})[t._id]=s.default.extend({},t),t.errmsg&&i.default.error(t.errmsg))})).fail((function(e,a,n){r.setInode(c),t.shared&&"True"==o.server_mode?r.addIcon(c,{icon:"icon-shared-server-not-connected"}):r.addIcon(c,{icon:"icon-server-not-connected"}),i.default.pgRespErrorNotify(e,n)}))}}return n.Nodes.server}.apply(t,o))||(e.exports=n)},16700:(e,t,a)=>{var o,n;a(68309);var r=a(53495),c=a(13350),i=a(25570),l=d(a(86579)),s=d(a(96486));function d(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(80864),a(34439)],void 0===(n=function(e,t,a){return a.Nodes["coll-tablespace"]||(a.Nodes["coll-tablespace"]=a.Collection.extend({node:"tablespace",label:e("Tablespaces"),type:"coll-tablespace",columns:["name","spcuser","description"],hasStatistics:!0,statsPrettifyFields:[e("Size")],canDrop:!0,canDropCascade:!1})),a.Nodes.tablespace||(a.Nodes.tablespace=a.Node.extend({parent_type:"server",type:"tablespace",sqlAlterHelp:"sql-altertablespace.html",sqlCreateHelp:"sql-createtablespace.html",dialogHelp:t("help.static",{filename:"tablespace_dialog.html"}),label:e("Tablespace"),hasSQL:!0,canDrop:!0,hasDepends:!0,hasStatistics:!0,statsPrettifyFields:[e("Size")],Init:function(){this.initialized||(this.initialized=!0,a.add_menus([{name:"create_tablespace_on_server",node:"server",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace_on_coll",node:"coll-tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"},{name:"create_tablespace",node:"tablespace",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:4,label:e("Tablespace..."),icon:"wcTabIcon icon-tablespace",data:{action:"create"},enable:"can_create_tablespace"}]))},can_create_tablespace:function(e,t){var o=a.tree.getTreeNodeHierarchy(t).server;return o.connected&&o.user.is_superuser},callbacks:{},getSchema:function(e,t){var o=this;return new l.default((function(){return(0,i.getNodeVariableSchema)(o,e,t,!1,!1)}),(function(a){return(0,c.getNodePrivilegeRoleSchema)(o,e,t,a)}),{role:function(){return(0,r.getNodeListByName)("role",e,t)}},{spcuser:a.serverInfo[e.server._id].user.name})},model:a.Node.Model.extend({idAttribute:"oid",initialize:function(e,t){var o=0===s.default.size(e);if(o){var n=a.serverInfo[t.node_info.server._id].user;this.set({spcuser:n.name},{silent:!0})}a.Node.Model.prototype.initialize.apply(this,arguments)},schema:[{id:"name",label:e("Name"),cell:"string",type:"text"},{id:"spcuser",label:e("Owner"),cell:"string",type:"text",control:"node-list-by-name",node:"role",select2:{allowClear:!1}},{id:"description",label:e("Comment"),cell:"string",type:"multiline"}]})})),a.Nodes["coll-tablespace"]}.apply(t,o))||(e.exports=n)},72283:(e,t,a)=>{var o,n,r=i(a(93992)),c=i(a(96486));function i(e){return e&&e.__esModule?e:{default:e}}o=[a(91669),a(28008),a(55112),a(93584),a(80864),a(67507)],void 0===(n=function(e,t,a,o){return a.Browser.Nodes.server_group||(a.Browser.Nodes.server_group=a.Browser.Node.extend({parent_type:null,type:"server_group",dialogHelp:t("help.static",{filename:"server_group_dialog.html"}),label:e("Server Group"),width:"250px",height:"150px",is_collection:!0,Init:function(){this.initialized||(this.initialized=!0,a.Browser.add_menus([{name:"create_server_group",node:"server_group",module:this,applies:["object","context"],callback:"show_obj_properties",category:"create",priority:1,label:e("Server Group..."),data:{action:"create"},icon:"wcTabIcon icon-server_group"}]))},getSchema:function(){return new r.default},canDrop:function(e){var t=e.user_id;return!(t!=o.id&&!c.default.isUndefined(t))},dropAsRemove:!0,canDelete:function(e){var t=a.Browser.tree.siblings(e,!0);return!(!t||0==t.length)}})),a.Browser.Nodes.server_group}.apply(t,o))||(e.exports=n)}}]);